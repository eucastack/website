<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>EucaStack – Image Tasks</title><link>https://www.eucastack.io/docs/image_guide/img_task_intro/</link><description>Recent content in Image Tasks on EucaStack</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://www.eucastack.io/docs/image_guide/img_task_intro/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Browse and Download from Eucalyptus</title><link>https://www.eucastack.io/docs/image_guide/img_task_intro/img_task_eustore/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://www.eucastack.io/docs/image_guide/img_task_intro/img_task_eustore/</guid><description>
&lt;p>Eucalyptus provides a few prebuilt &amp;ldquo;starter&amp;rdquo; images that you can download and install. This is one of the simplest ways to get started with Eucalyptus. Many other organizations, including Linux distributions, publish starter images for use on cloud systems, which can also be installed on Eucalyptus using the steps in this guide.With your Web browser, explore the Eucalyptus Machine Image catalog . Download an image of your choice (we suggest starting with images that have &amp;ldquo;hvm&amp;rdquo; as their Virtualization Type, as they are easier to install and work for both Instance Store and EBS-backed instances). Optionally, if the image is compressed (has a .tgz or .gz extension), you will have to uncompress it. If you obtained an HVM image, you now have a raw disk file that can be installed using instructions in the &lt;a href="https://www.eucastack.io/docs/image_guide/img_task_intro/img_task_install_hvm_image/">Install an HVM image&lt;/a> section. If you obtained a paravirtual image with kernel and ramdisk, you can install them with instructions in the &lt;a href="https://www.eucastack.io/docs/image_guide/img_task_intro/img_add_existing/">Install a paravirtual image&lt;/a> section.&lt;/p></description></item><item><title>Docs: Install an HVM Image</title><link>https://www.eucastack.io/docs/image_guide/img_task_intro/img_task_install_hvm_image/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://www.eucastack.io/docs/image_guide/img_task_intro/img_task_install_hvm_image/</guid><description>
&lt;p>HVM (Hardware-assisted Virtual Machine) images are sequences of raw sectors of a complete bootable disk, including a boot loader and one or more partitions with an operating system. Such images are self-contained and can be booted on hardware that supports virtualization or on a full software emulation of hardware (QEMU).&lt;/p>
&lt;p>At run time, HVM images can be deployed to disks local to the hypervisor (so-called Instance Store images) or they can run off of dynamic volumes on EBS (so-called EBS-backed instances or boot-from-EBS instances). This topic covers methods for installing an HVM image into either type of EMI.&lt;/p>
&lt;h2 id="install-an-hvm-image-as-an-instance-store-emi">Install an HVM image as an Instance Store EMI&lt;/h2>
&lt;p>Bundle, upload, and register the HVM image. All of this can be accomplished with a single command. For Linux images, the required options are:&lt;/p>
&lt;p>&lt;code>euca-install-image -i /path/to/hvm-image -n name-of-the-image -r x86_64 --virtualization-type hvm -b bucket-name-for-image&lt;/code>&lt;/p>
&lt;h2 id="install-an-hvm-image-as-an-ebs-backed-emi">Install an HVM image as an EBS-Backed EMI&lt;/h2>
&lt;p>An EBS-backed image (sometimes referred to as a &amp;ldquo;bfEBS&amp;rdquo; image) is an image with a root device that is an EBS volume created from an EBS snapshot. An EBS-backed image has a number of advantages (over an Instance Store image), including:&lt;/p>
&lt;ul>
&lt;li>Faster boot time&lt;/li>
&lt;li>Larger volume size limits&lt;/li>
&lt;li>Changes to the data on the image persist after instance termination&lt;/li>
&lt;/ul>
&lt;h2 id="option-a-install-an-ebs-image-with-euca-import-vol">Option A: Install an EBS image with euca-import-vol&lt;/h2>
&lt;p>With this method, a single command uploads image data into Object Store and triggers a conversion task, which copies the data into an EBS volume. The volume will be the source of the snapshot behind the EBS-backed EMI.Import the HVM image file into Object Storage and then copy it into EBS. For example: &lt;code>euca-import-volume /path/to/hvm-image --format raw --availability-zone AZ-NAME --bucket bucket-for-hvm-image --owner-akid $EC2_ACCESS_KEY --owner-sak $EC2_SECRET_KEY --prefix image-name-prefix --description &amp;quot;textual description&amp;quot;&lt;/code>
&lt;div class="alert alert-success" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
If the volume import process was interrupted, import can be resumed (within a one-week deadline) with the following command:
&lt;/div>
After the volume data has been uploaded to Object Store, an internal conversion task will copy the data into a new EBS volume. You can query the progress of this task with the following command: &lt;code>euca-describe-conversion-tasks import-vol-fae1e94d&lt;/code> Once the task has finished successfully and the volume is available, you can take a snapshot of the volume: &lt;code>euca-create-snapshot &amp;lt;volume-id&amp;gt;&lt;/code> You can now register the snapshot: &lt;code>euca-register --name &amp;lt;image-name&amp;gt; --snapshot &amp;lt;snapshot-id&amp;gt; --root-device-name &amp;lt;device&amp;gt;&lt;/code> You&amp;rsquo;ve now created a EBS-backed image. To maintain data persistence, be sure to use &lt;code>euca-stop-instances&lt;/code> and &lt;code>euca-start-instances&lt;/code> to stop and start your EBS-backed instance.&lt;/p>
&lt;h2 id="option-b-install-an-ebs-image-with-euca-import-instance">Option B: Install an EBS image with euca-import-instance&lt;/h2>
&lt;p>With this method, a single command uploads image data into the Object Store and triggers a conversion task; this conversion task copies the data into an EBS volumetakes a snapshot of the volume, registers the snapshot as an EMI, and deploys the EMI as an instance.Turn an HVM image into a running EBS instance with a single command:
&lt;div class="alert alert-success" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Just as with euca-run-instance, one can specify the Instance Type for the instance that will run, as well as the SSH key. For example:
&lt;/div>
&lt;code>euca-import-instance /root/paravirtualimage/ubuntuJune06.img --format raw --architecture x86_64 --platform Linux --availability-zone EDU --bucket import_instance --owner-akid $EC2_ACCESS_KEY --owner-sak $EC2_SECRET_KEY --prefix eduii --description &amp;quot;import instance&amp;quot; --key admin --instance-type m1.small&lt;/code>
&lt;div class="alert alert-success" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
&lt;p>If volume import process was interrupted (by an interruption of the command or due to a network mishap, import can be resumed (within a one-week deadline).&lt;/p>
&lt;p>&lt;code>euca-resume-import -t import-i-b393f3f6 /path/to/hvm-image&lt;/code>&lt;/p>
&lt;/div>
After the volume data has been uploaded to Object Store, an internal conversion task will copy the data into a new EBS volume. You can query the progress of this task with the following command: &lt;code>euca-describe-conversion-tasks import-i-b393f3f6&lt;/code> Once the conversion task has finished successfully, you should see a running instance. You may log into that instance if you specified an SSH key. To maintain data persistence, be sure to use &lt;code>euca-stop-instances&lt;/code> and &lt;code>euca-start-instances&lt;/code> to stop and start your EBS-backed instance.&lt;/p>
&lt;h2 id="option-c-install-an-ebs-image-using-a-helper-instance">Option C: Install an EBS image using a helper instance&lt;/h2>
&lt;p>This is a more manual method for installing an HVM image into an EBS-backed EMI. Instead of importing the image data into an EBS volume directly, a helper instance is used to copy data from the image file into the volume. The helper instance can be either an instance store or an EBS-backed instance, and can be deleted when ﬁnished. The volume will be the source of the snapshot behind the EBS-backed EMI.Create and launch a help instance. Create a volume big enough to hold the bootable image file: &lt;code>euca-create-volume -z &amp;lt;cluster_name&amp;gt; -s &amp;lt;size_in_GB&amp;gt;&lt;/code> Attach the volume to the helper instance: &lt;code>euca-attach-volume &amp;lt;volume-id&amp;gt; -i &amp;lt;instance-id&amp;gt; -d &amp;lt;device&amp;gt;&lt;/code> Log in to the instance and copy the bootable image to the attached volume by performing one of the following steps: If the bootable image is saved in an http or ftp repository, use &lt;code>curl&lt;/code> or &lt;code>wget&lt;/code> to download the .img file to the attached volume. For example: &lt;code>curl &amp;lt;path_to_bootable_image&amp;gt; &amp;gt; &amp;lt;device&amp;gt;&lt;/code>&lt;/p>
&lt;p>If the bootable image is from a source other than an http or FTP repository, copy the bootable image from its source to the helper instance, and then copy it to the attached volume using the &lt;code>dd&lt;/code> command. For example: &lt;code>dd if=&amp;lt;path_to_bootable_image&amp;gt; of=&amp;lt;device&amp;gt; bs=1M&lt;/code>&lt;/p>
&lt;p>Detach the volume from the instance: &lt;code>euca-detach-volume &amp;lt;volume-id&amp;gt;&lt;/code> Create a snapshot of the volume: &lt;code>euca-create-snapshot &amp;lt;volume-id&amp;gt;&lt;/code> Register the snapshot: &lt;code>euca-register --name &amp;lt;image-name&amp;gt; --snapshot &amp;lt;snapshot-id&amp;gt; --root-device-name &amp;lt;device&amp;gt;&lt;/code> You&amp;rsquo;ve now created a EBS-backed image. To maintain data persistence, be sure to use &lt;code>euca-stop-instances&lt;/code> and &lt;code>euca-start-instances&lt;/code> to stop and start your EBS-backed instance.&lt;/p></description></item><item><title>Docs: Create an HVM Image</title><link>https://www.eucastack.io/docs/image_guide/img_task_intro/img_task_create_image_intro/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://www.eucastack.io/docs/image_guide/img_task_intro/img_task_create_image_intro/</guid><description>
&lt;h1 id="create-an-hvm-image">Create an HVM Image&lt;/h1>
&lt;p>This section covers how to create a new image for use in your Eucalyptus cloud.&lt;/p></description></item><item><title>Docs: Migrate an Image</title><link>https://www.eucastack.io/docs/image_guide/img_task_intro/img_migrating_intro/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://www.eucastack.io/docs/image_guide/img_task_intro/img_migrating_intro/</guid><description>
&lt;h1 id="migrate-an-image">Migrate an Image&lt;/h1>
&lt;p>This section covers migrating images to and from your Eucalyptus cloud.&lt;/p></description></item><item><title>Docs: Install a paravirtual image</title><link>https://www.eucastack.io/docs/image_guide/img_task_intro/img_add_existing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://www.eucastack.io/docs/image_guide/img_task_intro/img_add_existing/</guid><description>
&lt;h1 id="install-a-paravirtual-image">Install a paravirtual image&lt;/h1>
&lt;div class="alert alert-success" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
As of Eucalyptus version 4.0, it is now required to pass a Eucalyptus Kernel Image (EKI) and a Eucalyptus Ramdisk Image (ERI) when uploading and registering a paravirtual Eucalyptus Machine Image (EMI) using the , , and command line tools.
&lt;/div>
&lt;p>Once you&amp;rsquo;ve customized or acquired a paravirtual image to use with Eucalyptus, you can enable the image as an executable entity with the following steps:&lt;/p>
&lt;ol>
&lt;li>Unless a suitable kernel is already registered, bundle the kernel, upload it to Object Storage, and register it as a new EKI.&lt;/li>
&lt;li>Unless a suitable ramdisk is already registered, bundle the ramdisk, upload it to Object Storage, and register it as a new ERI&lt;/li>
&lt;li>Bundle the root disk image, which must be a Linux partition, requesting the kernel and ramdisk that you desire, upload the bundle to Object Storage, and register it as a new EMI.&lt;/li>
&lt;/ol>
&lt;div class="alert alert-success" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
Note that while all users can bundle, upload and register images, only users under the account have the required permissions to upload and register kernels and ramdisks.
&lt;/div>
&lt;p>Once you have an image that meets your needs, perform the tasks listed in this section to add the image to your cloud.&lt;/p></description></item><item><title>Docs: Remove an Image</title><link>https://www.eucastack.io/docs/image_guide/img_task_intro/img_task_remove_image/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://www.eucastack.io/docs/image_guide/img_task_intro/img_task_remove_image/</guid><description>
&lt;p>When a new image is uploaded to Eucalyptus, Eucalyptus saves the bundle and the image manifest to a bucket in Walrus. This bucket is stored in the Walrus directory that is defined in the Eucalyptus property &lt;code>walrusbackend.storageDir&lt;/code> . The default value for this property is &lt;code>/var/lib/eucalyptus/bukkits&lt;/code> .&lt;/p>
&lt;p>When you register an image, Eucalyptus creates the actual image file. Both the image manifest and the bundle must remain intact to run as an instance.&lt;/p>
&lt;p>To delete an image fully, you must deregister the image and delete the bundle. To successfully remove an image and associated bundle files:&lt;/p>
&lt;p>Find the image you want to remove.&lt;/p>
&lt;pre>&lt;code>euca-describe-images
IMAGE emi-E533392E alpha/centos.5-3.x86-64.img.manifest.xml 965590394582
available public i386 machine eki-345135C9 eri-C4F135BC instance-store
IMAGE emi-623C38B0 alpha/ubuntu.9-04.x86-64.img.manifest.xml 965590394582
available public i386 machine eki-E6B13926 eri-94DB3AB9 instance-store
&lt;/code>&lt;/pre>
&lt;p>Note the image file name (for example, emi-623C38B0). Deregister the image.&lt;/p>
&lt;pre>&lt;code>euca-deregister emi-623C38B0
IMAGE emi-623C38B0
&lt;/code>&lt;/pre>
&lt;p>Delete the bundle.&lt;/p>
&lt;pre>&lt;code>euca-delete-bundle -b alpha -p ubuntu.9-04.x86-64.img
&lt;/code>&lt;/pre>
&lt;p>
&lt;div class="alert alert-success" role="alert">
&lt;h4 class="alert-heading">Note&lt;/h4>
If you accidentally try to delete a bundle for a second time, you might see an error message: . This error only displays if you try to delete a bundle that no longer exists.
&lt;/div>
When you have finished these steps, display all images to confirm that the image was removed.&lt;/p>
&lt;pre>&lt;code>euca-describe-images
IMAGE emi-E533392E alpha/centos.5-3.x86-64.img.manifest.xml 965590394582
available public i386 machine eki-345135C9 eri-C4F135BC instance-store
&lt;/code>&lt;/pre></description></item></channel></rss>