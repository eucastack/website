<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.99.0"><link rel=canonical type=text/html href=https://www.eucastack.io/docs/user_guide/><link rel=alternate type=application/rss+xml href=https://www.eucastack.io/docs/user_guide/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>User Guide | EucaStack</title><meta name=description content="User Guide
This User Guide instructs you how to use a Eucalyptus private cloud. As a cloud user, you will set up your account, work with images, â€¦"><meta property="og:title" content="User Guide"><meta property="og:description" content="A Docsy example site"><meta property="og:type" content="website"><meta property="og:url" content="https://www.eucastack.io/docs/user_guide/"><meta property="og:site_name" content="EucaStack"><meta itemprop=name content="User Guide"><meta itemprop=description content="A Docsy example site"><meta name=twitter:card content="summary"><meta name=twitter:title content="User Guide"><meta name=twitter:description content="A Docsy example site"><link rel=preload href=/scss/main.min.dbc832a6b41f9cb352db274e4a5e4f9087c9f9f914bcd919a25e9dad92d530f3.css as=style><link href=/scss/main.min.dbc832a6b41f9cb352db274e4a5e4f9087c9f9f914bcd919a25e9dad92d530f3.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-00000000-0","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg viewBox="0 0 1388.9 333.38" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g transform="translate(-136.21 41.582)"><path transform="matrix(.26458 0 0 .26458 136.21 -41.582)" d="m1616.4 487.23c-38.46.0-73.324 9.8216-104.59 29.467s-55.615 47.177-73.047 82.594c-17.155 35.14-25.732 75.123-25.732 119.95v12.451c0 66.96 19.782 120.64 59.35 161.04 39.844 40.12 91.725 60.18 155.64 60.18 37.354.0 70.971-7.3314 100.85-21.996 30.16-14.941 54.232-35.833 72.217-62.672l-54.369-51.879c-29.053 37.354-66.683 56.029-112.89 56.029-32.926.0-60.319-10.791-82.178-32.373-21.582-21.582-33.896-50.911-36.939-87.988h293.43v-40.674c0-71.387-16.741-126.59-50.221-165.6-33.203-39.014-80.378-58.52-141.53-58.52zm927.61.0c-63.086.0-112.89 20.613-149.41 61.84-36.523 40.951-54.785 95.598-54.785 163.94v10.377c0 71.663 18.399 127.83 55.199 168.51 36.8 40.674 86.605 61.01 149.41 61.01 32.373.0 62.532-7.0547 90.478-21.166 27.946-14.111 50.081-33.203 66.406-57.275 16.325-24.349 25.042-50.497 26.148-78.443h-95.045c-1.1067 21.582-9.9609 39.706-26.562 54.371-16.602 14.665-37.491 21.996-62.67 21.996-33.203.0-58.659-11.898-76.367-35.693-17.432-24.072-26.148-60.456-26.148-109.15v-16.188c.2767-48.145 9.2702-83.975 26.978-107.49 17.708-23.796 42.887-35.695 75.537-35.695 25.456.0 46.345 8.3008 62.67 24.902 16.602 16.602 25.456 37.77 26.562 63.502h95.045c-1.6602-50.635-19.368-91.448-53.125-122.44-33.48-31.266-76.921-46.898-130.32-46.898zm439.94.0c-34.587.0-65.992 6.0872-94.215 18.262-27.946 12.174-50.081 29.053-66.406 50.635-16.325 21.305-24.486 44.271-24.486 68.896h100.85c0-17.708 7.3333-32.236 21.998-43.58 14.665-11.621 33.48-17.432 56.445-17.432 26.562.0 46.345 7.0566 59.35 21.168 13.004 13.835 19.508 32.373 19.508 55.615v29.469h-61.842c-66.13.0-117.04 12.865-152.73 38.598-35.417 25.456-53.125 62.118-53.125 109.99.0 37.907 14.251 69.727 42.75 95.459s65.299 38.598 110.4 38.598c46.484.0 85.775-16.739 117.87-50.219 3.3203 19.369 7.194 33.34 11.621 41.918h102.93v-7.0547c-11.344-24.072-17.018-56.308-17.018-96.705v-202.54c-.8301-47.868-16.878-84.945-48.144-111.23-31.266-26.563-73.184-39.844-125.76-39.844zm-1099.9 8.3008v290.94c0 53.955 12.451 95.182 37.354 123.68 25.179 28.499 62.118 42.748 110.82 42.748 54.508.0 96.566-17.432 126.17-52.295l2.4903 43.994h95.045v-449.07h-100.86v322.49c-17.155 35.14-50.221 52.709-99.195 52.709-47.314.0-70.971-28.499-70.971-85.498v-289.7h-100.86zm-268.12 72.631c27.946.0 49.805 8.7168 65.576 26.148 15.772 17.155 24.765 42.611 26.978 76.367v7.4707h-192.16c4.7038-34.587 15.495-61.563 32.373-80.932 17.155-19.369 39.567-29.055 67.236-29.055zm1386.6 165.6h54.371v84.668c-8.8542 16.325-22.135 29.329-39.844 39.014-17.432 9.6842-36.109 14.527-56.031 14.527-21.582.0-38.874-5.6732-51.879-17.018-12.728-11.621-19.092-27.116-19.092-46.484.0-23.796 9.4075-42.195 28.223-55.199 18.815-13.005 46.898-19.508 84.252-19.508z" fill="#fff"/><path transform="matrix(.26458 0 0 .26458 136.21 -41.582)" d="m4889.8 307.1v637.5h100.85V798.09l44.824-46.07 133.23 192.58h116.62l-184.69-261.89 166.85-187.18h-121.19l-124.1 139.87-31.543 39.43V307.11h-100.85zm-1162.1 79.271v109.16h-73.877v74.707h73.877v254.42c0 85.498 38.737 128.25 116.21 128.25 21.305.0 43.441-3.181 66.406-9.5449v-78.027c-11.898 2.7669-23.656 4.1504-35.277 4.1504-17.432.0-29.606-3.7364-36.523-11.207-6.6406-7.7474-9.9609-20.199-9.9609-37.354v-250.68h79.272v-74.707h-79.272v-109.16h-100.86zm-296.34 100.86c-50.358.0-91.862 13.005-124.51 39.014-32.65 26.009-48.975 58.382-48.975 97.119.0 46.208 25.179 81.487 75.537 105.84 22.965 11.068 51.602 20.199 85.912 27.393 34.31 7.194 58.798 15.495 73.463 24.902 14.942 9.4076 22.412 23.103 22.412 41.088.0 16.325-6.9174 29.606-20.752 39.844-13.835 9.9609-34.033 14.941-60.596 14.941-27.392.0-49.39-6.3639-65.992-19.092-16.602-13.005-25.593-31.404-26.977-55.199h-97.949c0 26.839 8.0241 51.879 24.072 75.121 16.048 23.242 38.46 41.504 67.236 54.785s61.563 19.922 98.363 19.922c54.232.0 98.088-12.451 131.57-37.354 33.48-25.179 50.221-57.966 50.221-98.363.0-24.072-5.5338-44.548-16.602-61.426-10.791-16.878-27.532-31.266-50.221-43.164-22.412-12.174-53.402-22.551-92.969-31.129-39.567-8.8542-65.853-17.569-78.857-26.146-13.005-8.5775-19.508-20.615-19.508-36.109.0-17.155 6.9173-30.852 20.752-41.09 14.112-10.238 32.236-15.355 54.371-15.355 23.795.0 42.887 6.5013 57.275 19.506 14.388 12.728 21.582 28.776 21.582 48.145h100.86c0-42.334-16.602-76.781-49.805-103.34-32.926-26.563-76.23-39.844-129.91-39.844zm733.79.0c-34.587.0-65.99 6.0872-94.213 18.262-27.946 12.174-50.081 29.053-66.406 50.635-16.325 21.305-24.488 44.271-24.488 68.896h100.86c0-17.708 7.3313-32.236 21.996-43.58 14.665-11.621 33.48-17.432 56.445-17.432 26.562.0 46.347 7.0566 59.352 21.168 13.005 13.835 19.506 32.373 19.506 55.615v29.469h-61.84c-66.13.0-117.04 12.865-152.73 38.598-35.417 25.456-53.125 62.118-53.125 109.99.0 37.907 14.249 69.727 42.748 95.459 28.499 25.732 65.3 38.598 110.4 38.598 46.484.0 85.775-16.739 117.87-50.219 3.3202 19.369 7.194 33.34 11.621 41.918h102.93v-7.0547c-11.344-24.072-17.016-56.308-17.016-96.705v-202.54c-.83-47.868-16.878-84.945-48.144-111.23-31.266-26.563-73.186-39.844-125.76-39.844zm464.84.0c-63.086.0-112.89 20.613-149.41 61.84-36.524 40.951-54.785 95.598-54.785 163.94v10.377c0 71.663 18.401 127.83 55.201 168.51 36.8 40.674 86.605 61.01 149.41 61.01 32.373.0 62.532-7.0547 90.479-21.166 27.946-14.111 50.081-33.203 66.406-57.275 16.325-24.349 25.042-50.497 26.148-78.443h-95.045c-1.1066 21.582-9.9608 39.706-26.562 54.371-16.601 14.665-37.493 21.996-62.672 21.996-33.203.0-58.659-11.898-76.367-35.693-17.432-24.072-26.146-60.456-26.146-109.15V711.36c.2769-48.145 9.2682-83.975 26.976-107.49 17.708-23.796 42.888-35.695 75.537-35.695 25.456.0 46.347 8.3008 62.672 24.902 16.602 16.602 25.456 37.77 26.562 63.502h95.045c-1.6602-50.635-19.37-91.448-53.127-122.44-33.48-31.266-76.921-46.898-130.32-46.898zm-446.17 246.53h54.369v84.668c-8.8541 16.325-22.135 29.329-39.844 39.014-17.432 9.6842-36.107 14.527-56.029 14.527-21.582.0-38.876-5.6732-51.881-17.018-12.728-11.621-19.092-27.116-19.092-46.484.0-23.796 9.4075-42.195 28.223-55.199 18.815-13.005 46.9-19.508 84.254-19.508z" fill="#8bc13a"/></g><g transform="translate(9.5814 7.9375)"><path transform="scale(.26458)" d="m560.34-22.102-558.42 231.31c-21.06 8.7235-38.133 34.275-38.133 57.07v688.09c0 11.398 8.5364 24.173 19.067 28.535l577.49 239.2c10.53 4.3617 27.603 4.3617 38.133.0l558.42-231.31c21.06-8.7235 38.133-34.275 38.133-57.07v-688.09c0-11.398-8.5364-24.173-19.067-28.535l-577.49-239.2c-10.53-4.3617-27.603-4.3617-38.133.0z" fill="#fff"/></g><g transform="translate(-1331.7 150.96)"><g transform="translate(-.13227 -.14313)"><path transform="scale(.26458)" d="m5651.4-517.82c-4.3107-.18795-9.0505.68347-14.025 2.7441l-507.35 210.15c-19.9 8.2427-36.031 32.385-36.031 53.924v642c0 11.537 4.7163 19.84 12.072 23.934v.06641l1.0156.41992c1.147.55934 2.2859 1.1151 3.5469 1.4688l116.15 48.111v-90l410.6-170.08c19.9-8.2427 36.031-32.385 36.031-53.924v-581l108.64 45v-80l-120.26-49.812c-3.0346-1.7765-6.523-2.8394-10.385-3.0078z" fill="#8bc13a"/><path d="m1379.7 116.68V-53.18c0-5.6989 4.2682-12.087 9.5333-14.268l134.24-55.602c5.2651-2.1809 9.5333.67105 9.5333 6.3699v169.86c0 5.6989-4.2682 12.087-9.5333 14.268l-134.24 55.602c-5.2651 2.1809-9.5333-.67105-9.5333-6.3699z" fill="#003556"/><path transform="scale(.26458)" d="m5856.6-432.82c-4.3107-.18795-9.0505.68347-14.025 2.7441l-507.35 210.15c-19.9 8.2427-36.031 32.385-36.031 53.924v642c0 11.536 4.7155 19.84 12.07 23.934v.06641l1.0352.42969c1.1397.55448 2.2713 1.1073 3.5234 1.459l116.15 48.111v-90l410.6-170.08c19.9-8.2427 36.031-32.385 36.031-53.924v-561l108.64 45v-1e2l-120.26-49.812c-3.0347-1.7765-6.525-2.8394-10.387-3.0078z" fill="#8bc13a"/><path d="m1434 139.17V-30.69c0-5.6989 4.2682-12.087 9.5333-14.268l134.24-55.602c5.2651-2.1809 9.5333.67105 9.5333 6.3699v169.86c0 5.6989-4.2682 12.087-9.5333 14.268l-134.24 55.602c-5.2651 2.1809-9.5333-.67105-9.5333-6.3699z" fill="#003556"/><path transform="scale(.26458)" d="m6061.8-347.82c-4.3107-.18795-9.0505.68347-14.025 2.7441l-507.35 210.15c-19.9 8.2427-36.031 32.385-36.031 53.924v642c1e-4 11.537 4.7163 19.84 12.072 23.934v.06641l1.0156.41992c1.147.55934 2.2859 1.1151 3.5469 1.4688l116.15 48.111v-90l410.6-170.08c19.9-8.2427 36.031-32.385 36.031-53.924v-561l108.64 45v-1e2l-120.25-49.811c-3.036-1.7784-6.5287-2.8413-10.393-3.0098z" fill="#8bc13a"/><path d="m1488.3 161.66v-169.86c0-5.6989 4.2682-12.087 9.5333-14.268l134.24-55.602c5.2651-2.1809 9.5333.67105 9.5333 6.3699v169.86c0 5.6989-4.2682 12.087-9.5333 14.268l-134.24 55.602c-5.2651 2.1809-9.5333-.67105-9.5333-6.3699z" fill="#003556"/><path d="m1520.2-14.532 89.523-37.082c5.2651-2.1809 9.5333.67105 9.5333 6.3699v135.47c0 5.6989-4.2682 12.087-9.5333 14.268l-89.523 37.082c-5.2651 2.1809-9.5333-.67104-9.5333-6.3699v-135.47c0-5.6989 4.2682-12.087 9.5333-14.268z" fill="#fff"/><path d="m1596.9 85.99-63.876 26.458-1e-4-46.302 49.504-20.505V29.766l-49.504 20.505 1e-4-46.302 63.876-26.458z" fill="#8bc13a"/></g></g></svg></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><i class="fas fa-book"></i><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><i class="fas fa-rss"></i><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><i class="fas fa-users"></i><span>Community</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this siteâ€¦" aria-label="Search this siteâ€¦" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/user_guide/>Return to the regular view of this page</a>.</p></div><h1 class=title>User Guide</h1><ul><li>1: <a href=#pg-85f55646064f1dec46959e9c3daa72ab>Eucalyptus Overview</a></li><ul></ul><li>2: <a href=#pg-7ccd036145111c0b3368cd5072ab982d>Getting Started</a></li><ul><li>2.1: <a href=#pg-e0617e76c8036d82da2243711cac82df>Getting Started with the Eucalyptus Management Console</a></li><ul><li>2.1.1: <a href=#pg-2f7b6c129c029052d00bc07f9cd62d79>Console Login</a></li><ul></ul><li>2.1.2: <a href=#pg-a8a8d8e2f6913a7a6ecefa02cbdb34dc>Launch and Connect to an Instance with the Management Console</a></li><ul></ul><li>2.1.3: <a href=#pg-2240f361898c60bd0a70d9cd2335bffe>Set Up A Web Server on an Instance</a></li><ul></ul><li>2.1.4: <a href=#pg-a3bcdbed84d0b1cd6dfdded6507eafb3>Reboot an Instance with the Management Console</a></li><ul></ul><li>2.1.5: <a href=#pg-aec23dc55cbb9df683302eeffee5924c>Terminate an Instance with the Management Console</a></li><ul></ul></ul><li>2.2: <a href=#pg-fa37186bd5f27c35edba56002937484b>Getting Started with the AWS CLI</a></li><ul></ul><li>2.3: <a href=#pg-d7a6d5f63064093cc68394c2fd2504bc>Getting Started with Euca2ools</a></li><ul></ul></ul><li>3: <a href=#pg-8cef1bc119dfdc0a049083c756c1e3b0>Using Instances</a></li><ul><li>3.1: <a href=#pg-c8c8904933395220f6e6f02f9f38f8ab>Instance Overview</a></li><ul><li>3.1.1: <a href=#pg-707e8d9b576f5953437508761993f01c>Instance Concepts</a></li><ul></ul><li>3.1.2: <a href=#pg-c63429542400b7a279b8b1078a07fb43>Instance Basics</a></li><ul><li>3.1.2.1: <a href=#pg-b57674acf9fe6ea2a2a8008cfdff8ca2>Virtual Machine Types</a></li><ul></ul><li>3.1.2.2: <a href=#pg-4e63c349678457b1b72c9935c40ac634>Ephemeral Linux Instances</a></li><ul></ul><li>3.1.2.3: <a href=#pg-d62df5951494ee46a1ad7a21c0b7416d>EBS-Backed Instances</a></li><ul><li>3.1.2.3.1: <a href=#pg-502b551b05ef67f98038caf6f8a4eb57>Comparing Instance Types</a></li><ul></ul><li>3.1.2.3.2: <a href=#pg-c7b3795a5460a910fe5dac797f20ad4e>Using EBS-Backed Instances</a></li><ul></ul><li>3.1.2.3.3: <a href=#pg-c2fe73bb7c748d43cef3c10c00583725>Suspending and Resuming EBS-Backed Instances</a></li><ul></ul><li>3.1.2.3.4: <a href=#pg-41690748817a78956fae5de69ab20ec6>EBS EMI Creation Overview</a></li><ul><li>3.1.2.3.4.1: <a href=#pg-4c08ac2498e9684f659efd667898b1fc>Create an EBS EMI</a></li><ul></ul></ul></ul></ul></ul><li>3.2: <a href=#pg-83652bc4be9268467c42ab3484f0e40a>Instance Tasks</a></li><ul><li>3.2.1: <a href=#pg-4431c3c3b61c62f799aec4295b107972>Authorize Security Groups</a></li><ul></ul><li>3.2.2: <a href=#pg-546931904329351c201dba64cb89bb39>Create Key Pairs</a></li><ul></ul><li>3.2.3: <a href=#pg-905ee14893a84b2745ff29c0ef61b535>Find an Image</a></li><ul></ul><li>3.2.4: <a href=#pg-525f763e09b9be41d25f1be85b460a5b>Launch an Instance</a></li><ul></ul><li>3.2.5: <a href=#pg-e176b4c3908ff2cbf5db5f64c1ebee7e>Log in to an Instance</a></li><ul></ul><li>3.2.6: <a href=#pg-2f379d6e014e7c1d96aff4819e677b7c>Reboot an Instance</a></li><ul></ul><li>3.2.7: <a href=#pg-469bfcc1237864a18c2680a9642d16ba>Terminate an Instance</a></li><ul></ul></ul></ul><li>4: <a href=#pg-0be18b368f65d8d2c92834ec5538e410>Using EBS</a></li><ul><li>4.1: <a href=#pg-31c75827e10c1e182a3219af935fc5ec>EBS Overview</a></li><ul></ul><li>4.2: <a href=#pg-b7ccf5028c0d51a8483e0e9dbab864c4>EBS Tasks</a></li><ul><li>4.2.1: <a href=#pg-b35aea79c89f1e994e72383068d64b2f>Create and Attach an EBS Volume</a></li><ul></ul><li>4.2.2: <a href=#pg-4d27f361294d4088d42f0e2f28e4fc06>List Available EBS Volumes</a></li><ul></ul><li>4.2.3: <a href=#pg-342628b6c418ae44913f5db90085207b>Detach an EBS Volume</a></li><ul></ul><li>4.2.4: <a href=#pg-5a971a6386dcddcbeafeaec0a93954d1>Create a Snapshot</a></li><ul></ul><li>4.2.5: <a href=#pg-71839a6768e53254fa7a77f3762aa369>List Available Snapshots</a></li><ul></ul><li>4.2.6: <a href=#pg-67417bb3e6e5b99bc61bd05c2c357333>Delete a Snapshot</a></li><ul></ul></ul></ul><li>5: <a href=#pg-bc2ec5acd11c798f24b0d13d9b265b43>Using Tags and Filters</a></li><ul><li>5.1: <a href=#pg-6336ee0d735b8b532ea96ff02720c720>Tagging and Filtering Overview</a></li><ul><li>5.1.1: <a href=#pg-60a80d0c9ddbf683a4e4190e48ed483e>Tagging Resources</a></li><ul></ul><li>5.1.2: <a href=#pg-aa8f5aec560ade894a46a3970dfbf14e>Filtering Resources</a></li><ul></ul></ul><li>5.2: <a href=#pg-6bd1385dba448291dd98302145461127>Tagging and Filtering Tasks</a></li><ul><li>5.2.1: <a href=#pg-dd571d37f5c80cdcde9d3a6732730c01>Add a Tag</a></li><ul></ul><li>5.2.2: <a href=#pg-042b4d977236060f7f46fbed197c0590>List Tags</a></li><ul></ul><li>5.2.3: <a href=#pg-1855209f1ecefb64ccd88f7af8b7c8b8>Change a Tag's Value</a></li><ul></ul><li>5.2.4: <a href=#pg-9b1a43ba2107a4f7eafe77b5ee38d4ec>Delete a Tag</a></li><ul></ul><li>5.2.5: <a href=#pg-1270c26578adb8e744d48ed49e2f1e74>Filter by Tag</a></li><ul></ul></ul></ul><li>6: <a href=#pg-ab7c354e5ad78e7429a5dc9aa9029889>Managing Access</a></li><ul><li>6.1: <a href=#pg-3d2989c89b0e9dd4fb0ef6ef92ac4a1c>Groups</a></li><ul><li>6.1.1: <a href=#pg-6f28ff1ca761e9e3262daf843ecc60eb>Create a Group</a></li><ul></ul><li>6.1.2: <a href=#pg-efab8a77484ceb68ddfd46bb2d03f60d>Add a Group Policy</a></li><ul></ul><li>6.1.3: <a href=#pg-c9e870f9faf2341d92203254dc47199e>Modify a Group</a></li><ul></ul><li>6.1.4: <a href=#pg-22f88efb8f7b4230c617ce233958b08e>Add a User to a Group</a></li><ul></ul><li>6.1.5: <a href=#pg-e86d20ce4bd225b0dc141c155d554ca3>Remove a User from a Group</a></li><ul></ul><li>6.1.6: <a href=#pg-0ffc021482c3305f0a60954b22bcd807>List Groups</a></li><ul></ul><li>6.1.7: <a href=#pg-24fe2284a9b4c5dac4de4e3b984907ea>Delete a Group</a></li><ul></ul></ul><li>6.2: <a href=#pg-6820a056ed00ccc938ab0e1d5bc2fbbc>Users</a></li><ul><li>6.2.1: <a href=#pg-342fe017ac5a34ef1d0f3e3591560d1b>Add a User</a></li><ul></ul><li>6.2.2: <a href=#pg-752c1c6d43c0a1ec40de40e16ac7757b>Create a Login Profile</a></li><ul></ul><li>6.2.3: <a href=#pg-52fdb183c537a61661d91b13998619b4>Modify a User</a></li><ul></ul><li>6.2.4: <a href=#pg-26affa6e4f189906a2479f938e44bf6e>Change User Path</a></li><ul></ul><li>6.2.5: <a href=#pg-732f9e3d6d25d353e49876081277ff93>Change User Password</a></li><ul></ul><li>6.2.6: <a href=#pg-7b318b328661bcfbe169389beddb17a1>List Users</a></li><ul></ul><li>6.2.7: <a href=#pg-0a09544f1e4b3297bc5e07fddde2cc06>Delete a User</a></li><ul></ul></ul><li>6.3: <a href=#pg-407c51194c7080ffe59d541454978bdc>Credentials</a></li><ul><li>6.3.1: <a href=#pg-2fa37849f9c1f6c20198b2ea31557ca7>Create Credentials</a></li><ul></ul><li>6.3.2: <a href=#pg-ef53b52e534f0ea94eba216f4cbef56f>Upload a Certificate</a></li><ul></ul></ul></ul><li>7: <a href=#pg-771685f3698cbf9f2500bba7717c4bf1>Using VM Networking and Security</a></li><ul><li>7.1: <a href=#pg-8e5e2d308d2a6de61e0cdec278497495>Associate an IP Address with an Instance</a></li><ul></ul><li>7.2: <a href=#pg-eba6d058af5f53c724aac0b09f2ead69>Release an IP Address</a></li><ul></ul><li>7.3: <a href=#pg-a708dbaf6ae500e2811936c10cba1ada>Create a Security Group</a></li><ul></ul><li>7.4: <a href=#pg-ca7e9523da8da1f44b9a178664b281e5>Delete a Security Group</a></li><ul></ul><li>7.5: <a href=#pg-fcb1a70c1a948cba1ca649d72cbb7c99>Authorize Security Group Rules</a></li><ul></ul><li>7.6: <a href=#pg-c85449799b2f17c043704492a4a20e32>Revoke Security Group Rules</a></li><ul></ul></ul><li>8: <a href=#pg-9b7bdc22a4ccce9fcccfa599c27cb642>Using Auto Scaling</a></li><ul><li>8.1: <a href=#pg-eca302cc14efa49f00bba5ea410e31e7>How Auto Scaling Works</a></li><ul></ul><li>8.2: <a href=#pg-18877d04bc0954a2d14b9a825becf87e>Auto Scaling Concepts</a></li><ul><li>8.2.1: <a href=#pg-ec71d585508ba55ce2779a64496f9175>Understanding Launch Configurations</a></li><ul></ul><li>8.2.2: <a href=#pg-3f7496825c64b070eef53cc4acc6b30d>Understanding Auto Scaling Groups</a></li><ul></ul><li>8.2.3: <a href=#pg-21224594ae25d8659105c5691ab05af7>Understanding Auto Scaling Policies</a></li><ul></ul><li>8.2.4: <a href=#pg-1039aae90fb93b25460c6a3f9b056d4c>Understanding Health Checks</a></li><ul></ul><li>8.2.5: <a href=#pg-8566326bbd9883d42b15b0bac8e468f1>Understanding Instance Termination Policies</a></li><ul></ul></ul><li>8.3: <a href=#pg-d921ce29126b5c99559b331c22229ef0>Auto Scaling Usage Examples</a></li><ul><li>8.3.1: <a href=#pg-c036ed77e65d33988a1baddd590db82e>Creating a Basic Auto Scaling Configuration</a></li><ul></ul><li>8.3.2: <a href=#pg-cdb324072ca0c83712273c2e73d1192a>Configuring a Demand-Based Scaling Policy</a></li><ul></ul><li>8.3.3: <a href=#pg-b0cf01cf054f73b508f76b8e16b3106d>Configuring Health Checks</a></li><ul></ul><li>8.3.4: <a href=#pg-c0a0eccf064a86028174691a2cc3ab0f>Configuring an Instance Termination Policy</a></li><ul></ul><li>8.3.5: <a href=#pg-85971fafb1ec1756b89b860719894dc1>Configuring Auto Scaling with Elastic Load Balancing</a></li><ul></ul></ul></ul><li>9: <a href=#pg-fa9c57ce9cf0f118403555c12854216f>Using Elastic Load Balancing</a></li><ul><li>9.1: <a href=#pg-3efded6de8291ff4c6b94c2482944aa9>Elastic Load Balancing Overview</a></li><ul><li>9.1.1: <a href=#pg-52af6b78792afd89a364bc84e5671daa>Elastic Load Balancing Concepts</a></li><ul></ul></ul><li>9.2: <a href=#pg-0ef117021b7f2e69b6b89b62164a657f>Eucalyptus Load Balancing Usage Examples</a></li><ul><li>9.2.1: <a href=#pg-d435e90ef9d0abe8cf8635997f7c2916>Eucalyptus ELB Listener Configurations</a></li><ul></ul><li>9.2.2: <a href=#pg-441800215b6afae35e19bd054f75affd>Creating a Basic Elastic Load Balancing Configuration</a></li><ul></ul><li>9.2.3: <a href=#pg-9b07046d5cfd7a621ae1abebbaa563bb>Configuring the Health Check</a></li><ul></ul><li>9.2.4: <a href=#pg-174d97ee16b0c7ca97b9cd8e0d1c14d1>Modifying an Elastic Load Balancing Configuration</a></li><ul></ul><li>9.2.5: <a href=#pg-5d3d174a5842b1b8c026080102c901df>Creating Elastic Load Balancing Sticky Sessions</a></li><ul></ul><li>9.2.6: <a href=#pg-f1ad054efec9e95d751013d7b0f2103c>Uploading SSL Certificates for Elastic Load Balancing</a></li><ul></ul><li>9.2.7: <a href=#pg-84660b0f56fa561f8e7dd7fd39147d84>Adding SSL Support</a></li><ul></ul><li>9.2.8: <a href=#pg-6daed41591ecf089789af6ae6c4f4c9c>Updating the SSL Negotiation Configuration</a></li><ul></ul><li>9.2.9: <a href=#pg-ad3df4530193d2f58cafb2565733cba6>Adding and Editing Predefined Security Policies</a></li><ul></ul><li>9.2.10: <a href=#pg-9eafb00077fc3a1a35dfa444899e3962>Configuring Back-end Server Authentication</a></li><ul></ul><li>9.2.11: <a href=#pg-43db79d13bfc91251cd4fc4343275495>Enabling Cross-Zone Load Balancing</a></li><ul></ul><li>9.2.12: <a href=#pg-65ae084284fdc29b9fc2bf4bf58cabf6>Accessing Load Balancer Logs</a></li><ul></ul></ul></ul><li>10: <a href=#pg-e2537d6cae270c2662113e6704686e49>Using CloudWatch</a></li><ul><li>10.1: <a href=#pg-ba38e0f8d65765ef9bcbb48ac325b0fd>CloudWatch Overview</a></li><ul><li>10.1.1: <a href=#pg-de26569f213c700b3e57db3b7012fd27>CloudWatch Concepts</a></li><ul></ul><li>10.1.2: <a href=#pg-3b5b122efee1ace175c6ccba6745c721>Namespaces, Metrics, and Dimensions</a></li><ul><li>10.1.2.1: <a href=#pg-88efa26658a001d560fce3ae313b2d65>Namespaces</a></li><ul></ul><li>10.1.2.2: <a href=#pg-47515a2b2793917872c10fdb522c10da>Instance Metrics and Dimensions</a></li><ul></ul><li>10.1.2.3: <a href=#pg-efeec537c451e9e7ddb811e740c25c4b>EBS Metrics and Dimensions</a></li><ul></ul><li>10.1.2.4: <a href=#pg-6310ab278a92a17016f53fc8d51fd556>Auto Scaling Metrics and Dimensions</a></li><ul></ul><li>10.1.2.5: <a href=#pg-fcd023d86753d7a388178c89e8d61668>ELB Metrics and Dimensions</a></li><ul></ul></ul></ul><li>10.2: <a href=#pg-8335412c70063736f4ead3d2c0b2a905>CloudWatch Tasks</a></li><ul><li>10.2.1: <a href=#pg-510e16c7fba8408b8a3310fa823896df>Configuring Monitoring</a></li><ul><li>10.2.1.1: <a href=#pg-09a589afd5cc8a4a8d929168058bb87f>Enable Monitoring</a></li><ul></ul><li>10.2.1.2: <a href=#pg-507278909208e5e78085e4cb24776f25>Disable Monitoring</a></li><ul></ul></ul><li>10.2.2: <a href=#pg-0d91fb6ab60e290d5d3123d4919a2041>Viewing and Publishing Metrics</a></li><ul><li>10.2.2.1: <a href=#pg-31655e3bc3911b43dbbd5461613ac43d>List Available Metrics</a></li><ul></ul><li>10.2.2.2: <a href=#pg-4a58c6e031aaa184531b2d009b2ee36a>Get Statistics for a Metric</a></li><ul></ul><li>10.2.2.3: <a href=#pg-c0f64dfbb19c23bdb97ba7dd7a1ec5dc>Publish Custom Metrics</a></li><ul></ul><li>10.2.2.4: <a href=#pg-a6b482304590bdee0ed027c6050cf792>Modify Metric Polling Timing</a></li><ul></ul></ul><li>10.2.3: <a href=#pg-4ffb6602b363163032c20bc9576ac0ca>Configuring Alarms</a></li><ul><li>10.2.3.1: <a href=#pg-b324598b5d78202fe7038ed12b933f84>Create an Alarm</a></li><ul></ul><li>10.2.3.2: <a href=#pg-4505c07adc12e8c41df5e2928668541d>Test an Alarm</a></li><ul></ul><li>10.2.3.3: <a href=#pg-5953f3e5b73a1493608731018d21703d>Delete an Alarm</a></li><ul></ul></ul></ul></ul><li>11: <a href=#pg-88e53ce2fba838d96249ddad99d4cbf9>Using Object Storage</a></li><ul><li>11.1: <a href=#pg-28970e2b1f6059613beb141748479142>Access Object Storage</a></li><ul></ul></ul><li>12: <a href=#pg-02cba64fa23838de5af5870774334303>Using Route53</a></li><ul><li>12.1: <a href=#pg-99545870fdb7b8ece45ca25e77436db3>Route53 Concepts</a></li><ul></ul><li>12.2: <a href=#pg-f146d3642318659063bc98995e4793ad>Route53 Usage</a></li><ul></ul><li>12.3: <a href=#pg-1b5e6b30624788fc3ce78b0d4f182d8c>Route53 Delegated Subdomain</a></li><ul></ul></ul><li>13: <a href=#pg-f6982d0753d21dc2259ad3af26fbdd7f>Using Simple Queue Service</a></li><ul><li>13.1: <a href=#pg-a945a3681424452a865a77f09ee6c361>Simple Queue Service Concepts</a></li><ul></ul><li>13.2: <a href=#pg-4695109097ddeeb95b11f0f914f20676>Simple Queue Service Overview</a></li><ul></ul></ul><li>14: <a href=#pg-c590edd3b622a7fa8a549679149755fd>Using CloudFormation</a></li><ul><li>14.1: <a href=#pg-16f6676bbc04702c9aa113b96e8208bb>CloudFormation Use Case</a></li><ul></ul><li>14.2: <a href=#pg-70fe51a9080ba0a3a8dd4d5b64a0c516>CloudFormation Templates</a></li><ul></ul><li>14.3: <a href=#pg-21e29648ce96484797f4155e4f10cac0>Troubleshooting CloudFormation</a></li><ul></ul></ul><li>15: <a href=#pg-54de08f31ea3a000e9d4c449e213742a>Using Virtual Private Cloud</a></li><ul><li>15.1: <a href=#pg-98a4c8eabd3123e6c2febb3fc85d9a08>How VPC Works</a></li><ul><li>15.1.1: <a href=#pg-1476e25db6444279c953d0bf4910fee1>Default VPCs</a></li><ul></ul><li>15.1.2: <a href=#pg-90f3cb02a25b58e0f1210668106b6e0b>Subnets and IP Addressing</a></li><ul></ul></ul><li>15.2: <a href=#pg-9696b58e42c55b3f2386909aefa32a8d>Understanding VPC Networking Concepts</a></li><ul><li>15.2.1: <a href=#pg-a2fc9c3cb43048d3dba6174f4d88338c>Domain Name System (DNS)</a></li><ul></ul><li>15.2.2: <a href=#pg-c0b77bfe05ecbbbc8b0c5c63a84365ae>Elastic Network Interfaces (ENIs)</a></li><ul></ul><li>15.2.3: <a href=#pg-17b230366694602b68dca7534531c6b5>Route Tables</a></li><ul></ul><li>15.2.4: <a href=#pg-813b39755fd2696456e6c9e942b46520>Internet Gateways</a></li><ul></ul><li>15.2.5: <a href=#pg-16a25a9a6d471ed2564d98fdb25c53e7>Network Address Translation (NAT) Gateways</a></li><ul></ul></ul><li>15.3: <a href=#pg-364ac051523babdcea4194ceefceb519>VPC Security Concepts</a></li><ul><li>15.3.1: <a href=#pg-e051c24ce8cd658239c4695c54061aff>Security Groups</a></li><ul></ul></ul></ul></ul><div class=content><h1 id=user-guide>User Guide</h1><p>This User Guide instructs you how to use a Eucalyptus private cloud. As a cloud user, you will set up your account, work with images, launch instances, and so on. To install or administer and operate a Eucalyptus cloud, refer to the Eucalyptus Installation Guide and the Administration Guide, respectively.Enjoy using your Eucalyptus private cloud!</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-85f55646064f1dec46959e9c3daa72ab>1 - Eucalyptus Overview</h1><p>Eucalyptus is open source software for building AWS-compatible private and hybrid clouds. As an Infrastructure as a Service product, Eucalyptus allows you to flexibly provision your own collections of resources (both compute and storage), on an as-needed basis.</p><h2 id=who-should-read-this-guide>Who Should Read this Guide?</h2><p>This guide is for Eucalyptus users who wish to run application workloads on a Eucalyptus cloud.</p><h2 id=whats-in-this-guide>Whatâ€™s in this Guide?</h2><p>This guide contains instructions for users of the Eucalyptus cloud platform. While these instructions apply generally to all tools capable of interacting with Eucalyptus, such as the Eucalyptus Management Console or the AWS S3 toolset, but the primary focus is on the use of Euca2ools (Eucalyptus command line tools). The following is an overview of the contents of this guide.</p><table><thead><tr><th style=text-align:left>How do I â€¦?</th><th style=text-align:left>Related Topic</th></tr></thead><tbody><tr><td style=text-align:left>Begin using and configuring Eucalyptus</td><td style=text-align:left><a href=/docs/user_guide/getting_started/>getting_started</a></td></tr><tr><td style=text-align:left>Run and control with virtual machine (VM) instances</td><td style=text-align:left><a href=/docs/user_guide/using_instances/>using_instances</a></td></tr><tr><td style=text-align:left>Use Eucalyptusâ€™ elastic block storage</td><td style=text-align:left><a href=/docs/user_guide/using_block_storage/>using_block_storage</a></td></tr><tr><td style=text-align:left>Apply tags and filters</td><td style=text-align:left><a href=/docs/user_guide/resource_and_tags/>resource_and_tags</a></td></tr><tr><td style=text-align:left>Manage access for groups and users</td><td style=text-align:left><a href=/docs/user_guide/using_access/>using_access</a></td></tr><tr><td style=text-align:left>Understand the Eucalyptus VM networking and security features</td><td style=text-align:left><a href=/docs/user_guide/networking_security/>networking_security</a></td></tr><tr><td style=text-align:left>Use Eucalyptusâ€™ Auto Scaling features</td><td style=text-align:left><a href=/docs/user_guide/autoscaling_intro/>autoscaling_intro</a></td></tr><tr><td style=text-align:left>Use elastic load balancing</td><td style=text-align:left><a href=/docs/user_guide/elb_intro/>elb_intro</a></td></tr><tr><td style=text-align:left>Generate metrics about my cloud</td><td style=text-align:left><a href=/docs/user_guide/using_monitoring/>using_monitoring</a></td></tr><tr><td style=text-align:left>Use scalable object storage</td><td style=text-align:left><a href=/docs/user_guide/osg_using/>osg_using</a></td></tr><tr><td style=text-align:left>Use CloudFormation</td><td style=text-align:left><a href=/docs/user_guide/cf_overview/>cf_overview</a></td></tr><tr><td style=text-align:left>Use Virtual Private Cloud</td><td style=text-align:left><a href=/docs/user_guide/vpc_intro/>vpc_intro</a></td></tr></tbody></table><h2 id=eucalyptus-features>Eucalyptus Features</h2><p>Eucalyptus offers ways to implement, manage, and maintain your own collection of virtual resources (machines, network, and storage). The following is an overview of these features.</p><h3 id=aws-api-compatibility>AWS API compatibility</h3><p>Eucalyptus provides API compatibility with Amazon Web Services, to allow you to use familiar tools and commands to provision your cloud.</p><h3 id=block--and-bucket-based-storage-abstractions>Block- and bucket-based storage abstractions</h3><p>Eucalyptus provides storage options compatible with Amazon&rsquo;s EBS (block-based) and S3 (bucket-based) storage products.</p><h3 id=self-service-capabilities>Self-service capabilities</h3><p>Eucalyptus offers a Management Console, allowing your users to request the resources they need, and automatically provisioning those resources where available.</p><h3 id=web-based-interface>Web-based Interface</h3><p>The Eucalyptus Management Console is accessible from any device via a browser. The Console initial page provides a Dashboard view of components available to you to manage, configure, provision, and generate various reports.</p><h2 id=resource-management>Resource Management</h2><p>Eucalyptus offers tools to seamlessly manage a variety of virtual resources. The following is an overview of the types of resources your cloud platform.</p><h3 id=ssh-key-management>SSH Key Management</h3><p>Eucalyptus employs public and private keypairs to validate your identity when you log into VMs using SSH. You can add, describe, and delete keypairs.</p><h3 id=image-management>Image Management</h3><p>Before running instances, someone must prepare VM images for use in the cloud. This can be an administrator or a user. Eucalyptus allows you to bundle, upload, register, describe, download, unbundle, and deregister VM images.</p><h3 id=linux-guest-os-support>Linux Guest OS Support</h3><p>Eucalyptus lets you run your own VMs in the cloud. You can run, describe, terminate, and reboot a wide variety of Linux-based VMs that were prepared using image management commands.</p><h3 id=ip-address-management>IP Address Management</h3><p>Eucalyptus can allocate, associate, disassociate, describe, and release IP addresses. Depending on the networking mode, you might have access to public IP addresses that are not statically associated with a VM ( Elastic IPs ). Eucalyptus provides tools to allow users to reserve and dynamically associate these elastic IPs with virtual machines.</p><h3 id=security-group-management>Security Group Management</h3><p>Security groups are sets of firewall rules applied to VMs associated with the group. Eucalyptus lets you create, describe, delete, authorize, and revoke security groups. How much of these things can a typical user actually do?</p><h3 id=volume-and-snapshot-management>Volume and Snapshot Management</h3><p>Eucalyptus allows you to create dynamic block volumes. A dynamic block volume is similar to a raw block storage device that can be used with virtual machines. You can create, attach, detach, describe, bundle, and delete volumes. You can also create and delete snapshots of volumes and create new volumes from snapshots.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-7ccd036145111c0b3368cd5072ab982d>2 - Getting Started</h1><h1 id=getting-started>Getting Started</h1><p>This section helps you get started using your Eucalyptus cloud, and covers setting up your user credentials, installing and configuring command line tools, and working with images and instances. As a cloud user, you can access the Eucalyptus cloud using a command line interface such as the AWS CLI, or by using a web-based interface such as the Eucalyptus Management Console.</p><p>To access Eucalyptus via the command line, you can use the AWS CLI or Euca2ools with access key credentials. To access Eucalyptus with the Management Console, you&rsquo;ll need a password. Talk to your cloud administrator to get your keys and passwords.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-e0617e76c8036d82da2243711cac82df>2.1 - Getting Started with the Eucalyptus Management Console</h1><h1 id=getting-started-with-the-eucalyptus-management-console>Getting Started with the Eucalyptus Management Console</h1><p>This section helps you get started using your Eucalyptus cloud with the Eucalyptus Management Console.To access Eucalyptus with the Management Console, you&rsquo;ll need a password for the Management Console. Talk to your cloud administrator to get your keys and passwords.</p></div><div class=td-content><h1 id=pg-2f7b6c129c029052d00bc07f9cd62d79>2.1.1 - Console Login</h1><p>This screen allows you to log in to the Eucalyptus Management Console with either your Eucalyptus or your Amazon Web Services account. If you&rsquo;ve forgotten your password, don&rsquo;t have login credentials, or do not know the URL for the Eucalyptus Management Console for your Eucalyptus account, please contact your system administrator.Navigate to the Eucalyptus Management Console by typing the URL of the Management Console into your browser&rsquo;s navigation bar. The URL of the Eucalyptus Management Console depends on how the console was installed in your cloud; see your system administrator for the specific URL for your installation. Follow the appropriate instructions below for logging into either your Eucalyptus or your Amazon Web Services cloud.</p><h2 id=log-in-to-your-eucalyptus-cloud>Log in to your Eucalyptus cloud</h2><p>This area of the login dialog allows you to log in to your Eucalyptus cloud.Click the Log in to Eucalyptus tab. Type your account name into the Account name text box. Type your user name into the User name text box. Type your password into the Password text box. Click the Log in to Eucalyptus button.</p><h2 id=log-in-to-your-amazon-web-services-cloud>Log in to your Amazon Web Services cloud</h2><p>This area of the login dialog allows you to log in to your Amazon Web Services cloud.Click the Log in to AWS tab.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>To obtain your AWS security credentials, go to Amazon&rsquo;s page.</div>Enter your AWS access key ID into the Access key ID text box. Enter your AWS secret access key into the Secret access key text box. Click the Log in to AWS button.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-a8a8d8e2f6913a7a6ecefa02cbdb34dc>2.1.2 - Launch and Connect to an Instance with the Management Console</h1><p>To launch an instance:</p><p>Click on the Launch Instance button on the main console page:
<img src=https://www.eucastack.io/images/run_instance_console_1.jpg alt=image>
Select an image from the list (for this example, we&rsquo;ll select a CentOS image), then click the Next button:
<img src=https://www.eucastack.io/images/run_instance_console_2.jpg alt=image>
Select an instance type and availability zone from the Details tab. For this example, select the defaults, and then click the Next button:
<img src=https://www.eucastack.io/images/run_instance_console_3.jpg alt=image>
On the Security tab, we&rsquo;ll create a key pair and a security group to use with our new instance. A key pair will allow you to access your instance, and a security group allows you to define what kinds of incoming traffic your instance will allow.
<img src=https://www.eucastack.io/images/run_instance_console_4.jpg alt=image>
First, we will create a key pair. Click the Create key pair link to bring up the Create key pair dialog:
<img src=https://www.eucastack.io/images/run_instance_console_4a.jpg alt=image>
Type the name of your new key pair into the Name text box, and then click the Create and Download button:
<img src=https://www.eucastack.io/images/run_instance_console_4b.jpg alt=image>
The key pair automatically downloads to a location on your computer, typically in the <em>Downloads</em> folder. The Create key pair dialog will close, and the Key name text box will be populated with the name of the key pair you just created:
<img src=https://www.eucastack.io/images/run_instance_console_4d.jpg alt=image>
Next, we will create a security group. Click the Create security group link to bring up the Create security group dialog:
<img src=https://www.eucastack.io/images/run_instance_console_4e.jpg alt=image>
On the Create security group dialog, type the name of your security group into the Name text box. Type a brief description of your security group into the Description text box. We&rsquo;ll need to SSH into our instance later, so in the Rules section of the dialog, select the SSH protocol from the Protocol drop-down list box.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>In this example, we allow any IP address to access our new instance. For production use, please use appropriate caution when specifying an IP range. For more information on CIDR notation, go to .</div>You need to specify an IP address or a range of IP addresses that can use SSH to access your instance. For this example, click the Open to all addresses link. This will populate the IP Address text box with 0.0.0.0/0, which allows any IP address to access your instance via SSH.
<img src=https://www.eucastack.io/images/run_instance_console_4f.jpg alt=image>
Click the Add rule button. The Create security group dialog should now look something like this:
<img src=https://www.eucastack.io/images/run_instance_console_4g.jpg alt=image>
Click the Create security group button. The Create security group dialog will close, and the Security group text box will be populated with the name of the security group you just created:
<img src=https://www.eucastack.io/images/run_instance_console_4h.jpg alt=image>
You&rsquo;re now ready to launch your new instance. Click the Launch Instance button. The Launch Instance dialog will close, and the Instances screen will display. The instance you just created will display at the top of the list with a status of Pending:
<img src=https://www.eucastack.io/images/run_instance_console_4j.jpg alt=image>
When the status of your new instance changes to Running, click the instance in the list to bring up a page showing details of your instance. For example:
<img src=https://www.eucastack.io/images/run_instance_console_4k.jpg alt=image>
Note the Public IP address and/or the Public hostname fields. You will need this information to connect to your new instance. For example:
<img src=https://www.eucastack.io/images/run_instance_console_4l.jpg alt=image>
Using the public IP address or hostname of your new instance, you can now use SSH to log into the instance using the private key file you saved when you created a key pair. For example:</p><pre><code>ssh -i my-test-keypair.private root@10.111.57.109 
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-2240f361898c60bd0a70d9cd2335bffe>2.1.3 - Set Up A Web Server on an Instance</h1><p>Once you&rsquo;ve launched an instance and connected to it, you can test it by setting up a web server.</p><p>ssh into your instance.</p><pre><code>ssh 192.168.1.1 -l root
</code></pre><p>Install Apache:</p><pre><code>yum install -y httpd
</code></pre><p>You should see output similar to the following:</p><pre><code>Loaded plugins: fastestmirror, security, versionlock
Loading mirror speeds from cached hostfile
 * extras: centos.sonn.com
centos-7-x86_64-os                                       | 3.7 kB     00:00
centos-7-x86_64-updates                                  | 3.4 kB     00:00
centos-7-x86_64-updates/primary_db                       | 5.4 MB     00:00
epel-7-x86_64                                            | 4.4 kB     00:00
epel-7-x86_64/primary_db                                 | 6.3 MB     00:00
extras                                                   | 3.3 kB     00:00
Setting up Install Process
Package httpd-2.2.15-31.el7.centos.x86_64 already installed and latest version
Nothing to do
</code></pre><p>Start the web server:</p><pre><code>systemctl start httpd.service
</code></pre><p>You should see output similar to the following:</p><pre><code>Starting httpd:                                            [  OK  ]
</code></pre><p>Test connectivity to your instance by using a web browser and connecting to the web service on your instance. For example:</p><p><img src=https://www.eucastack.io/images/test_instance_web_server_connect.png alt=image></p></div><div class=td-content style=page-break-before:always><h1 id=pg-a3bcdbed84d0b1cd6dfdded6507eafb3>2.1.4 - Reboot an Instance with the Management Console</h1><p>Rebooting preserves the root filesystem of an instance across restarts. To reboot an instance:</p><p>On the Instances page, select Reboot from the Actions menu next to the instance you want to reboot.
<img src=https://www.eucastack.io/images/reboot_instance_console_1.jpg alt=image>
Click the Yes, Reboot button.
<img src=https://www.eucastack.io/images/reboot_instance_console_2.jpg alt=image></p></div><div class=td-content style=page-break-before:always><h1 id=pg-aec23dc55cbb9df683302eeffee5924c>2.1.5 - Terminate an Instance with the Management Console</h1><p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>Terminating an instance can cause the instance and all items associated with the instance (data, packages installed, etc.) to be lost. Be sure to save any important work or data before terminating an instance.</div>To terminate instances:</p><p>On the Instances page, Select Terminate from the Actions menu next to the instance you want to terminate.
<img src=https://www.eucastack.io/images/terminate_instance_console_1.jpg alt=image>
Click the Yes, Terminate button.
<img src=https://www.eucastack.io/images/terminate_instance_console_2.jpg alt=image>
The Status field of the instance will first change to Shutting-down :
<img src=https://www.eucastack.io/images/terminate_instance_console_3.jpg alt=image>
&mldr;and then change to Terminated :
<img src=https://www.eucastack.io/images/terminate_instance_console_4.jpg alt=image></p></div><div class=td-content style=page-break-before:always><h1 id=pg-fa37186bd5f27c35edba56002937484b>2.2 - Getting Started with the AWS CLI</h1><p>This section helps you get started using your Eucalyptus cloud, and covers setting up your user credentials, installing and configuring the AWS CLI, and working with images and instances. As a cloud user, you can access the Eucalyptus cloud using a command line interface such as the AWS CLI, or using a web-based interface such as the Eucalyptus Management Console.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>This section primarily deals with using the AWS CLI. For complete documentation on using web-based the Eucalyptus Console, see <a href=https://www.eucastack.io/docs/user_guide/getting_started/getting_started_console/console_login/>Console Login</a>.</div><p>The install guide covers <a href=https://www.eucastack.io/docs/install_guide/installing_cli/installing_awscli/>&ldquo;AWS CLI Installation&rdquo;</a></p><h2 id=find-image>Find Image</h2><p>Enter the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws ec2 describe-images</span>
</span></span><span style=display:flex><span>IMAGES	x86_64	2020-10-17T05:29:09.161Z	emi-0ba907069cb1845bc	ubuntu-focal/focal-server-cloudimg-amd64.raw.manifest.xml	machine	ubuntu-focal	000575948401		True	/dev/sda	instance-store	available	hvm
</span></span><span style=display:flex><span>IMAGES	x86_64	2020-10-17T05:24:08.857Z	emi-371ada125a928669e	centos-7/CentOS-7-x86_64-GenericCloud-2003.raw.manifest.xml	machine	centos-7	000575948401		True	/dev/sda	instance-store	available	hvm
</span></span></code></pre></div><p>Look for the image ID and write it down. The image ID starts with <code>emi-</code> . Once you find a suitable image to use, make sure you have a keypair to use.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Examples use the AWS CLI <em>text</em> output format. You can request this output for a command by adding an &ldquo;&ndash;output text&rdquo; argument to any command.</div><h2 id=create-keypairs>Create KeyPairs</h2><p>Enter the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws ec2 create-key-pair --key-name &lt;keypair_name&gt; &gt; &lt;keypair_name&gt;.private
</span></span></code></pre></div><p>where <code>&lt;keypair_name></code> is a unique name for your keypair. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws ec2 create-key-pair --key-name <span style=color:#4e9a06>&#34;alice-keypair&#34;</span> &gt; <span style=color:#4e9a06>&#34;alice-keypair.private&#34;</span>
</span></span></code></pre></div><p>The private key is saved to a file in your local directory. Query the system to view the public key:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws ec2 describe-key-pairs</span>
</span></span><span style=display:flex><span>KEYPAIRS	92:40:28:cb:08:54:80:95:8d:69:d9:ab:9a:ff:28:30:40:12:6a:66	alice-keypair
</span></span></code></pre></div><h2 id=authorize-security-groups>Authorize Security Groups</h2><p>Before you can log in to an instance, you must authorize access to that instance. This done by configuring a security group for that instance.</p><p>A security group is a set of networking rules applied to instances associated with that group. When you first create an instance, it is assigned to a default security group that denies incoming network traffic from all sources. To allow login and usage of a new instance, you must authorize network access to the default security group with the authorize-security-group-ingress command.</p><p>To authorize a security group, use authorize-security-group-ingress with the name of the security group, and the options of the network rule permissions you want to apply.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws ec2 authorize-security-group-ingress <span style=color:#ce5c00;font-weight:700>[</span>--group-id &lt;value&gt;<span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>[</span>--group-name &lt;value&gt;<span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>[</span>--ip-permissions &lt;value&gt;<span style=color:#ce5c00;font-weight:700>]</span>
</span></span></code></pre></div><p>Use the following command to grant unlimited network access using SSH (TCP, port 22) and VNC (TCP, ports 5900 to 5910) to the security group <code>default</code> :</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws ec2 authorize-security-group-ingress --ip-permissions &#34;IpProtocol=tcp,FromPort=22,ToPort=22,IpRanges={CidrIp=0.0.0.0/0}&#34; --group-name default </span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws ec2 authorize-security-group-ingress --ip-permissions &#34;IpProtocol=tcp,FromPort=5900,ToPort=5910,IpRanges={CidrIp=0.0.0.0/0}&#34; --group-name default </span>
</span></span></code></pre></div><h2 id=launch-an-instance>Launch an Instance</h2><p>Use the run-instances command and provide an image ID. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws ec2 run-instances --image-id emi-371ada125a928669e
</span></span></code></pre></div><p>For additional details and options that can be used with the run-instances command. Enter the following command to get the launch status of the instance:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws ec2 describe-instances --instance-ids &lt;instance_id&gt;
</span></span></code></pre></div><h2 id=log-in-to-an-instance>Log in to an Instance</h2><p>When you create an instance, Eucalyptus assigns the instance two IP addresses: a public IP address and a private IP address. The public IP address provides access to the instance from external network sources; the private IP address provides access to the instance from within the Eucalyptus cloud environment. For more information on Eucalyptus networking modes, see the <a href=https://www.eucastack.io/docs/admin_guide/>Eucalyptus Administratorâ€™s Guide</a>.</p><p>To use an instance you must log into it via ssh using one of the IP addresses assigned to it. You can obtain the instanceâ€™s IP addresses using the describe-instances query as shown in the following example.</p><p>To log into a VM instance:</p><p>Enter the following command to view the IP addresses of your instance:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws ec2 describe-instances</span>
</span></span><span style=display:flex><span>RESERVATIONS	000332850814	r-825a2c9c04e97ee62
</span></span><span style=display:flex><span>GROUPS	sg-84741faf0bd87ea73	default
</span></span><span style=display:flex><span>INSTANCES	0	x86_64	emi-371ada125a928669e	i-131e5853a71c87f16	t2.micro	2020-10-19T16:35:36.120Z	euca-172-31-15-2.eucalyptus.internal	172.31.15.2	euca-192-168-134-74.eucalyptus.mycloud.example.com	192.168.134.74	/dev/sda1	instance-store	True	NORMAL:  -- <span style=color:#ce5c00;font-weight:700>[]</span>	subnet-1343e38b5566c8e90	hvm	vpc-bded94e5dd0a07bc3
</span></span><span style=display:flex><span>MONITORING	disabled
</span></span><span style=display:flex><span>NETWORKINTERFACES	Primary network interface	d0:0d:c1:ba:7d:64	eni-c1ba7d641cb70a7ee	000332850814	euca-172-31-15-2.eucalyptus.internal	172.31.15.2	True	in-usesubnet-1343e38b5566c8e90	vpc-bded94e5dd0a07bc3
</span></span><span style=display:flex><span>ASSOCIATION	euca-192-168-134-74.eucalyptus.mycloud.example.com	192.168.134.74
</span></span><span style=display:flex><span>ATTACHMENT	2020-10-19T16:35:36.125Z	eni-attach-d597b44874e84bbb2	True	0	attached
</span></span><span style=display:flex><span>GROUPS	sg-84741faf0bd87ea73	default
</span></span><span style=display:flex><span>PRIVATEIPADDRESSES	True	euca-172-31-15-2.eucalyptus.internal	172.31.15.2
</span></span><span style=display:flex><span>ASSOCIATION	euca-192-168-134-74.eucalyptus.mycloud.example.com	192.168.134.74
</span></span><span style=display:flex><span>PLACEMENT	cloud-1a
</span></span><span style=display:flex><span>SECURITYGROUPS	sg-84741faf0bd87ea73	default
</span></span><span style=display:flex><span>STATE	16	running
</span></span></code></pre></div><p>Note that the public IP address is on the <em>INSTANCES</em> line after &ldquo;mycloud.example.com&rdquo;, the private address is after &ldquo;eucalyptus.internal&rdquo;.</p><p>Look for the instance ID on the <em>INSTANCE</em> line and write it down. Use this ID to manipulate and terminate this instance.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Be sure that the security group for the instance allows SSH access.</div><p>Use SSH to log into the instance, using your private key and the public IP address. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh -i alice-keypair.private root@192.168.134.74 
</span></span></code></pre></div><p>You are now logged in to your Linux instance.</p><h2 id=terminate-an-instance>Terminate an Instance</h2><p>The terminate-instances command lets you cancel running VM instances. When you terminate instances, you must specify the ID string of the instance(s) you wish to terminate. You can obtain the ID strings of your instances using the describe-instances or describe-instance-status commands.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>Terminating an instance can cause the instance and all items associated with the instance (data, packages installed, etc.) to be lost. Be sure to save any important work or data to Object Storage or EBS before terminating an instance.</div><p>To terminate VM instances:</p><p>Enter describe-instance-status to obtain the ID of the instances you wish to terminate. Note that an instance ID strings begin with the prefix <code>i-</code> followed by an 8-character string:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws ec2 describe-instance-status </span>
</span></span><span style=display:flex><span>INSTANCESTATUSES	cloud-1a	i-131e5853a71c87f16
</span></span><span style=display:flex><span>INSTANCESTATE	16	running
</span></span><span style=display:flex><span>INSTANCESTATUS	ok
</span></span><span style=display:flex><span>DETAILS	reachability	passed
</span></span><span style=display:flex><span>SYSTEMSTATUS	ok
</span></span><span style=display:flex><span>DETAILS	reachability	passed
</span></span></code></pre></div><p>Enter terminate-instances and the ID string(s) of the instance(s) you wish to terminate:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws ec2 terminate-instances --instance-ids i-131e5853a71c87f16</span>
</span></span><span style=display:flex><span>TERMINATINGINSTANCES	i-131e5853a71c87f16
</span></span><span style=display:flex><span>CURRENTSTATE	32	shutting-down
</span></span><span style=display:flex><span>PREVIOUSSTATE	16	running
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-d7a6d5f63064093cc68394c2fd2504bc>2.3 - Getting Started with Euca2ools</h1><p>This section helps you get started using your Eucalyptus cloud, and covers setting up your user credentials, installing and configuring the command line tools, and working with images and instances.As a cloud user, you can access the Eucalyptus cloud using a command line interface such as Euca2ools, or using a web-based interface such as the Eucalyptus Management Console.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>This section primarily deals with using the Eucalyptus command line. For complete documentation on using web-based the Eucalyptus Console, see <a href=https://www.eucastack.io/docs/user_guide/getting_started/getting_started_console/console_login/>Console Login</a>.</div><p>To access Eucalyptus via the command line tools, you need keys for Euca2ools. To access Eucalyptus with the Management Console, you&rsquo;ll need a password for the Management Console. Talk to your cloud administrator to get your keys and passwords.</p><h2 id=find-image>Find Image</h2><p>Enter the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># euca-describe-images -a</span>
</span></span><span style=display:flex><span>IMAGE	emi-0ba907069cb1845bc	ubuntu-focal/focal-server-cloudimg-amd64.raw.manifest.xml	000575948401	available	public	x86_64	machine				instance-storehvm	
</span></span><span style=display:flex><span>IMAGE	emi-371ada125a928669e	centos-7/CentOS-7-x86_64-GenericCloud-2003.raw.manifest.xml	000575948401	available	public	x86_64	machine				instance-storehvm	
</span></span></code></pre></div><p>Look for the image ID in the second column and write it down. The image ID starts with <code>emi-</code> . Once you find a suitable image to use, make sure you have a keypair to use.</p><h2 id=create-keypairs>Create KeyPairs</h2><p>Enter the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euca-create-keypair -f &lt;keypair_name&gt;.private &lt;keypair_name&gt;
</span></span></code></pre></div><p>where <code>&lt;keypair_name></code> is a unique name for your keypair. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euca-create-keypair -f <span style=color:#4e9a06>&#34;alice-keypair.private&#34;</span> <span style=color:#4e9a06>&#34;alice-keypair&#34;</span>
</span></span></code></pre></div><p>The private key is saved to a file in your local directory. Query the system to view the public key:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># euca-describe-keypairs</span>
</span></span><span style=display:flex><span>KEYPAIR	alice-keypair	92:40:28:cb:08:54:80:95:8d:69:d9:ab:9a:ff:28:30:40:12:6a:66
</span></span></code></pre></div><h2 id=authorize-security-groups>Authorize Security Groups</h2><p>Before you can log in to an instance, you must authorize access to that instance. This done by configuring a security group for that instance.</p><p>A security group is a set of networking rules applied to instances associated with that group. When you first create an instance, it is assigned to a default security group that denies incoming network traffic from all sources. To allow login and usage of a new instance, you must authorize network access to the default security group with the euca-authorize command.</p><p>To authorize a security group, use euca-authorize with the name of the security group, and the options of the network rules you want to apply.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euca-authorize &lt;security_group&gt;
</span></span></code></pre></div><p>Use the following command to grant unlimited network access using SSH (TCP, port 22) and VNC (TCP, ports 5900 to 5910) to the security group <code>default</code> :</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># euca-authorize -P tcp -p 22 -s 0.0.0.0/0 default</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># euca-authorize -P tcp -p 5900-5910 -s 0.0.0.0/0 default</span>
</span></span></code></pre></div><h2 id=launch-an-instance>Launch an Instance</h2><p>Use the euca-run-instances command and provide an image ID and the user data file, in the format <code>euca-run-instances &lt;image_id></code> . For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euca-run-instances emi-371ada125a928669e
</span></span></code></pre></div><p>For additional details and options that can be used with the <em>euca-run-instances</em> command. Enter the following command to get the launch status of the instance:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euca-describe-instances &lt;instance_id&gt;
</span></span></code></pre></div><h2 id=log-in-to-an-instance>Log in to an Instance</h2><p>When you create an instance, Eucalyptus assigns the instance two IP addresses: a public IP address and a private IP address. The public IP address provides access to the instance from external network sources; the private IP address provides access to the instance from within the Eucalyptus cloud environment. For more information on Eucalyptus networking modes, see the <a href=https://www.eucastack.io/docs/admin_guide/>Eucalyptus Administratorâ€™s Guide</a>.</p><p>To use an instance you must log into it via ssh using one of the IP addresses assigned to it. You can obtain the instanceâ€™s IP addresses using the euca-describe-instances query as shown in the following example.</p><p>To log into a VM instance:</p><p>Enter the following command to view the IP addresses of your instance:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># euca-describe-instances</span>
</span></span><span style=display:flex><span>RESERVATION	r-825a2c9c04e97ee62	000332850814	default
</span></span><span style=display:flex><span>INSTANCE	i-131e5853a71c87f16	emi-371ada125a928669e	euca-192-168-134-74.eucalyptus.mycloud.example.com	euca-172-31-15-2.eucalyptus.internal	running		0		t2.micro	2020-10-19T16:35:36.120Z	cloud-1a				monitoring-disabled	192.168.134.74	172.31.15.2	vpc-bded94e5dd0a07bc3	subnet-1343e38b5566c8e90	instance-store					hvm			sg-84741faf0bd87ea73				x86_64
</span></span><span style=display:flex><span>NETWORKINTERFACE	eni-c1ba7d641cb70a7ee	subnet-1343e38b5566c8e90	vpc-bded94e5dd0a07bc3	000332850814	in-use	172.31.15.2	euca-172-31-15-2.eucalyptus.internal	<span style=color:#204a87>true</span>
</span></span><span style=display:flex><span>ATTACHMENT		eni-attach-d597b44874e84bbb2	0	attached	2020-10-19T16:35:36.125Z	<span style=color:#204a87>true</span>
</span></span><span style=display:flex><span>ASSOCIATION	192.168.134.74		172.31.15.2
</span></span><span style=display:flex><span>GROUP	sg-84741faf0bd87ea73	default
</span></span><span style=display:flex><span>PRIVATEIPADDRESS	172.31.15.2	euca-172-31-15-2.eucalyptus.internal	primary
</span></span></code></pre></div><p>Note that the public IP address appears after the <em>monitoring-disabled</em> text, with the private address immediately following.</p><p>Look for the instance ID in the second field of the <em>INSTANCE</em> line and write it down. Use this ID to manipulate and terminate this instance.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Be sure that the security group for the instance allows SSH access.</div><p>Use SSH to log into the instance, using your private key and the public IP address. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh -i alice-keypair.private root@192.168.134.74 
</span></span></code></pre></div><p>You are now logged in to your Linux instance.</p><h2 id=terminate-an-instance>Terminate an Instance</h2><p>The <em>euca-terminate-instances</em> command lets you cancel running VM instances. When you terminate instances, you must specify the ID string of the instance(s) you wish to terminate. You can obtain the ID strings of your instances using the <em>euca-describe-instances</em> or <em>euca-describe-instance-status</em> commands.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>Terminating an instance can cause the instance and all items associated with the instance (data, packages installed, etc.) to be lost. Be sure to save any important work or data to Object Storage or EBS before terminating an instance.</div><p>To terminate VM instances:</p><p>Enter <em>euca-describe-instance-status</em> to obtain the ID of the instances you wish to terminate. Note that an instance ID strings begin with the prefix <code>i-</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># euca-describe-instance-status</span>
</span></span><span style=display:flex><span>INSTANCE	i-131e5853a71c87f16	cloud-1a	running	16	ok	ok	active	
</span></span><span style=display:flex><span>SYSTEMSTATUS	reachability	passed	
</span></span><span style=display:flex><span>INSTANCESTATUS	reachability	passed
</span></span></code></pre></div><p>Enter <em>euca-terminate-instances</em> and the ID string(s) of the instance(s) you wish to terminate:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># euca-terminate-instances i-131e5853a71c87f16</span>
</span></span><span style=display:flex><span>INSTANCE	i-131e5853a71c87f16	running	shutting-down
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-8cef1bc119dfdc0a049083c756c1e3b0>3 - Using Instances</h1><h1 id=using-instances>Using Instances</h1><p>Any application that runs on a cloud, whether public or private or hybrid, runs inside at least one . To start using the cloud, you must launch one or more instances. Every instance is created from stored . An image contains the basic operating system and often other software that will be needed when the instance is running. When you launch an instance, you tell the cloud what image to base the instance on. Your cloud administrator should have set up a catalog of standard or customized images for you to use.To find out more about what instances are, see <a href=https://www.eucastack.io/docs/user_guide/using_instances/understanding_instances/>Instance Overview</a> .</p><p>To find out how to use CloudWatch, see <a href=https://www.eucastack.io/docs/user_guide/using_instances/working_instance/>Instance Tasks</a> .</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c8c8904933395220f6e6f02f9f38f8ab>3.1 - Instance Overview</h1><h1 id=instance-overview>Instance Overview</h1><p>An instance is a virtual machine (VM). Eucalyptus allows you to run instances from registered images.</p><p>The following sections describe instances in more detail.</p></div><div class=td-content><h1 id=pg-707e8d9b576f5953437508761993f01c>3.1.1 - Instance Concepts</h1><p>This section describes conceptual information to help you understand instances.</p><h2 id=eucalyptus-machine-image-emi>Eucalyptus Machine Image (EMI)</h2><p>A Eucalyptus machine image (EMI) is a copy of a virtual machine bootable file system stored in the Walrus storage. An EMI is a template from you can use to deploy multiple identical instancesâ€”or copies of the virtual machine.</p><p>EMIs are analogous to Amazon Machine Images (AMIs) in AWS. In fact, you can download and deploy any of the 10,000+ AMIs as EMIs in a Eucalyptus cloud without significant modification. While it is possible to build your own EMI, it is might be just as simple to find a thoroughly vetted, freely available image in AWS, download it to your Eucalyptus cloud, and use that instead.</p><p>When registered in a Eucalyptus cloud, each distinct EMI is given a unique ID for identification. The ID is in the format emi-<nnnnnnnn>.</p><p><img src=https://www.eucastack.io/images/Eucalyptus-Machine-Images.png alt=image></p><h2 id=instance>Instance</h2><p>A instance is a virtual machine deployed from an EMI. An instance then, is simply a running copy of an EMI, which means it always starts from a known baseline. There are two types of instances; instance store-backed and EBS-backed. This section describes store-backed instances. For information about EBS-backed instances, see <a href=https://www.eucastack.io/docs/user_guide/using_block_storage/>Using EBS</a> .</p><p><img src=https://www.eucastack.io/images/Instances-illustration.png alt=image></p><p>Every instance receives a unique ID in the format i-<nnnnnnnn>.</p><p>You can deploy multiple instances using a single command. In this case all the instances will have unique instance IDs but will share a common reservation ID. This reservation ID can be seen, for example, from the euca2ools <code>euca-describe-instances</code> command that lists running instances. Reservations IDs appear in the format r-<nnnnnnnn>.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>A <em>reservation</em> is an EC2 term used to describe the resources reserved for one or more instances launched in the cloud.</div><h2 id=persistence>Persistence</h2><p>Applications running in ephemeral instances that generate data that must be saved should write that data to some place other than the instance itself. There are two Eucalyptus options available. First, the data can be written to a volume that is attached to the instance. Volumes provided by the Storage Controller and attached to instances are persistent. Second, the data could be written to the Walrus using HTTP put/get operations. Walrus storage is also persistent.</p><p><img src=https://www.eucastack.io/images/Persistence-in-Ephemeral-Instances.png alt=image></p><p>If the application cannot be rewritten to send data to a volume or the Walrus, then the application should be deployed inside an EBS-backed instance. EBS-backed instances are persistent and operate in a manner more similar to a physical machine.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c63429542400b7a279b8b1078a07fb43>3.1.2 - Instance Basics</h1><h1 id=instance-basics>Instance Basics</h1><p>This section describes information to help you decide which type of instance you need.</p></div><div class=td-content><h1 id=pg-b57674acf9fe6ea2a2a8008cfdff8ca2>3.1.2.1 - Virtual Machine Types</h1><p>A virtual machine type, known as a VM type, defines the number of CPUs, the size of memory, and the size of storage that is given to an instance when it boots. There are five pre-defined VM types in Eucalyptus. You can change the quantity of resources associated with each of the five VM types, but you cannot change the name of the VM types or the number of VM types available. If you customize the sizes they must be well-ordered. That means that the CPU, memory, and storage sizes of the next VM type must be equal to, or larger than, the size of the preceding VM type.Â </p><p>The VM type used to instantiate an EMI must have a defined disk size larger than the EMI file. If a 6GB EMI is loaded into an instance with a VM type defined with a 5GB disk, it will fail to boot. The status of the instance will show as <em>pending</em> .Â  The pending status is the result of the fact that the Walrus cannot finish downloading the image to the Node Controller because the Node Controller has not allotted sufficient disk space for the download. Starting with Eucalyptus 3.2, if the user attempts to launch an instance with a VM type that is too small, they will receive an on-screen warning and the operation will terminate.</p><h2 id=available-vm-types>Available VM Types</h2><p>Eucalyptus, like AWS, offers families of VM types. These families are composed of varying combinations of CPU, disk size, and memory. Eucalyptus offers enough VM types to give you the flexibility to choose the appropriate mix of resources for your applications. For the best experience, we recommend that you launch instance types that are appropriate for your applications.</p><ul><li><p>This family includes the M1 and M3 VM types. These types provide a balance of CPU, memory, and network resources, which makes them a good choice for many applications. The VM types in this family range in size from one virtual CPU with two GB of RAM to eight virtual CPUs with 30 GB of RAM. The balance of resources makes them ideal for running small and mid-size databases, more memory-hungry data processing tasks, caching fleets, and backend servers. M1 types offer smaller instance sizes with moderate CPU performance. M3 types offer larger number of virtual CPUs that provide higher performance. We recommend you use M3 instances if you need general-purpose instances with demanding CPU requirements.</p></li><li><p>This family includes the C1 and CC2 instance types, and is geared towards applications that benefit from high compute power. Compute-optimized VM types have a higher ratio of virtual CPUs to memory than other families but share the NCs with non optimized ones. We recommend this type if you are running any CPU-bound scale-out applications. CC2 instances provide high core count (32 virtual CPUs) and support for cluster networking. C1 instances are available in smaller sizes and are ideal for scaled-out applications at massive scale.</p></li><li><p>This family includes the CR1 and M2 VM types and is designed for memory-intensive applications. We recommend these VM types for performance-sensitive database, where your application is memory-bound. CR1 VM types provide more memory and faster CPU than do M2 types. CR1 instances also support cluster networking for bandwidth intensive applications. M2 types are available in smaller sizes, and are an excellent option for many memory-bound applications.</p></li><li><p>This Micro family contains the T1 VM type. The t1.micro provides a small amount of consistent CPU resources and allows you to increase CPU capacity in short bursts when additional cycles are available. We recommend this type for lower throughput applications like a proxy server or administrative applications, or for low-traffic websites that occasionally require additional compute cycles. We do not recommend this VM type for applications that require sustained CPU performance.
The following tables list each VM type Eucalyptus offers. Each type is listed in its associate VM family.</p></li></ul><table><thead><tr><th style=text-align:left>Instance Type</th><th style=text-align:left>Virtual CPU</th><th style=text-align:left>Disk Size</th><th style=text-align:left>Memory</th></tr></thead><tbody><tr><td style=text-align:left>m1.small</td><td style=text-align:left>1</td><td style=text-align:left>5</td><td style=text-align:left>256</td></tr><tr><td style=text-align:left>m1.medium</td><td style=text-align:left>1</td><td style=text-align:left>10</td><td style=text-align:left>512</td></tr><tr><td style=text-align:left>m1.large</td><td style=text-align:left>2</td><td style=text-align:left>10</td><td style=text-align:left>512</td></tr><tr><td style=text-align:left>m1.xlarge</td><td style=text-align:left>2</td><td style=text-align:left>10</td><td style=text-align:left>1024</td></tr><tr><td style=text-align:left>m3.xlarge</td><td style=text-align:left>4</td><td style=text-align:left>15</td><td style=text-align:left>2048</td></tr><tr><td style=text-align:left>m3.2xlarge</td><td style=text-align:left>4</td><td style=text-align:left>30</td><td style=text-align:left>4096</td></tr></tbody></table><table><thead><tr><th style=text-align:left>Instance Type</th><th style=text-align:left>Virtual Cores</th><th style=text-align:left>Disk Size</th><th style=text-align:left>Memory</th></tr></thead><tbody><tr><td style=text-align:left>c1.medium</td><td style=text-align:left>2</td><td style=text-align:left>10</td><td style=text-align:left>512</td></tr><tr><td style=text-align:left>c1.xlarge</td><td style=text-align:left>2</td><td style=text-align:left>10</td><td style=text-align:left>2048</td></tr><tr><td style=text-align:left>cc1.4xlarge</td><td style=text-align:left>8</td><td style=text-align:left>60</td><td style=text-align:left>3072</td></tr><tr><td style=text-align:left>cc2.8xlarge</td><td style=text-align:left>16</td><td style=text-align:left>120</td><td style=text-align:left>6144</td></tr></tbody></table><table><thead><tr><th style=text-align:left>Instance Type</th><th style=text-align:left>Virtual Cores</th><th style=text-align:left>Disk Size</th><th style=text-align:left>Memory</th></tr></thead><tbody><tr><td style=text-align:left>m2.xlarge</td><td style=text-align:left>2</td><td style=text-align:left>10</td><td style=text-align:left>2048</td></tr><tr><td style=text-align:left>m2.2xlarge</td><td style=text-align:left>2</td><td style=text-align:left>30</td><td style=text-align:left>4096</td></tr><tr><td style=text-align:left>m2.4xlarge</td><td style=text-align:left>8</td><td style=text-align:left>60</td><td style=text-align:left>4096</td></tr><tr><td style=text-align:left>cr1.8xlarge</td><td style=text-align:left>16</td><td style=text-align:left>240</td><td style=text-align:left>16384</td></tr></tbody></table><table><thead><tr><th style=text-align:left>Instance Type</th><th style=text-align:left>Virtual Cores</th><th style=text-align:left>Disk Size</th><th style=text-align:left>Memory</th></tr></thead><tbody><tr><td style=text-align:left>t1.micro</td><td style=text-align:left>1</td><td style=text-align:left>5</td><td style=text-align:left>256</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-4e63c349678457b1b72c9935c40ac634>3.1.2.2 - Ephemeral Linux Instances</h1><p>Instance store-backed instances are ephemeral instances. This means that any changes made to a running instance are lost if the instance is either purposely or accidentally terminated. Applications running in ephemeral instances should write their data to persistent storage for safe keeping. Persistent storage available to instances includes Storage Controller volumes and the Walrus.</p><p>As an instance store-backed instance is launched, several files are brought together using loop devices on the Node Controller. As these files are brought together they form what looks like a disk to the instance&rsquo;s operating system. The illustration below lists a some of the files that make up a running instance. Notice that the EKI, EMI, and ERI images are presented to the instance&rsquo;s operating system as the partition <em>/dev/sda1</em> and are mounted as the <em>/</em> file system.</p><p><img src=https://www.eucastack.io/images/EC2-Backed-Ephemeral-Instances.png alt=image></p><p>Assume that the illustration above shows some of the files that make up an instance that was launched in a vmtype with 2GB of storage. Notice that the <em>eki-</em>* , <em>emi-</em>* , and <em>eri-</em>* files have been downloaded from the Walrus and cached on the Node Controller. These three files consume around 1.06GB of storage space. Notice also that a swap file was automatically created for the instance. The swap file has the string <em>swap</em> in its name and the file is approximately 500MB in size. It is presented to the instance&rsquo;s operating system as the partition <em>/dev/sda3</em> .</p><p>This means the EKI, ERI, EMI, and swap files have consumed approximately 1.5GB of the available 2GB of storage space. The remaining 500GB is allocated to the file with the string <em>ext3</em> in its name. In our example, this space is formatted as an ext3 file system and is made available to the instance as the disk partition <em>/dev/sda2</em> , and is actually mounted to the <em>/mnt</em> directory in the instance. An example of this configuration is shown below.</p><p><img src=https://www.eucastack.io/images/Ephemeral-Disk-Illustration.png alt=image></p></div><div class=td-content style=page-break-before:always><h1 id=pg-d62df5951494ee46a1ad7a21c0b7416d>3.1.2.3 - EBS-Backed Instances</h1><h1 id=ebs-backed-instances>EBS-Backed Instances</h1><p>Eucalyptus supports two different types of instances; instance store-backed instances and EBS-backed instances. This section describes EBS-backed instances.</p><p>With EBS-backed instances you are booting an instance from a volume rather than a bundled EMI image. The boot volume is created from a snapshot of a root device volume. The boot volume is persistent so changes to the instance are persistent.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Linux boot-from-EBS instances do not require EKI and ERI images like paravirtual instance store-backed instances.</div><p><img src=https://www.eucastack.io/images/EBS-Backed-Instances.png alt=image></p></div><div class=td-content style=page-break-before:always><h1 id=pg-502b551b05ef67f98038caf6f8a4eb57>3.1.2.3.1 - Comparing Instance Types</h1><p>The graphic below illustrates the differences between an instance store-backed instance and an EBS-backed instance.Â Â  Both types of instances still boot from an EMI; the difference is what is behind the EMI.Â Â  For an instance store-backed instance the EMI is backed by a bundled image.Â  For an EBS-backed instance the EMI is backed by a snapshot of a volume that contains bootable software, similar to a physical host&rsquo;s boot disk.</p><p><img src=https://www.eucastack.io/images/Comparing-Types.png alt=image></p><p>Note that for the instance store-backed instance, the EMI, EKI, and ERI (assuming Linux) are copied from the Walrus directly to Node Controller.Â  Both disk and memory on the Node Controller are used as cache so an instance store-backed instance can be considered a cache-based instance and is not persistent.Â  Once the instance is terminated both the RAM and the disk cache are cleared and any modifications to the instance are lost.</p><p>When an EBS-backed instance is launched, the snapshot on which the EMI is based is automatically copied to a new volume which is then attached to the instance. The instance then boots from the attached volume. Changes to the EBS-backed instance are persistent because the volume used to boot the EBS-backed instance is persistent.Â  As a result, EBS-backed instances can be suspended and resumed and not just terminated like an instance store-backed instance.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c7b3795a5460a910fe5dac797f20ad4e>3.1.2.3.2 - Using EBS-Backed Instances</h1><p>An EBS-backed instance is very much like a physical machine in the way it boots and persists data.Â  Because an EBS-backed instance functions in a manner similar to physical machine, it makes it a good choice to run legacy applications that cannot be re-architected for the cloud.Â </p><p><img src=https://www.eucastack.io/images/Using-EBS-Instances.png alt=image></p><p>An EBS-backed boot volume can still be protected by taking a snapshot of it.Â  In fact, other non-boot volumes can be attached to the EBS-backed instance and they can be protected using snapshots too.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c2fe73bb7c748d43cef3c10c00583725>3.1.2.3.3 - Suspending and Resuming EBS-Backed Instances</h1><p>An EBS-backed instance can be suspended and resumed, similar to the operating system and applications on a laptop.Â Â  The current state of the EBS-backed instance is saved in a suspend operation and restored in a resume operation.Â  Like instance store-backed instances, an EBS-backed instance can also be rebooted and terminated.</p><p>To suspend a running EBS-backed instance:</p><pre><code>euca-stop-instances i-&lt;nnnnnnnn&gt;
</code></pre><p>To resume a suspended EBS-backed instance:</p><pre><code>euca-start-instances i-&lt;nnnnnnnn&gt;
</code></pre><p>To reboot an EBS-backed instance:</p><pre><code>euca-reboot-instances i-&lt;nnnnnnnn&gt;
</code></pre><p>To terminate an EBS-backed instance:</p><pre><code>euca-terminate-instances i-&lt;nnnnnnnn&gt;
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-41690748817a78956fae5de69ab20ec6>3.1.2.3.4 - EBS EMI Creation Overview</h1><h1 id=ebs-emi-creation-overview>EBS EMI Creation Overview</h1><p>You can create an EBS EMI from an existing <em>.img</em> file or create your own <em>.img</em> file.Â  One way to create your own EBS <em>.img</em> file is to use <code>virt-install</code> as described below.</p><p>Use <code>virt-install</code> on a system with the same operating system version and hypervisor as your Node Controller. When using <code>virt-install</code> , select <em>scsi</em> as the disk type for KVM if the VIRTIO paravirtualized devices are not enabled. If you have KVM with VIRTIO enabled (the default), select <em>virtio</em> as the disk type of the virtual machine. If you create, successfully boot, and connect the virtual machine to the network in this environment, it should boot as an EBS-backed instance in the Eucalyptus cloud.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>For CentOS or RHEL images, you will typically need to edit the file and remove the line. This is because an instance&rsquo;s network interface will always be assigned a different hardware address at instantiation.</div><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>: If you use an image created by under a different distribution or hypervisor combination, it is likely that it will not install the correct drivers into the ramdisk and the image will not boot on your Node Controller.</div><p>To create an EMI for EBS-backed instances will require initial assistance from a <em>helper</em> instance.Â  The helper instance can be either an instance store-backed or EBS-backed instance and can be deleted when finished.Â  It only exists to help create the initial volume that will be the source of the snapshot behind the EMI used to boot other EBS-backed instances.</p><p>First you will need to create a volume large enough to contain the boot image file that was created by <code>virt-install</code> .Â Â Once this volume has been created attach it to the helper instance. Then transfer the boot image file to the helper instance.Â  The helper instance must have enough free disk space to temporarily hold the boot image file. Once there, transfer the boot image file, using the <code>dd</code> command, to the attached volume.</p><p>At this point the volume can be detached from the helper instance, a snapshot taken, and the snapshot registered as a new EMI.</p><p>The process to create a new EMI is summarized as follows:</p><ol><li>Create the file using (the file is the virtual machine&rsquo;s disk file).</li><li>Create the helper instance.</li><li>Create and attach the volume to the helper instance.</li><li>Copy the file to the helper instance and from there to the attached volume.</li><li>Detach the volume and take a snapshot of it.</li><li>Register the snapshot as a new EMI.</li></ol><p>This process is illustrated below.</p><p><img src=https://www.eucastack.io/images/Creating-an-EBS-EMI.png alt=image></p></div><div class=td-content style=page-break-before:always><h1 id=pg-4c08ac2498e9684f659efd667898b1fc>3.1.2.3.4.1 - Create an EBS EMI</h1><p>To create a new EMI that is used to boot EBS-backed instances:</p><ol><li><p>Create a new volume whose size matches the size of the bootable file:</p></li><li><p>Attach the volume to a helper instance:</p></li><li><p>Log in to the instance and copy the bootable image from its source to the helper instance.</p></li><li><p>While logged in to the helper instance, copy a bootable image to the attached volume:</p></li><li><p>While logged in to the helper instance, flush the file system buffers after running the command:</p></li><li><p>Detach the volume from the instance:</p></li><li><p>Create a snapshot of the bootable volume:</p></li><li><p>Register the bootable volume as a new EMI:</p></li><li><p>Run a new EBS-backed instance:</p></li></ol><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>The snapshot cannot be deleted unless the EMI is first deregistered.</div></div><div class=td-content style=page-break-before:always><h1 id=pg-83652bc4be9268467c42ab3484f0e40a>3.2 - Instance Tasks</h1><h1 id=instance-tasks>Instance Tasks</h1><p>This section describes the tasks you can perform with instances in Eucalyptus.</p></div><div class=td-content><h1 id=pg-4431c3c3b61c62f799aec4295b107972>3.2.1 - Authorize Security Groups</h1><p>Before you can log in to an instance, you must authorize access to that instance. This done by configuring a security group for that instance.</p><p>A security group is a set of networking rules applied to instances associated with a group. When you first create an instance, it is assigned to a default security group that denies incoming network traffic from all sources. To allow login and usage of a new instance, you must authorize network access to the default security group with the euca-authorize command.</p><p>To authorize a security group, use euca-authorize with the name of the security group, and the options of the network rules you want to apply.</p><pre><code>euca-authorize &lt;security_group&gt;
</code></pre><p>Use the following command to grant unlimited network access using SSH (TCP, port 22) and VNC (TCP, ports 5900 to 5910) to the security group <code>default</code> :</p><pre><code>euca-authorize -P tcp -p 22 -s 0.0.0.0/0 default
euca-authorize -P tcp -p 5900-5910 -s 0.0.0.0/0 default
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-546931904329351c201dba64cb89bb39>3.2.2 - Create Key Pairs</h1><p>Eucalyptus uses cryptographic key pairs to verify access to instances. Key pairs are used if you want to connect to your instance using SSH. Creating a key pair generates two keys: a public key (saved within Eucalyptus) and a corresponding private key (output to the user as a character string). To enable this private key you must save it to a file and set appropriate access permissions (using the chmod command), as shown in the example below.</p><h2 id=create-key-pairs-with-the-console>Create Key Pairs with the Console</h2><p>From the main dashboard screen, click the Key Pairs icon. The Key Pairs page opens. Click the Create Key Pair button. The Create new key pair window opens. Type a name for the new key pair into the Name text box. The name may contain up to 255 alphanumeric and special characters. Click the Create and Download button. The private half of the key pair (.pem file) is saved to the default download location for your browser.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Keep your private key file in a safe place. If you lose it, you will be unable to access instances created with the key pair.</div>Change file permissions to enable access to the private key file in the local directory. For example, on a Linux or Mac OS X system:</p><pre><code>chmod 0600 &lt;keypair_name&gt;.private
</code></pre><h2 id=create-key-pairs-with-the-command-line>Create Key Pairs with the Command Line</h2><p>Enter the following command:</p><pre><code>euca-create-keypair &lt;keypair_name&gt; -f &lt;keypair_name&gt;.private
</code></pre><p>where <code>&lt;keypair_name></code> is a unique name for your keypair. For example:</p><pre><code>euca-create-keypair alice-keypair -f alice-keypair.private 
</code></pre><p>The private key is saved to a file in your local directory. Query the system to view the public key:</p><pre><code>euca-describe-keypairs
</code></pre><p>The command returns output similar to the following:</p><pre><code>KEYPAIR alice-keypair ad:0d:fc:6a:00:a7:e7:b2:bc:67:8e:31:12:22:c1:8a:77:8c:f9:c4
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-905ee14893a84b2745ff29c0ef61b535>3.2.3 - Find an Image</h1><p>To find an image:</p><p>Enter the following command:</p><pre><code>euca-describe-images
</code></pre><p>The output displays all available images.</p><pre><code>IMAGE	emi-EC1410C1	centos-32/centos.5-3.x86.img.manifest.xml â†µ
admin	available	public 	x86_64	machine
IMAGE	eki-822C1344	kernel-i386/vmlinuz-2.6.28-11-server.manifest.xml â†µ
admin	available	public 	x86_64	kernel
IMAGE	eri-A98C13E4  initrd-64/initrd.img-2.6.28-11-generic.manifest.xml â†µ
admin	available	public 	x86_64	ramdisk
</code></pre><p>Look for the image ID in the second column and write it down. The image ID starts with <code>emi-</code> . Once you find a suitable image to use, make sure you have a keypair to use.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-525f763e09b9be41d25f1be85b460a5b>3.2.4 - Launch an Instance</h1><p>To launch an instance:</p><p>Use the euca-run-instances command and provide an image ID and the user data file, in the format <code>euca-run-instances &lt;image_id></code> . For example:</p><pre><code>euca-run-instances emi-EC1410C1 
</code></pre><p>For additional details and options that can be used with the <em>euca-run-instances</em> command. Enter the following command to get the launch status of the instance:</p><pre><code>euca-describe-instances &lt;instance_id&gt;
</code></pre><p>Need response from Eucalyptus then uncomment the para below.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-e176b4c3908ff2cbf5db5f64c1ebee7e>3.2.5 - Log in to an Instance</h1><h2 id=for-a-linux-instance>For a Linux Instance</h2><p>When you create an instance, Eucalyptus assigns the instance two IP addresses: a public IP address and a private IP address. The public IP address provides access to the instance from external network sources; the private IP address provides access to the instance from within the Eucalyptus cloud environment. Note that the two IP addresses may be the same depending on the current networking mode set by the administrator. For more information on Eucalyptus networking modes, see the Eucalyptus Administratorâ€™s Guide.</p><p>To use an instance you must log into it via ssh using one of the IP addresses assigned to it. You can obtain the instanceâ€™s IP addresses using the euca-describe-instances query as shown in the following example.</p><p>To log into a VM instance:</p><p>Enter the following command to view the IP addresses of your instance:</p><pre><code>euca-describe-instances
</code></pre><p>Eucalyptus returns output similar to the following:</p><pre><code>RESERVATION	r-338206B5	alice	default
INSTANCE	i-4DCF092C  emi-EC1410C1  192.168.7.24	  10.17.0.130 â†µ running 	alice-keypair 	0 	m1.small  2010-03-15T21:57:45.134Z
</code></pre><p>Note that the public IP address appears after the image name, with the private address immediately following.</p><p>Look for the instance ID in the second field and write it down. Use this ID to manipulate and terminate this instance.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Be sure that the security group for the instance allows SSH access. For more information, see</div>Use SSH to log into the instance, using your private key and the external IP address. For example:</p><pre><code>ssh -i alice-keypair.private root@192.168.7.24 
</code></pre><p>You are now logged in to your Linux instance.</p><h2 id=using-ssh-to-connect-via-putty>Using SSH to Connect via PuTTY</h2><p>If you are a Windows user and want to securely connect to instances via PuTTY, you must first have a key pair.If you don&rsquo;t have a key pair, you can create one through the Management Console or the command line. For the key pair to be used with PuTTY, convert your .pem file to a .ppk file by performing the last step in the <a href=http://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-plan-access-ssh.html>Creating SSH Credentials for the Master Node: Modify Your PEM File</a> procedure.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-2f379d6e014e7c1d96aff4819e677b7c>3.2.6 - Reboot an Instance</h1><p>Rebooting preserves the root filesystem of an instance across restarts. To reboot an instance:</p><p>Enter the following command:</p><pre><code>euca-reboot-instances &lt;instance_id&gt;
</code></pre><p>To reboot the instance <code>i-34523332</code> , enter:</p><pre><code>euca-reboot-instances i-34523332
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-469bfcc1237864a18c2680a9642d16ba>3.2.7 - Terminate an Instance</h1><p>The <code>euca-terminate-instances</code> command lets you cancel running VM instances. When you terminate instances, you must specify the ID string of the instance(s) you wish to terminate. You can obtain the ID strings of your instances using the euca-describe-instances command.</p><p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>Terminating an instance can cause the instance and all items associated with the instance (data, packages installed, etc.) to be lost. Be sure to save any important work or data to Walrus or EBS before terminating an instance.</div>To terminate VM instances:</p><p>Enter <code>euca-describe</code> instances to obtain the ID of the instances you wish to terminate. Note that an instance ID strings begin with the prefix <code>i-</code> followed by an 8-character string:</p><pre><code>euca-describe-instances
RESERVATION	r-338206B5	alice	default
INSTANCE	i-4DCF092C  emi-EC1410C1	192.168.7.24	10.17.0.130 â†µ
running 	mykey 	0 	m1.small 	2010-03-15T21:57:45.134Z â†µ
wind 	eki-822C1344 	eri-BFA91429
</code></pre><p>Enter <code>euca-terminate-instances</code> and the ID string(s) of the instance(s) you wish to terminate:</p><pre><code>euca-terminate-instances i-4DCF092C
 INSTANCE	i-3ED007C8
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-0be18b368f65d8d2c92834ec5538e410>4 - Using EBS</h1><h1 id=using-ebs>Using EBS</h1><p>This section details what you need to know about Eucalyptus Elastic Block Storage (EBS).</p></div><div class=td-content><h1 id=pg-31c75827e10c1e182a3219af935fc5ec>4.1 - EBS Overview</h1><p>Eucalyptus Elastic Block Storage (EBS) provides block-level storage volumes that you can attach to instances running in your Eucalyptus cloud. An EBS volume looks like any other block-level storage device when attached to a running Eucalyptus instance, and may be formatted with an appropriate file system and used as you would a regular storage device. Any changes that you make to an attached EBS volume will persist after the instance is terminated.</p><p>You can create an EBS volume by using the Eucalyptus command line tools or by using the Eucalyptus management console and specifying the desired size (up to 10GB) and availability zone. Once you&rsquo;ve created an EBS volume, you can attach it to any instance running in the same availability zone. An EBS volume can only be attached to one running instance at a time, but you can attach multiple EBS volumes to a running instance.</p><p>You can create a backup â€” called a <em>snapshot</em> â€” of any Eucalyptus EBS volume. You can create a snapshot by using the command-line tools or the Eucalyptus management console and simply specifying the volume from which you want to create the snapshot, along with a description of the snapshot. Snapshots can be used to create new volumes.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-b7ccf5028c0d51a8483e0e9dbab864c4>4.2 - EBS Tasks</h1><h1 id=ebs-tasks>EBS Tasks</h1><p>This section contains examples of the most common Eucalyptus EBS tasks.</p></div><div class=td-content><h1 id=pg-b35aea79c89f1e994e72383068d64b2f>4.2.1 - Create and Attach an EBS Volume</h1><p>The following example shows how to create a 10 gigabyte EBS volume and attach it to a running instance called <code>i-00000000</code> running in availability zone <code>zone1</code> .</p><p>Create a new EBS volume in the same availability zone as the running instance.</p><pre><code>euca-create-volume --availability-zone zone1 --size 10
</code></pre><p>The command displays the ID of the newly-created volume. Attach the newly-created volume to the instance, specifying the local device name <code>/dev/sdf</code> .</p><pre><code>euca-attach-volume vol-00000000 -i i-00000000 -d /dev/sdf
</code></pre><p>You&rsquo;ve created a new EBS volume and attached it to a running instance. You can now access the EBS volume from your running instance.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-4d27f361294d4088d42f0e2f28e4fc06>4.2.2 - List Available EBS Volumes</h1><p>You can use the Eucalyptus command line tools to list all available volumes and retrieve information about a specific volume.</p><p>To get a list of all available volumes in your Eucalyptus cloud, enter the following command:</p><pre><code>euca-describe-volumes
</code></pre><p>To get information about one specific volume, use the <code>euca-describe-volumes</code> command and specify the volume ID.</p><pre><code>euca-describe-volumes vol-00000000
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-342628b6c418ae44913f5db90085207b>4.2.3 - Detach an EBS Volume</h1><p>To detach a block volume from an instance:</p><p>Enter the following command:</p><pre><code>euca-detach-volume &lt;volume_id&gt;



euca-detach-volume vol-00000000
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-5a971a6386dcddcbeafeaec0a93954d1>4.2.4 - Create a Snapshot</h1><p>The following example shows how to create a snapshot.</p><p>Enter the following command:</p><pre><code>euca-create-snapshot &lt;volume_id&gt;



euca-create-snapshot vol-00000000
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-71839a6768e53254fa7a77f3762aa369>4.2.5 - List Available Snapshots</h1><p>You can use the Eucalyptus command line tools to list available snapshots and retrieve information about a specific snapshot.</p><p>To get a list of all available snapshots in your Eucalyptus cloud, enter the following command:</p><pre><code>euca-describe-snapshots
</code></pre><p>To get information about one specific snapshot, use the <code>euca-describe-snapshots</code> command and specify the snapshot ID.</p><pre><code>euca-describe-snapshots snap-00000000
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-67417bb3e6e5b99bc61bd05c2c357333>4.2.6 - Delete a Snapshot</h1><p>The following example shows how to delete a snapshot.</p><p>Enter the following command:</p><pre><code>euca-delete-snapshot &lt;snapshot_id&gt;



euca-delete-snapshot mytestsnaphot
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-bc2ec5acd11c798f24b0d13d9b265b43>5 - Using Tags and Filters</h1><h1 id=using-tags-and-filters>Using Tags and Filters</h1><p>This section describes features and tasks that enable you to manage your cloud resources, such as EMIs, instances, EBS volumes, and snapshots.</p></div><div class=td-content><h1 id=pg-6336ee0d735b8b532ea96ff02720c720>5.1 - Tagging and Filtering Overview</h1><h1 id=tagging-and-filtering-overview>Tagging and Filtering Overview</h1><p>This section describes what tagging is, its restrictions, and how tagging relates to filtering.</p></div><div class=td-content><h1 id=pg-60a80d0c9ddbf683a4e4190e48ed483e>5.1.1 - Tagging Resources</h1><p>To help you manage your cloud&rsquo;s instances, images, and other Eucalyptus resources, you can assign your own metadata to each resource in the form of tags. You can use tags to create user-friendly names, make resource searching easier, and improve coordination between multiple users. This section describes tags and how to create them.</p><h2 id=tagging-overview>Tagging Overview</h2><p>A tag consists of a key and an optional value for that key. You define both the key and the value for each tag. For example, you can define a tag for your instances that helps you track each instance&rsquo;s owner and stack level.</p><p>Tags let you categorize your cloud resources in various ways. For example, you can tag resources based on their purpose, their owner, or their environment. We recommend that you devise a set of tag keys that meets your needs for each resource type. Using a consistent set of tag keys makes it easier for you to manage your resources. You can search and filter the resources based on the tags you add. For more information about filtering, see <a href=https://www.eucastack.io/docs/user_guide/resource_and_tags/understanding_tagging/resource_filtering/>Filtering Resources</a> .</p><p>Eucalyptus doesn&rsquo;t apply any semantic meaning to your tags. Instead, Eucalyptus interprets your tags simply as strings of characters. Eucalyptus doesn&rsquo;t automatically assign any tags on resources.</p><p>You can only assign tags to resources that already exist. However, if you use the Management Console, you can add tags when you launch an instance. If you add a tag that has the same key as an existing tag on that resource, the new value overwrites the old value. You can edit tag keys and values, and you can remove tags from a resource at any time. You can set a tag&rsquo;s value to the empty string, but you can&rsquo;t set a tag&rsquo;s value to null.</p><h2 id=tagging-restrictions>Tagging Restrictions</h2><p>The following restrictions apply to tags:</p><table><thead><tr><th style=text-align:left>Restriction</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Maximum number of tags per resource</td><td style=text-align:left>10</td></tr><tr><td style=text-align:left>Maximum key length</td><td style=text-align:left>128 Unicode characters</td></tr><tr><td style=text-align:left>Maximum value length</td><td style=text-align:left>256 Unicode characters</td></tr><tr><td style=text-align:left>Unavailable prefixes</td><td style=text-align:left>You can&rsquo;t use either euca: or aws: as a prefix to either a tag name or value. These are reserved by Eucalyptus.</td></tr><tr><td style=text-align:left>Case sensitivity</td><td style=text-align:left>Tag keys and values are case sensitive.</td></tr></tbody></table><p>You can&rsquo;t terminate, stop, or delete a resource based solely on its tags. You must specify the resource identifier. For example, to delete snapshots that you tagged with a tag key called <code>temporary</code> , you must first get a list of those snapshots using euca-describe-snapshots with a filter that specifies the tag. Then you use euca-delete-snapshots with the IDs of the snapshots (for example, snap-1A2B3C4D). You can&rsquo;t call euca-delete-snapshots with a filter that specified the tag. For more information about using filters when listing your resources, see <a href=https://www.eucastack.io/docs/user_guide/resource_and_tags/understanding_tagging/resource_filtering/>Filtering Resources</a> .</p><h2 id=available-resources>Available Resources</h2><p>You can tag the following cloud resources:</p><ul><li><p>Images (EMIs, kernels, RAM disks)</p></li><li><p>Instances</p></li><li><p>Volumes</p></li><li><p>Snapshots</p></li><li><p>Security Groups
You can&rsquo;t tag the following cloud resources:</p></li><li><p>Elastic IP addresses</p></li><li><p>Key pairs</p></li><li><p>Placement groups
You can tag public or shared resources, but the tags you assign are available only to your account and not to the other accounts sharing the resource.</p></li></ul><h2 id=heading></h2></div><div class=td-content style=page-break-before:always><h1 id=pg-aa8f5aec560ade894a46a3970dfbf14e>5.1.2 - Filtering Resources</h1><p>You can search and filter resources based on the tags you use. For example, you can list a Eucalyptus Machine Image (EMI) using euca-describe-images, and you can list instances using euca-describe-instances .</p><h2 id=filtering-overview>Filtering Overview</h2><p>Results from describe commands can be long. Use a filter to include only the resources that match certain criteria. For example, you can filter so that a returned list shows only the EMIs that use an EBS volume as the root device volumes.</p><p>Filtering also allows you to:</p><ul><li>Specify multiple filter values: For example, you can list all the instances whose type is either m1.small or m1.large.</li><li>Specify multiple filters: for example, you can list all the instances whose type is either m1.small or m1.large, and that have an attached EBS volume that is set to delete when the instance terminates.</li><li>Use wildcards with values: For example, you can use <em>production</em> as a filter value to get all EBS snapshots that include production in the description.</li></ul><p>In each case, the instance must match all your filters to be included in the results. Filter values are case sensitive.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-6bd1385dba448291dd98302145461127>5.2 - Tagging and Filtering Tasks</h1><h1 id=tagging-and-filtering-tasks>Tagging and Filtering Tasks</h1><p>This section details the tasks that you can with tagging and filtering. You can use the Management Console or the command line interface.</p><p>Eucalyptus supports three commands for tagging:</p><ul><li>euca-create-tags</li><li>euca-describe-tags</li><li>euca-delete-tags</li></ul><p>Eucalyptus supports the following commands for filtering:</p><ul><li>euca-describe-addresses</li><li>euca-describe-availability-zones</li><li>euca-describe-bundle-tasks</li><li>euca-describe-groups</li><li>euca-describe-images</li><li>euca-describe-instances</li><li>euca-describe-keypairs</li><li>euca-describe-regions</li><li>euca-describe-snapshots</li><li>euca-describe-tags</li><li>euca-describe-volumes</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-dd571d37f5c80cdcde9d3a6732730c01>5.2.1 - Add a Tag</h1><p>Use the euca-create-tags command to add a tag to a resource.</p><p>Enter the following command and parameters:</p><pre><code>euca-create-tags [resource_id] --tag [tag_key]=[tag_value]
</code></pre><p>Eucalyptus returns a the resource identifier and its tag key and value. The following example shows how to add a tag to an EMI. This tag key is <code>dataserver</code> and has no value.</p><pre><code>euca-create-tags emi-1A2B3C4D --tag dataserver 
TAG  emi-1a2b3c4d  image  dataserver
</code></pre><p>The following example shows how to add the same two tags to both an EMI and an instance. One tag key is dataserver, which has no value, an empty string. The other tag key is stack, which has a value of <code>Production</code> .</p><pre><code>euca-create-tags emi-1A2B3C4D i-6F5D4E3A --tag dataserver --tag stack=Production
TAG  emi-1A2B3C4D  image  dataserver
TAG  emi-1A2B3C4D  image  stack  Production
TAG  i-6F5D4E3A  image  dataserver
TAG  i-6F5D4E3A  image  stack  Production
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-042b4d977236060f7f46fbed197c0590>5.2.2 - List Tags</h1><p>Use the euca-describe-tags command to list your tags and filter the results different ways.</p><p>Enter the following command and parameters:</p><pre><code>euca-describe-tags --filter resource-type=[resource_type]&quot; --filter
&quot;key=[key_name]&quot; --filter &quot;value=[key_value]&quot;
</code></pre><p>The following example describes all the tags belonging to your account.</p><pre><code>euca-describe-tags
TAG  emi-1A2B3C4D  image  database_server
TAG  emi-1A2B3C4D  image  stack  Production
TAG  i-5F4E3D2A  instance  database_server
TAG  i-5F4E3D2A  instance  stack  Production
TAG  i-12345678  instance  webserver
TAG  i-12345678  instance  stack  Test
</code></pre><p>The following example describes the tags for the resource with ID emi-1A2B3C4D.</p><pre><code>ec2-describe-tags --filter &quot;resource-id=emi-1A2B3C4D&quot;
TAG  emi-1A2B3C4D  image  database_server
TAG  emi-1A2B3C4D  image  stack  Production
</code></pre><p>The following example describes the tags for all your instances.</p><pre><code>ec2-describe-tags --filter &quot;resource-type=instance&quot;
TAG  i-5F4E3D2A  instance  database_server
TAG  i-5F4E3D2A  instance  stack  Production
TAG  i-12345678  instance  webserver
TAG  i-12345678  instance  stack  Test
</code></pre><p>The following example describes the tags for all your instances that have a tag with the key webserver.</p><pre><code>ec2-describe-tags --filter &quot;resource-type=instance&quot; --filter &quot;key=database_server&quot;
TAG  i-5F4E3D2A  instance  database_server
</code></pre><p>The following example describes the tags for all your instances that have a tag with the key stack that has a value of either Test or Production.</p><pre><code>ec2-describe-tags --filter &quot;resource-type=instance&quot; --filter &quot;key=stack&quot; 
--filter &quot;value=Test&quot; --filter &quot;value=Production&quot;
TAG  i-5F4E3D2A  instance  stack  Production
TAG  i-12345678  instance  stack  Test
</code></pre><p>The following example describes the tags for all your instances that have a tag with the key Purpose that has no value.</p><pre><code>ec2-describe-tags --filter &quot;resource-type=instance&quot; --filter &quot;key=Purpose&quot; --filter &quot;value=&quot;
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-1855209f1ecefb64ccd88f7af8b7c8b8>5.2.3 - Change a Tag's Value</h1><p>To change a tag&rsquo;s value:</p><p>Enter the following command and parameters:</p><pre><code>euca-create-tags [resource]  --tag [key=value]
</code></pre><p>Eucalyptus returns a the resource identifier and its tag key and value. The following example changes the value of the stack tag for one of your EMIs from prod to test:</p><pre><code>euca-create-tags emi-1a2b3c4d  --tag stack=dev
TAG  emi-1a2b3c4d  image  stack  dev
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-9b1a43ba2107a4f7eafe77b5ee38d4ec>5.2.4 - Delete a Tag</h1><p>To delete a tag:</p><p>Enter the following command and parameters:</p><pre><code>euca-delete-tags resource_id [resource_id]&quot; --tag
&quot;key=[key_value]&quot; --tag &quot;value=[key_value]&quot;
</code></pre><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>If you specify a value, the tag is deleted only if its value matches the one you specified. If you specify an empty string as the value, the tag is deleted only if the tag&rsquo;s value is an empty string.</div><p>Eucalyptus does not return a message. The following example deletes two tags assigned to an EMI and an instance:</p><pre><code>euca-delete-tags emi-1A2B3C4D i-6F5D4E3A --tag appserver --tag stack
</code></pre><p>The following example deletes a tag only if the value is an empty string:</p><pre><code>euca-delete-tags snap-1A2B3C4D --tag Owner=
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-1270c26578adb8e744d48ed49e2f1e74>5.2.5 - Filter by Tag</h1><p>You can describe your resources and filter the results based on the tags. To filter by tag:</p><p>Enter the following command and parameter:</p><pre><code>euca-describe-tags --filter resource-type=[resource_type]
</code></pre><p>The following example describes all your tags.</p><pre><code>euca-describe-tags
TAG  emi-1A2B3C4D  image  appserver
TAG  emi-1A2B3C4D  image  stack  dev
TAG  i-5F4E3D2A  instance  appserver
TAG  i-5F4E3D2A  instance  stack  dev
TAG  i-12345678  instance  database_server
TAG  i-12345678  instance  stack  test
</code></pre><p>The following example describes the tags for a resource with ID emi-1A2B3C4D.</p><pre><code>euca-describe-tags --filter &quot;resource-id=emi-1A2B3C4D&quot;
TAG  emi-1A2B3C4D  image  appserver
TAG  emi-1A2B3C4D  image  stack  dev
</code></pre><p>The following example describes the tags for all your instances.</p><pre><code>euca-describe-tags --filter &quot;resource-type=instance&quot;
TAG  i-5F4E3D2A  instance  appserver
TAG  i-5F4E3D2A  instance  stack  dev
TAG  i-12345678  instance  database_server
TAG  i-12345678  instance  stack  test
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-ab7c354e5ad78e7429a5dc9aa9029889>6 - Managing Access</h1><h1 id=managing-access>Managing Access</h1><p>Eucalyptus manages access to the cloud by policies attached to accounts, groups, and users. This section details access-related tasks you can perform once your administrator allows you access to Eucalyptus. These tasks are split into the following areas: tasks for groups, and tasks for users, and tasks for credential management.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-3d2989c89b0e9dd4fb0ef6ef92ac4a1c>6.1 - Groups</h1><h1 id=groups>Groups</h1><p>Groups are used to share resource access authorizations among a set of users within an account. Users can belong to multiple groups.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>A group in the context of access is not the same as a security group.</div>This section details tasks that can be performed on groups.</p></div><div class=td-content><h1 id=pg-6f28ff1ca761e9e3262daf843ecc60eb>6.1.1 - Create a Group</h1><p>To create a group perform the steps listed in this topic.Enter the following command:</p><pre><code>euare-groupcreate -g &lt;group_name&gt;
</code></pre><p>Eucalyptus does not return anything.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-efab8a77484ceb68ddfd46bb2d03f60d>6.1.2 - Add a Group Policy</h1><p>To add a group policy perform the steps listed in this topic.Enter the following command:</p><pre><code>euare-groupaddpolicy -g &lt;group_name&gt; -p &lt;policy_name&gt; -e &lt;effect&gt; -a
							&lt;actions&gt; -o
</code></pre><p>The optional <code>-o</code> parameter tells Eucalyptus to return the JSON policy, as in this example:</p><pre><code>{&quot;Version&quot;:&quot;2008-10-17&quot;,&quot;Statement&quot;:[{&quot;Effect&quot;:&quot;Allow&quot;, &quot;Action&quot;:[&quot;ec2:RunInstances&quot;], &quot;Resource&quot;:[&quot;*&quot;]}]}
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-c9e870f9faf2341d92203254dc47199e>6.1.3 - Modify a Group</h1><p>To modify a group perform the steps listed in this topic.Modifying a group is similar to a &ldquo;move&rdquo; operation. Whoever wants to modify the group must have permission to do it on both sides of the move. That is, you need permission to remove the group from its current path or name, and put that group in the new path or name.</p><p>For example, if a group changes from one area in a company to another, you can change the group&rsquo;s path from <em>/area_abc/</em> to <em>/area_efg/</em> . You need permission to remove the group from <em>/area_abc/</em> . You also need permission to put the group into <em>/area_efg/</em> . This means you need permission to call <code>UpdateGroup</code> on both <em>arn:aws:iam::123456789012:group/area_abc/</em>* and <em>arn:aws:iam::123456789012:group/area_efg/</em>* .</p><p>Enter the following command to modify the group&rsquo;s name:</p><pre><code>euare-groupmod -g &lt;group_name&gt; --new-group-name &lt;new_name&gt;
</code></pre><p>Eucalyptus does not return a message. Enter the following command to modify a group&rsquo;s path:</p><pre><code>euare-groupmod -g &lt;group_name&gt; -p &lt;new_path&gt;
</code></pre><p>Eucalyptus does not return a message.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-22f88efb8f7b4230c617ce233958b08e>6.1.4 - Add a User to a Group</h1><p>To add a user to a group perform the steps listed in this topic.Enter the following command:</p><pre><code>euare-groupadduser -g &lt;group_name&gt; -u &lt;user-name&gt; 
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-e86d20ce4bd225b0dc141c155d554ca3>6.1.5 - Remove a User from a Group</h1><p>To remove a user from a group perform the steps listed in this topic.Enter the following command:</p><pre><code>euare-groupremoveuser -g &lt;group_name&gt; -u &lt;user-name&gt; 
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-0ffc021482c3305f0a60954b22bcd807>6.1.6 - List Groups</h1><p>To list groups perform the steps listed in this topic.Enter the following command:</p><pre><code>euare-grouplistbypath
</code></pre><p>Eucalyptus returns a list of paths followed by the ARNs for the groups in each path. For example:</p><pre><code>arn:aws:iam::eucalyptus:group/groupa
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-24fe2284a9b4c5dac4de4e3b984907ea>6.1.7 - Delete a Group</h1><p>To delete a group perform the steps listed in this topic.When you delete a group, you have to remove users from the group and delete any policies from the group. You can do this with one command, using the <code>euare-groupdel</code> command with the <code>-r</code> option. Or you can follow the following steps to specify who and what you want to delete.</p><p>Individually remove all users from the group.</p><pre><code>euare-groupremoveuser -g &lt;group_name&gt; -u &lt;user_name&gt;
</code></pre><p>Delete the policies attached to the group.</p><pre><code>euare-groupdelpolicy -g &lt;group_name&gt; -p &lt;policy_name&gt;
</code></pre><p>Delete the group.</p><pre><code>euare-groupdel -g &lt;group_name&gt;
</code></pre><p>The group is now deleted.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-6820a056ed00ccc938ab0e1d5bc2fbbc>6.2 - Users</h1><h1 id=users>Users</h1><p>Users are subsets of accounts and are added to accounts by an appropriately credentialed administrator. While the term <strong>user</strong> typically refers to a specific person, in Eucalyptus, a <strong>user</strong> is defined by a specific set of credentials generated to enable access to a given account. Each set of user credentials is valid for accessing only the account for which they were created. Thus a user only has access to one account within a Eucalyptus system. If an individual person wishes to have access to more than one account within a Eucalyptus system, a separate set of credentials must be generated (in effect a new â€˜userâ€™) for each account (though the same username and password can be used for different accounts).</p><p>When you need to add a new user to your Eucalyptus cloud, you&rsquo;ll go through the following process:</p><ol><li>Create a user</li><li>Add user to a group</li><li>Give user a login profile</li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-342fe017ac5a34ef1d0f3e3591560d1b>6.2.1 - Add a User</h1><p>To add a user, perform the steps in this topic.Enter the following command</p><pre><code>euare-usercreate -u &lt;user_name&gt; -g &lt;group_name&gt; -k
</code></pre><p>Eucalyptus does not return a response.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>If you include the parameter, Eucalyptus returns a response that includes the user&rsquo;s ARN and GUID.</div></p></div><div class=td-content style=page-break-before:always><h1 id=pg-752c1c6d43c0a1ec40de40e16ac7757b>6.2.2 - Create a Login Profile</h1><p>To create a login profile, perform the tasks in this topic.Enter the following command:</p><pre><code>euare-useraddloginprofile -u &lt;user_name&gt; -p &lt;password&gt;
</code></pre><p>Eucalyptus does not return a response.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-52fdb183c537a61661d91b13998619b4>6.2.3 - Modify a User</h1><p>Modifying a user is similar to a &ldquo;move&rdquo; operation. To modify a user, you need permission to remove the user from the current path or name, and put that user in the new path or name.For example, if a user changes from one team in a company to another, you can change the user&rsquo;s path from <em>/team_abc/</em> to <em>/team_efg/</em> . You need permission to remove the user from <em>/team_abc/</em> . You also need permission to put the user into <em>/team_efg/</em> . This means you need permission to call UpdateUser on both <em>arn:aws:iam::123456789012:user/team_abc/</em>* and <em>arn:aws:iam::123456789012:user/team_efg/</em>* .</p><p>To rename a user:</p><p>Enter the following command to rename a user:</p><pre><code>euare-usermod -u &lt;user_name&gt; --new-user-name &lt;new_name&gt;
</code></pre><p>Eucalyptus does not return a message. Enter the following command:</p><pre><code>euare-groupmod -u &lt;user_name&gt; -p &lt;new_path&gt;
</code></pre><p>Eucalyptus does not return a message.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-26affa6e4f189906a2479f938e44bf6e>6.2.4 - Change User Path</h1><p>Enter the following command:</p><pre><code>euare-usermod -u &lt;user_name&gt; -p &lt;new_path&gt;
</code></pre><p>Eucalyptus does not return a message.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-732f9e3d6d25d353e49876081277ff93>6.2.5 - Change User Password</h1><p>To change a user&rsquo;s password using the CLI:</p><p>Enter the following command:</p><pre><code>euare-usermodloginprofile -u [username] -p [password]
</code></pre><p>Eucalyptus does not return a message.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-7b318b328661bcfbe169389beddb17a1>6.2.6 - List Users</h1><p>To list users within a path, perform the steps in this topic.Use the <code>euare-userlistbypath</code> command to list all the users in an account or to list all the users with a particular path prefix. The output lists the ARN for each resulting user.</p><pre><code>euare-userlistbypath -p &lt;path&gt;
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-0a09544f1e4b3297bc5e07fddde2cc06>6.2.7 - Delete a User</h1><p>To delete a user, perform the tasks in this topic.Enter the following command</p><pre><code>euare-userdel -u &lt;user_name&gt;
</code></pre><p>Eucalyptus does not return a response.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-407c51194c7080ffe59d541454978bdc>6.3 - Credentials</h1><h1 id=credentials>Credentials</h1><p>Eucalyptus uses different types of credentials for different purposes. This section details tasks needed to allow access to Eucalyptus services.</p></div><div class=td-content><h1 id=pg-2fa37849f9c1f6c20198b2ea31557ca7>6.3.1 - Create Credentials</h1><p>The first time you get credentials using the Eucalyptus Administrator Console, a new secret access key is generated. On each subsequent request to get credentials, an existing active secret Key is returned. You can also generate new keys using the command.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Each request to get a user&rsquo;s credentials generates a new pair of a private key and X.509 certificate.</div>To generate a new key for a user by an account administrator, enter the following</p><pre><code>euare-useraddkey USERNAME
</code></pre><p>To generate a private key and an X.509 certificate pair, enter the following:</p><pre><code>euare-usercreatecert USERNAME
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-ef53b52e534f0ea94eba216f4cbef56f>6.3.2 - Upload a Certificate</h1><p>To upload a certificate provided by a user:</p><p>Enter the following command:</p><pre><code>euare-useraddcert -u &lt;user_name&gt; -f &lt;cert_file&gt;
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-771685f3698cbf9f2500bba7717c4bf1>7 - Using VM Networking and Security</h1><h1 id=using-vm-networking-and-security>Using VM Networking and Security</h1><p>The Eucalyptus networking mode used, and it&rsquo;s configuration, determine the features available to users; such as elastic IPs, which are public (external) IP addresses that users can reserve and dynamically associate with VM instance; and security groups, which are sets of firewall rules applied to VM instances associated with the group.</p><p>Euca2ools or the AWS CLI provide means for users to interact with these features with commands for allocating and associating IP addresses, as well as creating, deleting, and modifying security groups.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-8e5e2d308d2a6de61e0cdec278497495>7.1 - Associate an IP Address with an Instance</h1><p>To associate an IP address with an instance:</p><p>Allocate an IP address:</p><pre><code>euca-allocate-address ADDRESS &lt;IP_address&gt;
</code></pre><p>Associate the allocated IP address with an instance ID:</p><pre><code>euca-associate-address -i &lt;instance_ID&gt; &lt;IP_address&gt; 



euca-associate-address -i i-56785678 192.168.17.103
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-eba6d058af5f53c724aac0b09f2ead69>7.2 - Release an IP Address</h1><p>Use euca-disassociate-address and euca-release-address to disassociate an IP address from an instance and to release the IP address to the global pool, respectively.</p><p>To release an IP address:</p><p>Enter the following command to disassociate an IP address from an instance:</p><pre><code>euca-disassociate-address &lt;IP_address&gt;
</code></pre><p>Enter the following command to release an IP address:</p><pre><code>euca-disassociate-address &lt;IP_address&gt;
</code></pre><p>The following example releases the IP address, <code>192.168.17.103</code></p><pre><code>euca-release-address 192.168.17.103
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-a708dbaf6ae500e2811936c10cba1ada>7.3 - Create a Security Group</h1><p>Security groups let you control network access to instances by applying network rules to instances associated with a group.</p><p>To create a security group:</p><p>Enter the following command:</p><pre><code>euca-add-group -d &lt;description&gt; &lt;group_name&gt;
</code></pre><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>You can also create a security group you run an instance. Use the command with the option. Security group rules only apply to incoming traffic thus all outbound traffic is permitted.</div><p>The following example creates a new security group named <code>mygroup</code> and described as <code>newgroup</code> .</p><pre><code>euca-add-group -d &quot;newgroup&quot; mygroup
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-ca7e9523da8da1f44b9a178664b281e5>7.4 - Delete a Security Group</h1><p>The euca-delete-group command lets you delete security groups. To delete a security group:</p><p>Enter the following command:</p><pre><code>euca-delete-group &lt;group_name&gt;
</code></pre><p>The following example deletes the security group, <code>mygroup</code> .</p><pre><code>euca-delete-group mygroup
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-fcb1a70c1a948cba1ca649d72cbb7c99>7.5 - Authorize Security Group Rules</h1><p>By default, a security group prevents incoming network traffic from all sources. You can modify network rules and allow incoming traffic to security groups from specified sources using the euca-authorize command.</p><p>To authorize security group rules:</p><p>Use <code>euca-authorize</code> to authorize port 22 access to your default group. Enter the following command:</p><pre><code>euca-authorize -P &lt;protocol&gt; -p &lt;port_number&gt; \
-s &lt;CIDR_source_network&gt; &lt;group_name&gt;
</code></pre><p>The following example allows all incoming SSH traffic on port 22 to access to the security group <code>mygroup</code> . The CIDR source network, <code>0.0.0.0/0</code> , refers to any source.</p><pre><code>euca-authorize -P tcp -p 22 -s 0.0.0.0/0 mygroup 
 GROUP	mygroup â†µ
 PERMISSION	mygroup	ALLOWS	tcp	22	22	FROM	CIDR
</code></pre><p>Instead of specifying a CIDR source, you can specify another security group. The following example allows access to the security group <code>mygroup</code> from the <code>someothergroup</code> security group using SSH on port 22.</p><pre><code>euca-authorize --source-group someothergroup \
--source-group-user someotheruser -P tcp -p 22 mygroup
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-c85449799b2f17c043704492a4a20e32>7.6 - Revoke Security Group Rules</h1><p>To revoke security group rules:</p><p>Enter the following command:</p><pre><code>euca-revoke -P &lt;protocol&gt; -p &lt;port_number&gt; -s &lt;CIDR_source_network&gt; &lt;group_name&gt;
</code></pre><p>The following example revokes the network rules authorized for the security group <code>mygroup</code> .</p><pre><code>euca-revoke -P tcp -p 22 -s 0.0.0.0/0 mygroup 
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-9b7bdc22a4ccce9fcccfa599c27cb642>8 - Using Auto Scaling</h1><h1 id=using-auto-scaling>Using Auto Scaling</h1><p>Eucalyptus Auto Scaling automatically adds and removes instances based on demand. Auto Scaling scales dynamically based on metrics (for example, CPU utilization). The Auto Scaling service works in conjunction with the ElasticLoad Balancing and CloudWatch services.</p></div><div class=td-content><h1 id=pg-eca302cc14efa49f00bba5ea410e31e7>8.1 - How Auto Scaling Works</h1><p>Eucalyptus Auto Scaling is designed to address a common web application scenario: that you are running multiple copies of an application across several identical instances to adequately handle a certain volume of user requests. Eucalyptus Auto Scaling can help you make more efficient use of the computing resources in your cloud by automatically launching and terminating these instances, based on metrics and/or a schedule that you can define. There are three main Auto Scaling components that work together to provide this functionality: the <em>Auto Scaling group</em> , the <em>launch configuration</em> , and the <em>scaling plan</em> .</p><p>The <em>Auto Scaling group</em> contains the information about the instances that will be actually be used for scaling operations. The Auto Scaling group defines the minimum, desired, and maximum number of instances that you will use to scale your application.</p><p>The <em>launch configuration</em> contains all of the information necessary for Auto Scaling to launch instances, including instance type, image ID, key pairs, security groups, and block device mappings.</p><p>The <em>scaling policy</em> defines how to perform scaling actions. Scaling policies can execute automatically in response to CloudWatch alarms, or they you can execute them manually.</p><p>In addition to performing scaling operations based on the criteria defined in the scaling plan, Auto Scaling will periodically perform health checks to ensure that the instances in your Auto Scaling group are up and running. If an instance is determined to be unhealthy, Auto Scaling will terminate that instance and launch a new instance in order to maintain the minimum or desired number of instances in the scaling group.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-18877d04bc0954a2d14b9a825becf87e>8.2 - Auto Scaling Concepts</h1><h1 id=auto-scaling-concepts>Auto Scaling Concepts</h1><p>This section discusses Auto Scaling concepts and terminology.</p></div><div class=td-content><h1 id=pg-ec71d585508ba55ce2779a64496f9175>8.2.1 - Understanding Launch Configurations</h1><p>The launch configuration defines the settings used by the Eucalyptus instances launched within an Auto Scaling group. This includes the image name, the instance type, key pairs, security groups, and block device mappings. You associate the launch configuration with an Auto Scaling group. Each Auto Scaling group can have one (and only one) associated launch configuration.</p><p>Once you&rsquo;ve created a launch configuration, you can&rsquo;t change it; you must create a new launch configuration and then associate it with an Auto Scaling group. After you&rsquo;ve created and attached a new launch configuration to an Auto Scaling group, any new instances will be launched using parameters defined in the new launch configuration; existing instances in the Auto Scaling group are not affected.</p><p>For more information, see <a href=https://www.eucastack.io/docs/user_guide/autoscaling_intro/autoscaling_examples_intro/autoscaling_examples_basic_config/>Creating a Basic Auto Scaling Configuration</a> .</p></div><div class=td-content style=page-break-before:always><h1 id=pg-3f7496825c64b070eef53cc4acc6b30d>8.2.2 - Understanding Auto Scaling Groups</h1><p>An Auto Scaling group is the central component of Auto Scaling. An Auto Scaling group defines the parameters for the Eucalyptus instances are used for scaling, as well as the minimum, maximum, and (optionally) the desired number of instances to use for Auto Scaling your application. If you don&rsquo;t specify the desired number of instances in your Auto Scaling group, the default value will be the same as the minimum number of instances defined.</p><p>In addition to instance and capacity definitions, each Auto Scaling group must specify one (and only one) launch configuration.</p><p>For more information, see <a href=https://www.eucastack.io/docs/user_guide/autoscaling_intro/autoscaling_examples_intro/autoscaling_examples_basic_config/>Creating a Basic Auto Scaling Configuration</a> .</p></div><div class=td-content style=page-break-before:always><h1 id=pg-21224594ae25d8659105c5691ab05af7>8.2.3 - Understanding Auto Scaling Policies</h1><p>An Auto Scaling policy defines how to perform scaling actions in response to CloudWatch alarms. Auto scaling policies can either <em>scale-in</em> , which terminates instances in your Auto Scaling group, or <em>scale-out</em> , which will launch new instances in your Auto Scaling group. You can define an Auto Scaling policy based on demand, or based on a fixed schedule.</p><p><strong>Demand-Based Auto Scaling Policies</strong></p><p>Demand-based Auto Scaling policies scale your application dynamically based on CloudWatch metrics (such as average CPU utilization) gathered from the instances running in your scaling group. For example, you can configure a CloudWatch alarm to monitor the CPU usages of the instances in your Auto Scaling group. A CloudWatch alarm definition includes <em>thresholds</em> - minimum and maximum values for the defined metric - that will cause the alarm to fire.</p><p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>For more information on CloudWatch, go to .</div>For example, you can define the lower and upper thresholds of the CloudWatch alarm at 40% and 80% CPU usage. Once you&rsquo;ve created the CloudWatch alarm, you can create a scale-out policy that launches 10 new instances when the CloudWatch alarm breaches the upper threshold (the average CPU usage is at or above 80%), and a scale-in policy that terminates 10 instances when the CloudWatch alarm breaches the lower threshold (the average CPU usage of the instances in the Auto Scaling group falls below 40%). Your Auto Scaling group will execute the appropriate Auto Scaling policy when it receives the message from the CloudWatch alarm.</p><p><strong>Cooldown Period</strong></p><p>A <em>cooldown period</em> is the amount of time after an Auto Scaling activity takes place where further Auto Scaling activity is suspended. This is to allow time for the Auto Scaling activities (such as new instance launches or terminations) to fully complete so that resources are not unnecessarily launched or terminated. You can specify this amount of time; if you don&rsquo;t specify a cooldown period, Auto Scaling uses a default cooldown period of 300 seconds (5 minutes).</p><p>For more information, go to <a href=https://www.eucastack.io/docs/user_guide/autoscaling_intro/autoscaling_examples_intro/autoscaling_examples_scaling_plan_demand/>Configuring a Demand-Based Scaling Policy</a> .</p></div><div class=td-content style=page-break-before:always><h1 id=pg-1039aae90fb93b25460c6a3f9b056d4c>8.2.4 - Understanding Health Checks</h1><p>Auto scaling periodically performs <em>health checks</em> on the instances in your Auto Scaling group. By default, Auto Scaling group determines the health state of each instance by periodically checking the results of Eucalyptus instance status checks. When Auto Scaling determines that an instance is unhealthy, it terminates that instance and launches a new one.</p><p>If your Auto Scaling group is using elastic load balancing, Auto Scaling can determine the health status of the instances by checking the results of both Eucalyptus instance status checks and elastic load balancing instance health.</p><p>Auto scaling determines an instance is unhealthy if the calls to either Eucalyptus instance status checks or elastic load balancing instance health status checks return any state other than <code>OK</code> (orÂ  <code>InService</code> ).</p><p>If there are multiple elastic load balancers associated with your Auto Scaling group, Auto Scaling will make health check calls to each load balancer. If any of the health check calls return any state other thanÂ  <code>InService</code> , that instance will be marked as unhealthy. After Auto Scaling marks an instance as unhealthy, it will remain marked in that state, even if subsequent calls from other load balancers return anÂ  <code>InService</code> Â state for the same instance.</p><p>For more information, go to <a href=https://www.eucastack.io/docs/user_guide/autoscaling_intro/autoscaling_examples_intro/autoscaling_examples_health_checks/>Configuring Health Checks</a> .</p></div><div class=td-content style=page-break-before:always><h1 id=pg-8566326bbd9883d42b15b0bac8e468f1>8.2.5 - Understanding Instance Termination Policies</h1><p>Before Auto Scaling selects an instance to terminate, it first identifies the availability zone used by the group that contains the most instances. If all availability zones have the same number of instances, Auto Scaling selects a random availability zone, and then uses the termination policy to select the instance within that randomly selected availability zone for termination.</p><p>By default, Auto Scaling chooses the instance that was launched with the oldest launch configuration. If more than one instance was launched using the oldest launch configuration, Auto Scaling the instance that was created first using the oldest launch configuration.</p><p>You can override the default instance termination policy for your Auto Scaling group with one of the following options:</p><table><thead><tr><th style=text-align:left>Option</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>OldestInstance</td><td style=text-align:left>The oldest instance in the Auto Scaling group should be terminated.</td></tr><tr><td style=text-align:left>NewestInstance</td><td style=text-align:left>The newest instance in the Auto Scaling group should be terminated.</td></tr><tr><td style=text-align:left>OldestLaunchConfiguration</td><td style=text-align:left>The first instance created using the oldest launch configuration should be terminated.</td></tr><tr><td style=text-align:left>Default</td><td style=text-align:left>Use the default instance termination policy.</td></tr></tbody></table><p>You can have more than one termination policy per Auto Scaling group. The termination policies are executed in the order they were created.</p><p>For more information, go to <a href=https://www.eucastack.io/docs/user_guide/autoscaling_intro/autoscaling_examples_intro/autoscaling_examples_instance_termination_policy/>Configuring an Instance Termination Policy</a> .</p></div><div class=td-content style=page-break-before:always><h1 id=pg-d921ce29126b5c99559b331c22229ef0>8.3 - Auto Scaling Usage Examples</h1><h1 id=auto-scaling-usage-examples>Auto Scaling Usage Examples</h1><p>This section contains examples of many common usage scenarios for Auto Scaling.</p></div><div class=td-content><h1 id=pg-c036ed77e65d33988a1baddd590db82e>8.3.1 - Creating a Basic Auto Scaling Configuration</h1><p>Auto scaling requires two basic elements to function properly: a launch configuration and an Auto Scaling group. The following examples show how to set up the basic elements of an Auto Scaling configuration.</p><h2 id=create-a-launch-configuration>Create a Launch Configuration</h2><p>The launch configuration specifies the parameters that Auto Scaling will use when launching new instances for your Auto Scaling group. In this example, we will create a launch configuration with the minimum required parameters - in this case, we set up a launch configuration that specifies that all instances launched in the Auto Scaling group will be of instance type and use the image.To create a launch configuration:</p><p>Enter the following command: <code>euscale-create-launch-config MyLaunchConfig --image-id emi-00123456 --instance-type m1.small</code> To verify the launch configuration, enter the following command: <code>euscale-describe-launch-configs MyLaunchConfig</code> You should see output similar to the following:</p><pre><code>LAUNCH-CONFIG	MyLaunchConfig	emi-00123456	m1.small
</code></pre><p>You&rsquo;ve now created a launch configuration..</p><h2 id=create-an-auto-scaling-group>Create an Auto Scaling Group</h2><p>The Auto Scaling group contains settings like the minimum, maximum, and desired number of Eucalyptus instances. At minimum, you must specify the name of the Auto Scaling group, the name of an existing launch configuration, the availability zone, and the minimum and maximum number of instances that should be running. In the following example, we will create an Auto Scaling group called MyScalingGroup in availability zone PARTI00, with a minimum size of 2 and a maximum size of 5.To create an Auto Scaling group: Enter the following command:</p><pre><code>euscale-create-auto-scaling-group MyScalingGroup --launch-configuration
                    		MyLaunchConfig --availability-zones PARTI00 --min-size 2 --max-size 5
                    		--desired-capacity 2
</code></pre><p>Enter the following command to verify the Auto Scaling group you just created:</p><pre><code>euscale-describe-auto-scaling-groups MyScalingGroup
</code></pre><p>This command will return output similar to the following:</p><pre><code>AUTO-SCALING-GROUP	MyScalingGroup	MyLaunchConfig	PARTI00		2	5	2	Default
INSTANCE	i-1B853EC3	PARTI00	InService	Healthy	MyLaunchConfig
INSTANCE	i-ABC53ED7	PARTI00	InService	Healthy	MyLaunchConfig
</code></pre><p>Once you&rsquo;ve created the Auto Scaling group, Auto Scaling will launch the appropriate number of instances.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-cdb324072ca0c83712273c2e73d1192a>8.3.2 - Configuring a Demand-Based Scaling Policy</h1><p>An Auto Scaling group needs a scaling policy to determine when to perform scaling activities. Auto scaling policies work with CloudWatch to identify metrics and set alarms, which are triggered when the metrics fall outside of a specified value range. To configure a scale-based policy, you need to create the policy, and then create CloudWatch alarms to associate with the policy.In the following example, we will create a demand-based scaling policy.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>For more information on CloudWatch, go to .</div></p><h2 id=create-auto-scaling-policies>Create Auto Scaling Policies</h2><p>To create the scaling policies:</p><p>Create a scale-out policy using the following command:</p><pre><code>euscale-put-scaling-policy MyScaleoutPolicy --auto-scaling-group MyScalingGroup --adjustment=30 --type PercentChangeInCapacity
</code></pre><p>This command will return a unique Amazon Resource Name (ARN) for the new policy.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>You will need this ARN to create the Cloudwatch alarms in subsequent steps.</div></p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>The following example has been split into two lines for legibility.</div><pre><code>arn:aws:autoscaling::706221218191:scalingPolicy:5d02981b-f440-4c8f-98f2-8a620dc2b787:
    autoScalingGroupName/MyScalingGroup:policyName/MyScaleoutPolicy
</code></pre><p>Create a scale-in policy using the following command:</p><pre><code>euscale-put-scaling-policy MyScaleinPolicy -g MyScalingGroup --adjustment=-2  --type ChangeInCapacity
</code></pre><p>This command will return output containing a unique Amazon Resource Name (ARN) for the new policy, similar to the following:<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>You will need this ARN to create the Cloudwatch alarms in subsequent steps.</div></p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>The following example has been split into two lines for legibility.</div><pre><code>arn:aws:autoscaling::706221218191:scalingPolicy:d28c6ffc-e9f1-4a48-a79c-8b431794c367:
    autoScalingGroupName/MyScalingGroup:policyName/MyScaleinPolicy
</code></pre><h2 id=create-cloudwatch-alarms>Create CloudWatch Alarms</h2><p>To create CloudWatch alarms:</p><p>Create a Cloudwatch alarm for scaling out when the average CPU usage exceeds 80 percent:<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>The following example has been split into multiple lines for legibility.</div></p><pre><code>euwatch-put-metric-alarm AddCapacity  --metric-name CPUUtilization --unit Percent
--namespace &quot;AWS/EC2&quot; --statistic Average --period 120 --threshold 80 --comparison-operator 
GreaterThanOrEqualToThreshold --dimensions &quot;AutoScalingGroupName=MyScalingGroup&quot; 
--evaluation-periods 2 --alarm-actions 
arn:aws:autoscaling::706221218191:scalingPolicy:5d02981b-f440-4c8f-98f2-8a620dc2b787:
   autoScalingGroupName/MyScalingGroup:policyName/MyScaleoutPolicy
</code></pre><p>Create a Cloudwatch alarm for scaling in when the average CPU usage falls below 40 percent:<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>The following example has been split into multiple lines for legibility.</div></p><pre><code>euwatch-put-metric-alarm RemoveCapacity --metric-name CPUUtilization --unit Percent
--namespace &quot;AWS/EC2&quot; --statistic Average  --period 120  --threshold 40  --comparison-operator 
LessThanOrEqualToThreshold  --dimensions &quot;AutoScalingGroupName=MyScalingGroup&quot; --evaluation-periods 2 
--alarm-actions 
 arn:aws:autoscaling::706221218191:scalingPolicy:d28c6ffc-e9f1-4a48-a79c-8b431794c367:
  autoScalingGroupName/MyScalingGroup:policyName/MyScaleinPolicy
</code></pre><h2 id=verify-your-alarms-and-policies>Verify Your Alarms and Policies</h2><p>Once you&rsquo;ve created your Auto Scaling policies and CloudWatch alarms, you should verify them.To verify your alarms and policies:</p><p>Use the CloudWatch command <code>euwatch-describe-alarms</code> to see a list of the alarms you&rsquo;ve created:</p><pre><code>euwatch-describe-alarms 
</code></pre><p>This will return output similar to the following:</p><pre><code>AddCapacity	INSUFFICIENT_DATA	arn:aws:autoscaling::706221218191:scalingPolicy:5d02981b-f440-4c8f-98f2-8a620dc2b787:
   autoScalingGroupName/MyScalingGroup:policyName/MyScaleoutPolicy	
   AWS/EC2	CPUUtilization	120	Average	2	GreaterThanOrEqualToThreshold	80.0
RemoveCapacity	INSUFFICIENT_DATA	arn:aws:autoscaling::706221218191:scalingPolicy:d28c6ffc-e9f1-4a48-a79c-8b431794c367:
autoScalingGroupName/MyScalingGroup:policyName/MyScaleinPolicy	
   AWS/EC2	CPUUtilization	120	Average	2	LessThanOrEqualToThreshold	40.0
</code></pre><p>Use the euscale-describe-policies command to see the scaling policies you&rsquo;ve created:</p><pre><code>euscale-describe-policies --auto-scaling-group MyScalingGroup
</code></pre><p>This will return output similar to the following (note that this output has been split into multiple lines for legibility):</p><pre><code>SCALING-POLICY	MyScalingGroup	MyScaleinPolicy	-2	ChangeInCapacity	arn:aws:autoscaling::706221218191:
  scalingPolicy:d28c6ffc-e9f1-4a48-a79c-8b431794c367:
  autoScalingGroupName/MyScalingGroup:policyName/MyScaleinPolicy
SCALING-POLICY	MyScalingGroup	MyScaleoutPolicy	30	PercentChangeInCapacity	arn:aws:autoscaling::706221218191:
  scalingPolicy:5d02981b-f440-4c8f-98f2-8a620dc2b787:
  autoScalingGroupName/MyScalingGroup:policyName/MyScaleoutPolicy
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-b0cf01cf054f73b508f76b8e16b3106d>8.3.3 - Configuring Health Checks</h1><p>By default, Auto Scaling group determines the health state of each instance by periodically checking the results of instance status checks. You can specify using the ELB health check method in addition to using the instance health check method.To use load balancing health checks for an Auto Scaling group:</p><p>Use the following command to specify ELB health checks for an Auto Scaling group:</p><pre><code>euscale-update-auto-scaling-group MyScalingGroup â€“-health-check-type ELB â€“-grace-period 300 
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-c0a0eccf064a86028174691a2cc3ab0f>8.3.4 - Configuring an Instance Termination Policy</h1><p>You can control how Auto Scaling determines which instances to terminate. You can specify a termination policy when you create an Auto Scaling group, and you can change the termination policy at any time using the command.You can override the default instance termination policy for your Auto Scaling group with one of the following options:</p><table><thead><tr><th style=text-align:left>Option</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>OldestInstance</td><td style=text-align:left>The oldest instance in the Auto Scaling group should be terminated.</td></tr><tr><td style=text-align:left>NewestInstance</td><td style=text-align:left>The newest instance in the Auto Scaling group should be terminated.</td></tr><tr><td style=text-align:left>OldestLaunchConfiguration</td><td style=text-align:left>The first instance created using the oldest launch configuration should be terminated.</td></tr><tr><td style=text-align:left>Default</td><td style=text-align:left>Use the default instance termination policy.</td></tr></tbody></table><p>To configure an instance termination policy:</p><p>Specify the &ndash;termination-policies parameter when creating or updating the Auto Scaling group. For example:</p><pre><code>euscale-update-auto-scaling-group MyScalingGroup --termination-policies &quot;NewestInstance&quot;
</code></pre><p>Verify that your Auto Scaling group has updated the termination policy by running the following command: <code>euscale-describe-auto-scaling-groups MyScalingGroup</code> This command should return output similar to the following:</p><pre><code>AUTO-SCALING-GROUP	MyScalingGroup	MyLaunchConfig	PARTI00		2	5	2	NewestInstance
INSTANCE	i-1B853EC3	PARTI00	InService	Healthy	MyLaunchConfig
INSTANCE	i-ABC53ED7	PARTI00	InService	Healthy	MyLaunchConfig
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-85971fafb1ec1756b89b860719894dc1>8.3.5 - Configuring Auto Scaling with Elastic Load Balancing</h1><p>This example shows how to set up Auto Scaling with Elastic Load Balancing.To set up a load-balanced auto scaling configuration:</p><p>If you don&rsquo;t already have a launch configuration, create one: <code>euscale-create-launch-config MyLaunchConfig --image-id emi-50783D25 --instance-type m1.medium --group mysecuritygroup</code> Create a new auto scaling group associated with a load balancer: <code>euscale-create-auto-scaling-group MyScalingGroup --launch-configuration MyLaunchConfig --load-balancers MyLoadBalancer --availability-zones AcmeAvailabilityZone --min-size 2 --max-size 4</code> Authorize the security group used by the load balancer for back-end port communication. For example:</p><pre><code>$ eulb-describe-lbs --show-long
LOAD_BALANCER	MyLoadBalancer	MyLoadBalancer-408396244283.elb.acme.eucalyptus-systems.com			
{interval=200,target=HTTP:80/,timeout=3,healthy-threshold=2,unhealthy-threshold=4}		AcmeAvailabilityZone		
{protocol=HTTP,lb-port=80,instance-protocol=HTTP,instance-port=80}					
{owner-alias=944786667073,group-name=euca-internal-408396244283-MyLoadBalancer}		
2014-05-28T18:13:17.902Z
</code></pre><p><code>euca-authorize mysecuritygroup -u 944786667073 -o euca-internal-408396244283-MyLoadBalancer -p -1</code> Verify that your Auto Scaling group has been created with a load balancer:</p><pre><code>$ euscale-describe-auto-scaling-groups
AUTO-SCALING-GROUP	MyScalingGroup	MyLaunchConfig	AcmeAvailabilityZone	MyLoadBalancer	2	4	2	Default
INSTANCE	i-DFCD0CBC	AcmeAvailabilityZone	InService	Healthy	MyLaunchConfig
INSTANCE	i-B3431043	AcmeAvailabilityZone	InService	Healthy	MyLaunchConfig
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-fa9c57ce9cf0f118403555c12854216f>9 - Using Elastic Load Balancing</h1><h1 id=using-elastic-load-balancing>Using Elastic Load Balancing</h1><p>Elastic Load Balancing automatically distributes incoming traffic across your Eucalyptus cloud. It enables you to achieve even greater fault tolerance by automatically detecting instances that are overloaded, and rerouting traffic to other instances as needed.Elastic Load Balancing works in conjunction with Eucalyptus&rsquo;s Auto Scaling and Cloud Watch services, to make your cloud more robust and efficient.</p><p>The following section describes how load balancing works, provides an overview of load balancing concepts, and includes a series of usage scenarios that will show you how to perform common load balancing tasks.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-3efded6de8291ff4c6b94c2482944aa9>9.1 - Elastic Load Balancing Overview</h1><h1 id=elastic-load-balancing-overview>Elastic Load Balancing Overview</h1><p>Elastic Load Balancing is designed to provide an easy-to-use fault tolerant cloud platform. Using Elastic Load Balancing, you can automatically balance incoming traffic, ensuring that requests are sent to an instance that has the capacity to serve them. It allows you to add and remove instances as needed, without interrupting the operation of your cloud. If an instance fails or is removed, the load balancer stops routing traffic to that instance. If that instance is restored, or an instance is added, the load balancer automatically resumes or starts routing traffic to that instance.</p><p>If your cloud is serving traffic over HTTP, the Elastic Load Balancing service can provide session stickiness, allowing you to bind specific virtual instances to your load balancers.</p><p>Elastic Load Balancing can balance requests within a cluster, or across multiple clusters. If there are no more healthy instances in a cluster, the load balancer will route traffic to other clusters, until healthy instances are restored to that cluster.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-52af6b78792afd89a364bc84e5671daa>9.1.1 - Elastic Load Balancing Concepts</h1><p>This section describes the terminology and concepts you need for understanding and using the Elastic Load Balancing service.</p><h2 id=dns>DNS</h2><p>When a new load balancer is created, Eucalyptus will assign a unique DNS A record to the load balancer. After the load balancer has been launched and configured, the IP address of its interface will be added to the DNS name. If more than one cluster is specified, there can be more than one IP addresses mapped to the DNS name.</p><p>The load balancers in one cluster will distribute traffic to the instances only in the same cluster. Application users can query the application service using the DNS name and the Eucalyptus DNS service will respond to the query with the list of IP addresses on a round-robin basis.</p><p>Eucalyptus generates a DNS name automatically (e.g., lb001.euca-cloud.example.com). Typically there will also be a CNAME record that maps from the meaningful domain name (e.g., service.example.com) to the automatically-generated DNS name. The CNAME records can be serviced anywhere on Internet.</p><h2 id=health-check>Health Check</h2><p>In order to route traffic to healthy instances, and prevent traffic from being routed to unhealthy instances, the Elastic Load Balancing service routinely checks the health of your service instances. The health check uses metrics such as latency, RequestCount and HTTP response code counts to ensure that service instances are responding appropriately to user traffic.</p><h2 id=load-balancer>Load Balancer</h2><p>Load balancers are the core of the Elastic Load Balancing service. Load balancers are special instances created from a Eucalyptus-provided VM image, and are managed by Eucalyptus. Instances off the image forward packets to your service instances using load-balancing software to ensure no instances are overloaded.</p><p>There may be a brief delay between the time that the first service instance is registered to a load balancer and the time the load balancer becomes operational. This is due to the virtual machine instantiation, and will not adversely affect the operation of your load balancer.</p><p>Each balancer VM will service only one load balancer. Launching unnecessary load balancers may be detrimental to your cloud&rsquo;s performance.</p><h2 id=service-instance>Service Instance</h2><p>A service instance is an instance created from an image in your cloud. These are the instances that serve your application and users. The Elastic Load Balancing service monitors the health of these instances and routes traffic only to healthy instances.</p><h2 id=sticky-sessions>Sticky Sessions</h2><p>By default, a load balancer routes each request independently to the application instance with the smallest load. However, you can use the sticky session feature (also known as session affinity), which enables the load balancer to bind a user&rsquo;s session to a specific application instance. This ensures that all requests coming from the user during the session will be sent to the same application instance.</p><p>The key to managing the sticky session is determining how long your load balancer should consistently route the user&rsquo;s request to the same application instance. If your application has its own session cookie, then you can set Elastic Load Balancing to create the session cookie to follow the duration specified by the application&rsquo;s session cookie. If your application does not have its own session cookie, then you can set Elastic Load Balancing to create a session cookie by specifying your own stickiness duration. You can associate stickiness duration for only HTTP/HTTPS load balancer listeners.</p><p>An application instance must always receive and send two cookies: A cookie that defines the stickiness duration and a special Elastic Load Balancing cookie named AWSELB, that has the mapping to the application instance.</p><h2 id=httpsssl-support>HTTPS/SSL Support</h2><p>HTTPS Support is a feature that allows you to use the SSL/TLS protocol for encrypted connections (also known as SSL offload). This feature enables traffic encryption between the clients that initiate HTTPS sessions with your load balancer and also for connections between the load balancer and your back-end instances.</p><p>There are several advantages to using HTTPS/SSL connections with your load balancer:</p><ul><li><p>The SSL server certificate used to terminate client connections can be managed centrally on the load balancer, rather than on every individual application instance.</p></li><li><p>The work of encrypting and decrypting SSL traffic is moved from the application instance to the load balancer.</p></li><li><p>The load balancer can ensure session affinity or &ldquo;sticky sessions&rdquo; by terminating the incoming HTTPS request and then re-encrypting the content to send to the back-end application instance.</p></li><li><p>All of the features available for HTTP can be used with HTTPS connections.</p></li></ul><p>Using HTTPS/SSL protocols for both front-end and back-end connections ensures end-to-end traffic encryption. If you are using SSL and do not want Elastic Load Balancing to terminate, you can use a TCP listener and install certificates on all the back-end instances handling requests.</p><p>To enable HTTPS support for your load balancer, you&rsquo;ll have to install an SSL server certificate on your load balancer by using Identity and Access Management (IAM) to upload your SSL certificate and key. After you upload your certificate, specify its Amazon Resource Name (ARN) when you create a new load balancer or update an existing load balancer. The load balancer uses the certificate to terminate and then decrypt requests before sending them to the back-end instances.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-0ef117021b7f2e69b6b89b62164a657f>9.2 - Eucalyptus Load Balancing Usage Examples</h1><h1 id=eucalyptus-load-balancing-usage-examples>Eucalyptus Load Balancing Usage Examples</h1><p>This section contains examples of common usage scenarios for Eucalyptus Load Balancing.</p></div><div class=td-content><h1 id=pg-d435e90ef9d0abe8cf8635997f7c2916>9.2.1 - Eucalyptus ELB Listener Configurations</h1><p>This section provides a reference to various possible ways to configure your listener, depending on how secure you want your load balancer. Currently, Eucalyptus supports the following HTTP/HTTPS Load Balancer use cases:</p><ul><li>Basic HTTP load balancer</li><li>Secure website or application using ELB to offload SSL decryption.</li><li>Secure website or application using end-to-end encryption</li></ul><table><thead><tr><th style=text-align:left>Use Case</th><th style=text-align:left>Front-end Protocol</th><th style=text-align:left>Front-end Options</th><th style=text-align:left>Back-end Protocol</th><th style=text-align:left>Back-end Options</th><th style=text-align:left>Notes</th></tr></thead><tbody><tr><td style=text-align:left>Basic HTTP load balancer</td><td style=text-align:left>HTTP</td><td style=text-align:left>NA</td><td style=text-align:left>HTTP</td><td style=text-align:left>NA</td><td style=text-align:left>Supports X-forward for header. Go to AWS X-forwarding for more information.<a href></a></td></tr><tr><td style=text-align:left>Secure website or application using Elastic Load Balancing to offload SSL decryption</td><td style=text-align:left>HTTPS</td><td style=text-align:left>SSL Negotiation.</td><td style=text-align:left>HTTP</td><td style=text-align:left>NA</td><td style=text-align:left>Supports X-forward for header. Go to AWS X-forwarding for more information. Requires an SSL certificate installed on the load balancer.</td></tr><tr><td style=text-align:left>Secure website or application using end-to-end encryption</td><td style=text-align:left>HTTPS</td><td style=text-align:left>SSL Negotiation.</td><td style=text-align:left>HTTPS</td><td style=text-align:left>Back-end authentication</td><td style=text-align:left>Supports X-forward for header. Go to AWS X-forwarding for more information. Requires an SSL certificate installed on the load balancer and registered instances.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-441800215b6afae35e19bd054f75affd>9.2.2 - Creating a Basic Elastic Load Balancing Configuration</h1><p>Elastic load balancing requires two basic elements to function properly: a load balancer and instances registered with that load balancer. The following examples show how to set up the basic elements of an elastic load balancer configuration.</p><h2 id=create-a-load-balancer>Create a Load Balancer</h2><p>The load balancer manages incoming traffic, and monitors the health of your instances. The load balancer ensures that traffic is only sent to healthy instances.To create a load balancer:</p><p>Enter the following command, specifying availability zones:</p><pre><code>eulb-create-lb -z one -l &quot;lb-port=80, protocol=HTTP, instance-port=80, 
instance-protocol=HTTP&quot; MyLoadBalancer
</code></pre><p>To verify the elastic load balancer has been created, enter the following command: <code>eulb-describe-lbs MyLoadBalancer</code> You should see output similar to the following:</p><pre><code>LOAD_BALANCER	MyLoadBalancer	MyLoadBalancer-587773761872.lb.localhost	2013-01-01T01:23:45.678Z
</code></pre><p>Optionally, you can create listeners for the load balancer as follows:</p><pre><code>eulb-create-lb-listeners --listener &quot;lb-port=80, protocol=HTTP,
    instance-port=80, instance-protocol=HTTP&quot;
</code></pre><p>You&rsquo;ve now created an elastic load balancer.</p><h2 id=register-instances-with-the-load-balancer>Register instances with the Load Balancer</h2><p>The load balancer monitors the health of registered instances, and balances incoming traffic across the healthy instances.To register an instance with the load balancer: Enter the following command:</p><pre><code>eulb-register-instances-with-lb --instances i-e0636aca,i-0c9c3967 MyLoadBalancer
</code></pre><p>Enter the following command to verify that the instances are registered with the load balancer: <code>eulb-describe-instance-health MyLoadBalancer</code> This command will return output similar to the following:</p><pre><code>INSTANCE	i-6FAD3F7B	InService
INSTANCE	i-70FE4541	InService
</code></pre><p>Once you&rsquo;ve created the load balancer and registered your instances with it, the load balancer will automatically route traffic from its endpoint URL to healthy instances.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-9b07046d5cfd7a621ae1abebbaa563bb>9.2.3 - Configuring the Health Check</h1><p>To determine which instances are healthy, the load balancer periodically polls the registered instances. You can use the command as described in this topic.Perform the following step to configure how the instances should be polled, how long to wait for a response, and how many consecutive successes or failures are required to mark an instance as healthy or unhealthy.</p><p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>After you initially set up your load balancer, Eucalyptus automatically performs a health check to protect against potential side-effects caused by instances being terminated without being deregistered. This health check uses the instance port defined in the load balancer configuration</div>The following shows an example health check configuration command:</p><pre><code>eulb-configure-healthcheck --healthy-threshold 5 --unhealthy-threshold 5 --interval 30 --timeout 120 --target HTTP:80/ MyLoadBalancer
</code></pre><p>Use <code>--healthy-threshold</code> and <code>--unhealthy-threshold</code> to specify the number of consecutive health checks required to mark an instance as Healthy or Unhealthy respectively. Use <code>--target</code> to specify the connection target on your instances for these health checks. Use <code>--interval</code> and <code>--timeout</code> to specify the approximate frequency and maximum duration of these health checks.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-174d97ee16b0c7ca97b9cd8e0d1c14d1>9.2.4 - Modifying an Elastic Load Balancing Configuration</h1><p>Elastic load balancing requires two basic elements to function properly: a load balancer and instances registered with that load balancer. The following examples show how to modify the basic elements of an elastic load balancer configuration.</p><h2 id=de-register-instances-from-the-load-balancer>De-register instances from the Load Balancer</h2><p>The load balancer monitors the health of registered instances, and balances incoming traffic across the healthy instances.To deregister an instance from the load balancer: Enter the following command:</p><pre><code>eulb-deregister-instances-from-lb --instances INSTANCE1,INSTANCE2,... MyLoadBalancer
</code></pre><p>Enter the following command to verify that the instances are deregistered from the load balancer: <code>eulb-describe-instance-health MyLoadBalancer</code> This command will return output similar to the following:</p><pre><code>INSTANCE	i-6FAD3F7B	InService
</code></pre><h2 id=delete-load-balancer-listeners>Delete Load Balancer Listeners</h2><p>To delete a load balancer listener:</p><p>Enter the following command:</p><pre><code>eulb-delete-lb-listeners --lb-ports PORT1,PORT2,... MyLoadBalancer
</code></pre><h2 id=delete-load-balancer>Delete Load Balancer</h2><p>To delete a load balancer:</p><p>Enter the following command:</p><pre><code>eulb-delete-lb MyLoadBalancer
</code></pre><p>You&rsquo;ve now deleted the elastic load balancer.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-5d3d174a5842b1b8c026080102c901df>9.2.5 - Creating Elastic Load Balancing Sticky Sessions</h1><p>By default, a load balancer routes each request independently to the application instance with the smallest load. However, you can use the sticky session feature (also known as session affinity) which enables the load balancer to bind a user&rsquo;s session to a specific application instance. This ensures that all requests coming from the user during the session will be sent to the same application instance.</p><h2 id=enable-duration-based-session-stickiness>Enable Duration-Based Session Stickiness</h2><p>To enable duration-based sticky sessions for a load balancer:</p><p>Use the <code>eulb-create-lb-cookie-stickiness-policy</code> command to create a load-balancer-generated cookie stickiness policy with a cookie expiration period of 60 seconds. <code>eulb-create-lb-cookie-stickiness-policy MyLoadBalancer --policy-name MyLoadBalancerPolicy --expiration-period 60</code> Use the <code>eulb-set-lb-policies-of-listener</code> command to enable session stickiness for a load balancer using the MyLoadBalancerPolicy. <code>eulb-set-lb-policies-of-listener MyLoadBalancer --lb-port 80 --policy-names MyLoadBalancerPolicy</code> You can use the <code>eulb-describe-lb-policies</code> command to list the policies created for the load balancer. <code>eulb-describe-lb-policies MyLoadBalancer --show-long</code></p><h2 id=enable-application-controlled-session-stickiness>Enable Application-Controlled Session Stickiness</h2><p>To enable application-controlled session stickiness: Use the <code>eulb-create-app-cookie-stickiness-policy</code> command to create a load application-generated cookie stickiness policy: <code>eulb-create-app-cookie-stickiness-policy my-load-balancer -p my-app-cookie-lb-policy -c my-cookie</code> Use the <code>eulb-set-lb-policies-of-listener</code> command to enable session stickiness for a load balancer using the my-load-balancer policy. <code>eulb-set-lb-policies-of-listener example-lb --lb-port 80 --policy-names my-app-cookie-lb-policy</code> You can use the <code>eulb-describe-lb-policies</code> command to list the policies created for the load balancer. <code>eulb-describe-lb-policies example-lb --show-long</code></p></div><div class=td-content style=page-break-before:always><h1 id=pg-f1ad054efec9e95d751013d7b0f2103c>9.2.6 - Uploading SSL Certificates for Elastic Load Balancing</h1><p>You must install an X.509 certificate on your load balancer in order to use HTTPS or SSL termination. The X.509 certificate is issued by a central Certificate Authority (CA) and contains identifying information, including a digital signature. X.509 certificates have a validity period. Once an X.509 certificate expires, you must create and install a new certificate.</p><h2 id=upload-a-certificate>Upload a Certificate</h2><p>Once you&rsquo;ve created a certificate, you must upload it to your cloud using the command.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>You must create the certificate and get it signed by a certificate authority (CA) before you can upload the certificate using the AWS Identity and Access Management (IAM) service. For instructions, go to .</div>To upload a certificate :</p><p>Enter the <code>euare-servercertupload</code> command, specifying the name of your certificate, the contents of the PEM-encoded public- and private-keys:</p><pre><code>euare-servercertupload -s cert-name --certificate-file ssl_server_cert.crt --private-key-file ssl_server_cert.pem
</code></pre><p>You&rsquo;ve now created an elastic load balancer.</p><h2 id=verify-server-certificate>Verify Server Certificate</h2><p>You can verify that an uploaded certificate is stored in IAM. Each certificate object has a unique Amazon Resource Name (ARN) and ID.To verify an uploaded certificate: Use the <code>euare-servercertlistbypath</code> command to verify the certificate is stored in IAM:</p><pre><code>euare-servercertgetattributes -s elb-ssl-cert
</code></pre><p>The command will return the ARN, followed by the GUID. For example:</p><pre><code>arn:aws:iam::495375389014:server-certificate/elb-ssl-cert
ASCWDKTJBXPSZTHWFERVP
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-84660b0f56fa561f8e7dd7fd39147d84>9.2.7 - Adding SSL Support</h1><p>This topic describes how to add SSL support to a new or existing load balancer.</p><h2 id=creating-a-new-listener-with-ssl-support>Creating a new listener with SSL support</h2><p>This task shows how to create a new listener with SSL support.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>In order to use HTTPS support, you&rsquo;ll need to install an SSL server certificate on your load balancer. If you haven&rsquo;t already done this, see .</div>To add a new listener to your load balancer: Using the ARN for the certificate you installed, use the <code>eulb-create-listener</code> command to create a new listener. For example: <code>eulb-create-lb-listeners MyLoadBalancer --listener "protocol=HTTPS,lb-port=443,instance-port=80,instance-protocol=HTTP, cert-id=arn:aws:iam::12345678901:my-server-certificate/testing/myNewCert"</code> Use the <code>eulb-describe-lbs</code> command to see the details of your load balancer. For example: <code>eulb-describe-lbs MyLoadBalancer</code></p><h2 id=updating-a-listener-with-a-new-ssl-certificate>Updating a listener with a new SSL certificate</h2><p>This task shows how to replace an SSL server certificate configured with listeners"<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>In order to use HTTPS support, you&rsquo;ll need to install an SSL server certificate on your load balancer. If you haven&rsquo;t already done this, see .</div>To update an existing listener with SSL support: Use the <code>eulb-set-lb-listener-ssl-certcommand</code> with the ARN of your new server certificate to replace the certificate configured with listeners For example: <code>eulb-set-lb-listener-ssl-cert MyLoadBalancer --lb-port 443 --cert-id arn:aws:iam::12345678901:my-server-certificate/testing/myNewCert</code> Use the <code>eulb-describe-lbs</code> command to see the details of your load balancer. For example: <code>eulb-describe-lbs MyLoadBalancer</code></p></div><div class=td-content style=page-break-before:always><h1 id=pg-6daed41591ecf089789af6ae6c4f4c9c>9.2.8 - Updating the SSL Negotiation Configuration</h1><p>Eucalyptus Elastic Load Balancing (ELB) uses SSL negotiation configurations to determine how SSL connections to your load balancer behave. This topic shows how to update an existing load balancer with an SSL negotiation configuration.</p><p>Get a list of predefined security policies using the <code>eulb-describe-lb-policies</code> command: <code>eulb-describe-lb-policies</code> This produces output similar to the following:</p><pre><code>POLICY	ELBSample-AppCookieStickinessPolicy	AppCookieStickinessPolicyType
POLICY	ELBSample-LBCookieStickinessPolicy	LBCookieStickinessPolicyType
POLICY	ELBSecurityPolicy-2014-10	SSLNegotiationPolicyType
POLICY	ELBSecurityPolicy-2015-02	SSLNegotiationPolicyType
POLICY	ELBSecurityPolicy-2011-08	SSLNegotiationPolicyType
POLICY	ELBSecurityPolicy-2015-05	SSLNegotiationPolicyType
POLICY	ELBSecurityPolicy-2014-01	SSLNegotiationPolicyType
</code></pre><p>Use the <code>eulb-create-lb-policy</code> command to update the SSL negotiation configuration to use one of the predefined security policies. For example: <code>eulb-create-lb-policy --policy-name mypredefinedsslpolicy --policy-type SSLNegotiationPolicyType --attributes "Reference-Security-Policy=ELBSecurityPolicy-2011-08" myloadbalancer</code> Use the <code>eulb-describe-lbs</code> command to verify the update. For example: <code>eulb-describe-lbs myloadbalancer</code></p></div><div class=td-content style=page-break-before:always><h1 id=pg-ad3df4530193d2f58cafb2565733cba6>9.2.9 - Adding and Editing Predefined Security Policies</h1><p>This topic describes how to add and edit ELB security policies.Default ELB policies are stored as JSON files in the <code>/etc/eucalyptus/cloud.d/elb-security-policy</code> directory. You can add or edit policy files here, and the changes will take effect when the CLC is restarted.</p><p>Copy one of the ELB policy files to a new file and edit the file. You must change the <code>PolicyName</code> attribute to a new name, with the name ending in a date. For example: <code>ELBSecurityPolicy-2015-09</code> The policy file with the most recent date appended to the name will be used as the default policy when users create HTTPS/SSL listeners. The following is an example of an ELB policy file. You can modify this file and save it with a new filename in the <code>/etc/eucalyptus/cloud.d/elb-security-policy</code> directory.</p><pre><code>{
    &quot;PolicyAttributeDescriptions&quot;: [
        {
            &quot;AttributeName&quot;: &quot;Protocol-SSLv2&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;Protocol-TLSv1&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;Protocol-SSLv3&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;Protocol-TLSv1.1&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;Protocol-TLSv1.2&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;Server-Defined-Cipher-Order&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-ECDSA-AES128-GCM-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-RSA-AES128-GCM-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-ECDSA-AES128-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-RSA-AES128-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-ECDSA-AES128-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-RSA-AES128-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-RSA-AES128-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-ECDSA-AES256-GCM-SHA384&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-RSA-AES256-GCM-SHA384&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-ECDSA-AES256-SHA384&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-RSA-AES256-SHA384&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-RSA-AES256-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-ECDSA-AES256-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;AES128-GCM-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;AES128-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;AES128-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;AES256-GCM-SHA384&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;AES256-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;AES256-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-DSS-AES128-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;CAMELLIA128-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EDH-RSA-DES-CBC3-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DES-CBC3-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;true&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-RSA-RC4-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;RC4-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ECDHE-ECDSA-RC4-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-DSS-AES256-GCM-SHA384&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-RSA-AES256-GCM-SHA384&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-RSA-AES256-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-DSS-AES256-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-RSA-AES256-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-DSS-AES256-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-RSA-CAMELLIA256-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-DSS-CAMELLIA256-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;CAMELLIA256-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EDH-DSS-DES-CBC3-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-DSS-AES128-GCM-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-RSA-AES128-GCM-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-RSA-AES128-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-DSS-AES128-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-RSA-CAMELLIA128-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-DSS-CAMELLIA128-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ADH-AES128-GCM-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ADH-AES128-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ADH-AES128-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ADH-AES256-GCM-SHA384&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ADH-AES256-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ADH-AES256-SHA256&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ADH-CAMELLIA128-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ADH-CAMELLIA256-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ADH-DES-CBC3-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ADH-DES-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ADH-RC4-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;ADH-SEED-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DES-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-DSS-SEED-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DHE-RSA-SEED-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EDH-DSS-DES-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EDH-RSA-DES-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;IDEA-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;RC4-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;SEED-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DES-CBC3-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;DES-CBC-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;RC2-CBC-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;PSK-AES256-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;PSK-3DES-EDE-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;KRB5-DES-CBC3-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;KRB5-DES-CBC3-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;PSK-AES128-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;PSK-RC4-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;KRB5-RC4-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;KRB5-RC4-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;KRB5-DES-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;KRB5-DES-CBC-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-EDH-RSA-DES-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-EDH-DSS-DES-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-ADH-DES-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-DES-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-RC2-CBC-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-KRB5-RC2-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-KRB5-DES-CBC-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-KRB5-RC2-CBC-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-KRB5-DES-CBC-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-ADH-RC4-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-RC4-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-KRB5-RC4-SHA&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        },
        {
            &quot;AttributeName&quot;: &quot;EXP-KRB5-RC4-MD5&quot;,
            &quot;AttributeValue&quot;: &quot;false&quot;
        }
    ],
    &quot;PolicyName&quot;: &quot;ELBSecurityPolicy-2015-05&quot;,
    &quot;PolicyTypeName&quot;: &quot;SSLNegotiationPolicyType&quot;
}
</code></pre><p>Using a text editor, change the <code>PolicyName</code> attribute. For example: <code>"PolicyName": "ELBSecurityPolicy-2015-05"</code> Once you&rsquo;ve edited and saved the JSON file, restart the CLC. Once the CLC has restarted, use the <code>eulb-describe-lb-policies</code> command to verify that your new policy is listed. For example:</p><pre><code>POLICY	ELBSample-AppCookieStickinessPolicy	AppCookieStickinessPolicyType
POLICY	ELBSample-LBCookieStickinessPolicy	LBCookieStickinessPolicyType
POLICY	ELBSecurityPolicy-2014-10	SSLNegotiationPolicyType
POLICY	ELBSecurityPolicy-2015-02	SSLNegotiationPolicyType
POLICY	ELBSecurityPolicy-2011-08	SSLNegotiationPolicyType
POLICY	ELBSecurityPolicy-2015-05	SSLNegotiationPolicyType
POLICY	ELBSecurityPolicy-2014-01	SSLNegotiationPolicyType
POLICY	MyNewELBSecurityPolicy-2015-09	SSLNegotiationPolicyType
</code></pre><p>You can now use your new security policy using the <code>eulb-create-lb-policy</code> command. For more information, see <a href=https://www.eucastack.io/docs/user_guide/elb_intro/elb_examples_intro/elb_examples_ssl_negotiation/>Updating the SSL Negotiation Configuration</a> .</p></div><div class=td-content style=page-break-before:always><h1 id=pg-9eafb00077fc3a1a35dfa444899e3962>9.2.10 - Configuring Back-end Server Authentication</h1><p>When running a web application with HTTPS or SSL as the backend serverâ€™s protocol, you might want to authenticate the back-end servers using the public key of the back-end serverâ€™s certificate. This authentication can be used to ensure that back-end servers accept only encrypted communication and to ensure that the back-end servers have the correct certificate.To configure back-end server authentication:</p><p>Create a new loadbalancer with HTTPS as backend instanceâ€™s protocol:</p><pre><code>eulb-create-lb -l &quot;protocol=HTTPS,lb-port=443,instance-protocol=HTTPS,instance-port=8443,cert-id=arn:aws:iam::000550595745:server-certificate/mycert01&quot;\
                        -z one myloadbalancer
</code></pre><p>Create a new PublicKeyPolicyType policy for the load balancer. In the example below, â€˜server.crtâ€™ is the file containing the public key of the backend serverâ€™s certificate.</p><pre><code>eulb-create-lb-policy -n webservercert -t PublicKeyPolicyType -a &quot;name=PublicKey, value=$(&lt;./server.crt)&quot; myloadbalancer
</code></pre><p>Use the <code>eulb-describe-lb-policies</code> to ensure that the policy was created. For example:</p><pre><code>eulb-describe-lb-policies -p webservercert myloadbalancer
</code></pre><p>Create a new <code>BackendServerAuthenticationPolicyType</code> policy that refers to the public key policy created above.</p><pre><code>eulb-create-lb-policy -n webserverauthentication -t BackendServerAuthenticationPolicyType -a &quot;name=PublicKeyPolicyName, value=webservercert&quot; myloadbalancer
</code></pre><p>Make sure the policy is created. For example:</p><pre><code>eulb-describe-lb-policies -p webserverauthentication myloadbalancer
</code></pre><p>Set the created policy to the listener by specifying the instance&rsquo;s port number. For example:</p><pre><code>eulb-set-lb-policies-for-backend-server -i 443 -p webserverauthentication myloadbalancer
</code></pre><p>Make sure the policy is attached to the intended listener. For example:</p><pre><code>eulb-describe-lbs --show-long myloadbalancer
LOAD_BALANCER myloadbalancer
myloadbalancer-000550595745.lb.c-04.autoqa.qa1.eucalyptus-systems.com
{interval=30,target=TCP:8443,timeout=5,healthy-threshold=3,unhealthy-threshold=3} one \
{protocol=HTTPS,lb-port=443,instance-protocol=HTTPS,instance-port=8443,cert-id=arn:aws:iam::000550595745:server-certificate/mycert01,\
{ELBSecurityPolicy-2015-05}}
{instance-port=8443,policies={webserverauthentication}}
{ELBSecurityPolicy-2015-05,webservercert,webserverauthentication}
{owner-alias=000936883517,group-name=euca-internal-000550595745-myloadbalancer}
2015-10-12T20:55:52.08Z
internet-facing
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-43db79d13bfc91251cd4fc4343275495>9.2.11 - Enabling Cross-Zone Load Balancing</h1><p>When an ELB has instances in multiple available zones, enabling cross-zone load balancing will distribute traffics to instances across availability zones. If disabled, the load balancer in a zone will distribute traffics to instances within the zone. For example, if a Zone A has 10 instances, and a Zone B has 1 instance, and the client happens to use the load balancer of Zone B (via round-robin DNS), cross-zone load balancing will ensure that the clients will use all 11 instances, not just the one instance in Zone B.To enable cross-zone load balancing:</p><p>By default, cross-zone load balancing is not enabled for a new load balancer. To enable, modify the load balancer attribute using the eulb-modify-lb-attributes command. For example: <code>eulb-modify-lb-attributes myloadbalancer CrossZoneLoadBalancing.Enabled=true</code> Make sure the attribute is enabled. For example:</p><pre><code>eulb-describe-lb-attributes myloadbalancer
AccessLog.Enabled false
ConnectionDraining.Enabled  false
ConnectionSettings.IdleTimeout 60
CrossZoneLoadBalancing.Enabled true                
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-65ae084284fdc29b9fc2bf4bf58cabf6>9.2.12 - Accessing Load Balancer Logs</h1><p>To help analyze an applicationâ€™s performances or troubleshoot problems, you can capture detailed information for all requests coming through your load balancers. When enabled, such access logs will be captured and stored in the S3 bucket.To access ELB logs:</p><p>Before enabling the access logs, update the access control of your S3 (Eucalyptus object-storage-gateway) bucket so that Eucalyptusâ€™ load balancer has write permissions. The access control list requires the canonical ID of the grantee. To obtain the canonical ID of the load balancing service:<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>If your cloud is using VPCMIDO networking mode, use the command in the next step.</div></p><pre><code>eulb-describe-lbs --show-long --region devops-admin@region-1
LOAD_BALANCER myloadbalancer	
myloadbalancer-000476918024.lb.a-18.autoqa.qa1.eucalyptus-systems.com			
{interval=30,target=TCP:80,timeout=5,healthy-threshold=3,unhealthy-threshold=3	
cash,money i-6f2a1874,i-be660343	
{protocol=HTTP,lb-port=80,instance-protocol=HTTP,instance-port=80}					
{owner-alias=000865102303,group-name=euca-internal-000476918024-myloadbalancer}		
2015-09-29T18:11:33.761Z	
internet-facing
</code></pre><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Save the number at the end of the output to update the bucket&rsquo;s ACL in .</div><p>To obtain the canonical ID of the load balancing service in VPCMIDO networking mode:<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>If your cloud is not using VPCMIDO networking mode, use the command in the previous step.</div></p><pre><code>euserv-describe-services --filter service-type=loadbalancing --expert
SERVICE arn:euca:bootstrap:API_10.111.1.19:loadbalancing:API_10.111.1.19.loadbalancing/ enabled 25 
http://10.111.1.19:8773/services/LoadBalancing 
(eucalyptus)loadbalancing=000036660381:28323c32338354b20255a633830524c1224434cb1a5254c1d614614841586042
</code></pre><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Save the number at the end of the output to update the bucket&rsquo;s ACL in .</div><p>Use any S3 client tools to update the bucketâ€™s ACL. For example:</p><pre><code># aws --endpoint-url http://objectstorage.a-18.autoqa.qa1.eucalyptus-systems.com:8773/ s3 s3://webserverlog
# aws --endpoint-url http://objectstorage.a-18.autoqa.qa1.eucalyptus-systems.com:8773/ s3api put-bucket-acl --grant-write &quot;id=000865102303&quot; --bucket s3://webserverlog
</code></pre><p>Modify your load balancerâ€™s attributes to enable the access logs. For example:</p><pre><code>eulb-modify-lb-attributes myloadbalancer AccessLog.Enabled=true AccessLog.S3BucketName=webserverlog AccessLog.EmitInterval=5 AccessLog.S3BucketPrefix=myprefix
</code></pre><p>Check that the attribute has been updated correctly by using the <code>eulb-describe-lb-attributes</code> command:</p><pre><code>eulb-describe-lb-attributes myloadbalancer
AccessLog.EmitInterval  5
AccessLog.Enabled true
AccessLog.S3BucketName  webserverlog
AccessLog.S3BucketPrefix  myprefix
ConnectionDraining.Enabled  false
ConnectionSettings.IdleTimeout 60
CrossZoneLoadBalancing.Enabled true      
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-e2537d6cae270c2662113e6704686e49>10 - Using CloudWatch</h1><h1 id=using-cloudwatch>Using CloudWatch</h1><p>CloudWatch is a Eucalyptus service that enables you to monitor, manage, and publish various metrics, as well as configure alarm actions based on data from metrics. You can use the default metrics that come with Eucalyptus, or you can use your own metrics.CloudWatch collects raw data from your cloud&rsquo;s resources and generates the information into readable, near real-time metrics. These metrics are recorded for a period of two weeks. This allows you to access historical information and provides you with information about how your resource is performing.</p><p>To find out more about what CloudWatch is, see <a href=https://www.eucastack.io/docs/user_guide/using_monitoring/monitoring_oview/>CloudWatch Overview</a> .</p><p>To find out how to use CloudWatch, see <a href=https://www.eucastack.io/docs/user_guide/using_monitoring/monitoring_tasks/>CloudWatch Tasks</a> .</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ba38e0f8d65765ef9bcbb48ac325b0fd>10.1 - CloudWatch Overview</h1><h1 id=cloudwatch-overview>CloudWatch Overview</h1><p>This section describes the concepts and details you need to understand the CloudWatch service. This section also includes procedures to complete the most common tasks for CloudWatch.CloudWatch is a Eucalyptus service that collects, aggregates, and dispenses data from your cloud&rsquo;s resources. This data allows you to make operational and business decisions based on actual performance metrics. You can use CloudWatch to collect metrics about your cloud resources, such as the performance of your instances. You can also publish your own metrics directly to CloudWatch.</p><p>CloudWatch monitors the following cloud resources:</p><ul><li>instances</li><li>Elastic Block Store (EBS) volumes</li><li>Auto Scaling instances</li><li>Eucalyptus Load Balancers (ELB)</li></ul><h2 id=alarms>Alarms</h2><p>CloudWatch alarms help you make decisions more easily by automatically making changes to the resources you are monitoring, based on rules that you define. For example, you can create alarms that initiate Auto Scaling actions on your behalf. For more information about alarm tasks, see <a href=https://www.eucastack.io/docs/user_guide/using_monitoring/monitoring_tasks/monitoring_alarm/>Configuring Alarms</a> .</p><h2 id=common-use-cases>Common Use Cases</h2><p>A common use for CloudWatch is to keep your applications and services healthy and running efficiently. For example, CloudWatch can determine that your application runs best when network traffic remains below a certain threshold level on your instances. You can then create an automated procedure to ensure that you always have the right number of instances to match the amount of traffic you have.</p><p>Another use for CloudWatch is to diagnose problems by looking at system performance before and after a problem occurs. CloudWatch helps you identify the cause and verify your fix by tracking performance in real time.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-de26569f213c700b3e57db3b7012fd27>10.1.1 - CloudWatch Concepts</h1><p>This section describes the terminology and concepts you need in order to understand and use CloudWatch.</p><h2 id=metric>Metric</h2><p>A metric is a time-ordered set of data points. You can get metric data from Eucalyptus cloud resources (like instances or volumes), or you can publish your own set of custom metric data points to CloudWatch. You then retrieve statistics about those data points as an ordered set of time-series data.</p><p>Data points represent values of a variable over time. For example you can get metrics for the CPU usage of a particular instance, or for the latency of an elastic load balancer (ELB).</p><p>Each metric is uniquely defined by a name, a namespace, and zero or more dimensions. Each data point has a time stamp, and (optionally) a unit of measure. When you request statistics, the returned data stream is identified by namespace, metric name, dimension, and (optionally) the unit. For more information about Eucalyptus-supported metrics, see <a href=https://www.eucastack.io/docs/user_guide/using_monitoring/monitoring_oview/monitoring_metric_ref/>Namespaces, Metrics, and Dimensions</a> .</p><p>CloudWatch stores your metric data for two weeks. You can publish metric data from multiple sources, such as incoming network traffic from dozens of different instances, or requested page views from several different web applications. You can request statistics on metric data points that occur within a specified time window.</p><h2 id=namespace>Namespace</h2><p>A namespace is a conceptual container for a collection of metrics. Eucalyptus treats metrics in different namespaces as unique. This means that metrics from different services cannot mistakenly be aggregated into the same statistical set.</p><p>Namespace names are strings you define when you create a metric. The names must be valid XML characters, typically containing the alphanumeric characters &ldquo;0-9A-Za-z&rdquo; plus &ldquo;."(period), &ldquo;-&rdquo; (hyphen), &ldquo;_&rdquo; (underscore), &ldquo;/&rdquo; (slash), &ldquo;#&rdquo; (hash), and &ldquo;:&rdquo; (colon). All Eucalyptus services that provide CloudWatch data follow the convention AWS/<service>, such as AWS/EC2 and AWS/ELB. For more information, see <a href=https://www.eucastack.io/docs/user_guide/using_monitoring/monitoring_oview/monitoring_metric_ref/monitoring_namespaces/>Namespaces</a> .</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>A namespace name must be less than 256 characters. There is no default namespace. You must specify a namespace for each data element you put into CloudWatch.</div><h2 id=dimension>Dimension</h2><p>A dimension is a name-value pair that uniquely identifies a metric. A dimension helps you design a conceptual structure for your statistics plan. Because dimensions are part of the unique identifier for a metric, metric name, namespace, and dimension key-value pairs define unique metrics.</p><p>You specify dimensions when you create a metric with the euwatch-put-data command. Eucalyptus services that report data to CloudWatch also attach dimensions to each metric. You can use dimensions to filter result sets that CloudWatch queries return. For example, you can get statistics for a specific instance by calling euwatch-get-stats with the InstanceID dimension set to a specific instance ID.</p><p>For Eucalyptus metrics, CloudWatch can aggregate data across select dimensions. For example, if you request a metric in the AWS/EC2 namespace and do not specify any dimensions, CloudWatch aggregates all data for the specified metric to create the statistic that you requested. However, CloudWatch does not aggregate across dimensions for custom metrics</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>You can assign up to ten dimensions to a metric.</div><h2 id=time-stamp>Time Stamp</h2><p>Each metric data point must be marked with a time stamp. The time stamp can be up to two weeks in the past and up to two hours into the future. If you do not provide a time stamp, CloudWatch creates a time stamp for you based on the time the data element was received.</p><p>The time stamp you use in the request must be a dateTime object, with the complete date plus hours, minutes, and seconds. For example: 2007-01-31T23:59:59Z. For more information, go to <a href=http://www.w3.org/TR/xmlschema-2/#dateTime>http://www.w3.org/TR/xmlschema-2/#dateTime</a> . Although it is not required, we recommend you provide the time stamp in the Coordinated Universal Time (UTC or Greenwich Mean Time) time zone. When you retrieve your statistics from CloudWatch, all times reflect the UTC time zone.</p><h2 id=unit>Unit</h2><p>A unit represents a statistic&rsquo;s measurement in time or amount. For example, the units for the instance NetworkIn metric is Bytes because NetworkIn tracks the number of bytes that an instance receives on all network interfaces.</p><p>You can also specify a unit when you create a custom metric. Units help provide conceptual meaning to your data. Metric data points you create that specify a unit of measure, such as Percent, will be aggregated separately. The following list provides some of the more common units that CloudWatch supports:</p><ul><li>Seconds</li><li>Bytes</li><li>Bits</li><li>Percent</li><li>Count</li><li>Bytes/Second (bytes per second)</li><li>Bits/Second (bits per second)</li><li>Count/Second (counts per second)</li><li>None (default when no unit is specified)
Though CloudWatch attaches no significance to a unit, other applications can derive semantic information based on the unit you choose. When you publish data without specifying a unit, CloudWatch associates it with the None unit. When you get statistics without specifying a unit, CloudWatch aggregates all data points of the same unit together. If you have two otherwise identical metrics with different units, two separate data streams will be returned, one for each unit.</li></ul><h2 id=statistic>Statistic</h2><p>A statistic is computed aggregation of metric data over a specified period of time. CloudWatch provides statistics based on the metric data points you or Eucalyptus provide. Aggregations are made using the namespace, metric name, dimensions, and the data point unit of measure, within the time period you specify. The following table describes the available statistics.</p><table><thead><tr><th style=text-align:left>Statistic</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Minimum</td><td style=text-align:left>The lowest value observed during the specified period. You can use this value to determine low volumes of activity for your application.</td></tr><tr><td style=text-align:left>Maximum</td><td style=text-align:left>The highest value observed during the specified period. You can use this value to determine high volumes of activity for your application.</td></tr><tr><td style=text-align:left>Sum</td><td style=text-align:left>All values submitted for the matching metric added together. You can use this statistic for determining the total volume of a metric.</td></tr><tr><td style=text-align:left>Average</td><td style=text-align:left>The value of Sum / SampleCount during the specified period. By comparing this statistic with the Minimum and Maximum, you can determine the full scope of a metric and how close the average use is to the Minimum and Maximum. This comparison helps you to know when to increase or decrease your resources as needed.</td></tr><tr><td style=text-align:left>SampleCount</td><td style=text-align:left>The count (number) of data points used for the statistical calculation.</td></tr></tbody></table><h2 id=period>Period</h2><p>A period is the length of time, in seconds, associated with a specific CloudWatch statistic. Each statistic represents an aggregation of the metrics data collected for a specified period of time. You can adjust how the data is aggregated by varying the length of the period. A period can be as short as one minute (60 seconds) or as long as two weeks (1,209,600 seconds).</p><p>The values you select for the StartTime and EndTime options determine how many periods CloudWatch returns. For example, if you set values for the Period, EndTime, and StartTime options for 60 seconds, CloudWatch returns an aggregated set of statistics for each minute of the previous hour. If you want statistics aggregated into ten-minute blocks, set Period to 600. For statistics aggregated over the entire hour, use a Period value of 3600.</p><p>Periods are also an important part of the CloudWatch alarms feature. When you create an alarm to monitor a specific metric, you are asking CloudWatch to compare that metric to the threshold value that you supplied. You have control over how CloudWatch makes that comparison. You can specify the period over which the comparison is made, as well as how many consecutive periods the threshold must be breached before you are notified.</p><h2 id=aggregation>Aggregation</h2><p>CloudWatch aggregates statistics according a length of time that you set. You can publish as many data points as you want with the same or similar time stamps. CloudWatch aggregates these data points by period length. You can publish data points for a metric that share not only the same time stamp, but also the same namespace and dimensions.</p><p>Subsequent calls to euwatch-get-stats return aggregated statistics about those data points. You can even do this in one euwatch-put-data request. CloudWatch accepts multiple data points in the same euwatch-put-data call with the same time stamp. You can also publish multiple data points for the same or different metrics, with any time stamp. The size of a euwatch-put-data request, however, is limited to 8KB for HTTP GET requests and 40KB for HTTP POST requests. You can include a maximum of 20 data points in one PutMetricData request.</p><p>For large data sets that would make the use of euwatch-put-data impractical, CloudWatch allows you to insert a pre-aggregated data set called a StatisticSet. With StatisticSets you give CloudWatch the Min, Max, Sum, and SampleCount of a number of data points. A common use case for StatisticSets is when you are collecting data many times in a minute. For example, if you have a metric for the request latency of a server, it doesnâ€™t make sense to do a euwatch-put-data request with every request. We suggest you collect the latency of all hits to that server, aggregate them together once a minute and send that StatisticSet to CloudWatch.</p><p>CloudWatch doesn&rsquo;t differentiate the source of a metric. If you publish a metric with the same namespace and dimensions from different sources, CloudWatch treats this as a single metric. This can be useful for service metrics in a distributed, scaled system. For example, all the hosts in a web server application could publish identical metrics representing the latency of requests they are processing. CloudWatch treats these as a single metric, allowing you to get the statistics for minimum, maximum, average, and sum of all requests across your application.</p><h2 id=alarm>Alarm</h2><p>An alarm watches a single metric over a time period you set, and performs one or more actions based on the value of the metric relative to a given threshold over a number of time periods. CloudWatch alarms will not invoke actions just because they are in a particular state. The state must have changed and been maintained for a specified number of periods.</p><p>For example, <a href=https://www.eucastack.io/docs/user_guide/autoscaling_intro/>Auto Scaling</a> works with CloudWatch alarms to perform scaling activities. When an Auto Scaling activity reacts to a CloudWatch alarm, the cooldown period is the amount of time after the activity takes place where further Auto Scaling activity is suspended. This is to allow time for the Auto Scaling activities (such as new instance launches or terminations) to fully complete so that resources are not unnecessarily launched or terminated. You can specify this amount of time; if you don&rsquo;t specify a cooldown period, Auto Scaling uses a default cooldown period of 300 seconds (5 minutes).</p><p>After an alarm invokes an action due to a change in state, the alarm continues to invoke the action for every period that the alarm remains in the new state.</p><p>An alarm has three possible states:</p><ul><li><p>: The metric is within the defined threshold.</p></li><li><p>: The metric is outside of the defined threshold.</p></li><li><p>: The alarm has just started, the metric is not available, or not enough data is available for the metric to determine the alarm state.
The following lists some common features of alarms:</p></li><li><p>You can create up to 5000 alarms per Eucalyptus account. To create or update an alarm, use the command.</p></li><li><p>You can list any or all of the currently configured alarms, and list any alarms in a particular state using the command.</p></li><li><p>You can disable and enable alarms by using the and commands</p></li><li><p>You can test an alarm by setting it to any state using the command. This temporary state change lasts only until the next alarm comparison occurs.</p></li><li><p>Finally, you can view an alarm&rsquo;s history using the command. CloudWatch preserves alarm history for two weeks. Each state transition is marked with a unique time stamp. In rare cases, your history might show more than one notification for a state change. The time stamp enables you to confirm unique state changes.</p></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-3b5b122efee1ace175c6ccba6745c721>10.1.2 - Namespaces, Metrics, and Dimensions</h1><h1 id=namespaces-metrics-and-dimensions>Namespaces, Metrics, and Dimensions</h1><p>This section discusses the namespaces, metrics, and dimensions that CloudWatch supports for Eucalyptus services.</p></div><div class=td-content><h1 id=pg-88efa26658a001d560fce3ae313b2d65>10.1.2.1 - Namespaces</h1><p>All Eucalyptus services that provide CloudWatch data use a namespace string, beginning with &ldquo;AWS/&rdquo;. This section describes the service namespaces.The following table lists the namespaces for services that push metric data points to CloudWatch.</p><table><thead><tr><th style=text-align:left>Service</th><th style=text-align:left>Namespace</th></tr></thead><tbody><tr><td style=text-align:left>Elastic Block Store</td><td style=text-align:left>AWS/EBS</td></tr><tr><td style=text-align:left>Elastic Compute Cloud</td><td style=text-align:left>AWS/EC2</td></tr><tr><td style=text-align:left>Auto Scaling</td><td style=text-align:left>AWS/Autoscaling</td></tr><tr><td style=text-align:left>Elastic Load Balancing</td><td style=text-align:left>AWS/ELB</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-47515a2b2793917872c10fdb522c10da>10.1.2.2 - Instance Metrics and Dimensions</h1><p>This section describes the instance metrics and dimensions available to CloudWatch.</p><h2 id=available-metrics-for-instances>Available Metrics for Instances</h2><table><thead><tr><th style=text-align:left>Metric</th><th style=text-align:left>Description</th><th style=text-align:left>Unit</th></tr></thead><tbody><tr><td style=text-align:left>CPUUtilization</td><td style=text-align:left>The percentage of allocated EC2 compute units that are currently in use on the instance. This metric identifies the processing power required to run an application upon a selected instance.</td><td style=text-align:left>Percent</td></tr><tr><td style=text-align:left>DiskReadOps</td><td style=text-align:left>Completed read operations from all ephemeral disks available to the instance (if your instance uses EBS, see EBS Metrics.) This metric identifies the rate at which an application reads a disk. This can be used to determine the speed in which an application reads data from a hard disk.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>DiskWriteOps</td><td style=text-align:left>Completed write operations to all ephemeral disks available to the instance (if your instance uses Amazon EBS, see Amazon EBS Metrics.) This metric identifies the rate at which an application writes to a hard disk. This can be used to determine the speed in which an application saves data to a hard disk.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>DiskReadBytes</td><td style=text-align:left>Bytes read from all ephemeral disks available to the instance (if your instance uses Amazon EBS, see Amazon EBS Metrics.) This metric is used to determine the volume of the data the application reads from the hard disk of the instance. This can be used to determine the speed of the application.</td><td style=text-align:left>Bytes</td></tr><tr><td style=text-align:left>DiskWriteBytes</td><td style=text-align:left>Bytes written to all ephemeral disks available to the instance (if your instance uses Amazon EBS, see Amazon EBS Metrics.) This metric is used to determine the volume of the data the application writes onto the hard disk of the instance. This can be used to determine the speed of the application.</td><td style=text-align:left>Bytes</td></tr><tr><td style=text-align:left>NetworkIn</td><td style=text-align:left>The number of bytes received on all network interfaces by the instance. This metric identifies the volume of incoming network traffic to an application on a single instance.</td><td style=text-align:left>Bytes</td></tr><tr><td style=text-align:left>NetworkOut</td><td style=text-align:left>The number of bytes sent out on all network interfaces by the instance. This metric identifies the volume of outgoing network traffic to an application on a single instance.</td><td style=text-align:left>Bytes</td></tr><tr><td style=text-align:left>StatusCheckFailed</td><td style=text-align:left>A combination of StatusCheckFailed_Instance and StatusCheckFailed_System that reports if either of the status checks has failed. Values for this metric are either 0 (zero) or 1 (one.) A zero indicates that the status check passed. A one indicates a status check failure.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>StatusCheckFailed_Instance</td><td style=text-align:left>Reports whether the instance has passed the EC2 instance status check in the last 5 minutes. Values for this metric are either 0 (zero) or 1 (one.) A zero indicates that the status check passed. A one indicates a status check failure.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>StatusCheckFailed_System</td><td style=text-align:left>Reports whether the instance has passed the EC2 system status check in the last 5 minutes. Values for this metric are either 0 (zero) or 1 (one.) A zero indicates that the status check passed. A one indicates a status check failure.</td><td style=text-align:left>Count</td></tr></tbody></table><h2 id=available-dimensions-for-instances>Available Dimensions for Instances</h2><p>You can filter the instance data using any of the dimensions in the following table.</p><table><thead><tr><th style=text-align:left>Dimension</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>AutoScalingGroupName</td><td style=text-align:left>This dimension filters the data you request for all instances in a specified capacity group. An AutoScalingGroup is a collection of instances you define if you&rsquo;re using the Auto Scaling service. This dimension is available only for instance metrics when the instances are in such an Auto Scaling group.</td></tr><tr><td style=text-align:left>ImageId</td><td style=text-align:left>This dimension filters the data you request for all instances running this Eucalyptus Machine Image (EMI).</td></tr><tr><td style=text-align:left>InstanceId</td><td style=text-align:left>This dimension filters the data you request for the identified instance only. This helps you pinpoint an exact instance from which to monitor data.</td></tr><tr><td style=text-align:left>InstanceType</td><td style=text-align:left>This dimension filters the data you request for all instances running with this specified instance type. This helps you categorize your data by the type of instance running. For example, you might compare data from an m1.small instance and an m1.large instance to determine which has the better business value for your application.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-efeec537c451e9e7ddb811e740c25c4b>10.1.2.3 - EBS Metrics and Dimensions</h1><p>This section describes the Elastic Block Store (EBS) metrics and dimensions available to CloudWatch.</p><h2 id=available-metrics-for-ebs>Available Metrics for EBS</h2><table><thead><tr><th style=text-align:left>Metric</th><th style=text-align:left>Description</th><th style=text-align:left>Unit</th></tr></thead><tbody><tr><td style=text-align:left>VolumeReadBytes</td><td style=text-align:left>The total number of bytes transferred in the period.</td><td style=text-align:left>Bytes</td></tr><tr><td style=text-align:left>VolumeWriteBytes</td><td style=text-align:left>The total number of bytes transferred in the period.</td><td style=text-align:left>Bytes</td></tr><tr><td style=text-align:left>VolumeReadOps</td><td style=text-align:left>The total number of operations in the period.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>VolumeWriteOps</td><td style=text-align:left>The total number of operations in the period.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>VolumeTotalReadTime</td><td style=text-align:left>The total number of seconds spent by all operations that completed in the period. If multiple requests are submitted at the same time, this total could be greater than the length of the period. For example, say the period is 5 minutes (300 seconds); if 700 operations completed during that period, and each operation took 1 second, the value would be 700 seconds.</td><td style=text-align:left>Seconds</td></tr><tr><td style=text-align:left>VolumeTotalWriteTime</td><td style=text-align:left>The total number of seconds spent by all operations that completed in the period. If multiple requests are submitted at the same time, this total could be greater than the length of the period. For example, say the period is 5 minutes (300 seconds); if 700 operations completed during that period, and each operation took 1 second, the value would be 700 seconds.</td><td style=text-align:left>Seconds</td></tr><tr><td style=text-align:left>VolumeIdleTime</td><td style=text-align:left>The total number of seconds in the period when no read or write operations were submitted.</td><td style=text-align:left>Seconds</td></tr><tr><td style=text-align:left>VolumeQueueLength</td><td style=text-align:left>The number of read and write operation requests waiting to be completed in the period.</td><td style=text-align:left>Count</td></tr></tbody></table><h2 id=available-dimensions-for-ebs>Available Dimensions for EBS</h2><p>The only dimension that EBS sends to CloudWatch is the Volume ID. This means that all available statistics are filtered by Volume ID.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-6310ab278a92a17016f53fc8d51fd556>10.1.2.4 - Auto Scaling Metrics and Dimensions</h1><p>This section discusses the Auto Scaling metrics and dimensions available to CloudWatch.</p><h2 id=available-metrics-for-auto-scaling>Available Metrics for Auto Scaling</h2><table><thead><tr><th style=text-align:left>Metric</th><th style=text-align:left>Description</th><th style=text-align:left>Unit</th></tr></thead><tbody><tr><td style=text-align:left>GroupMinSize</td><td style=text-align:left>The minimum size of the Auto Scaling group.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>GroupMaxSize</td><td style=text-align:left>The maximum size of the Auto Scaling group.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>GroupDesiredCapacity</td><td style=text-align:left>The number of instances that the Auto Scaling group attempts to maintain.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>GroupInServiceInstances</td><td style=text-align:left>The number of instances that are running as part of the Auto Scaling group. This metric does not include instances that are pending or terminating.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>GroupPendingInstances</td><td style=text-align:left>The number of instances that are pending. A pending instance is not yet in service. This metric does not include instances that are in service or terminating.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>GroupTerminatingInstances</td><td style=text-align:left>The number of instances that are in the process of terminating. This metric does not include instances that are in service or pending.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>GroupTotalInstances</td><td style=text-align:left>The total number of instances in the Auto Scaling group. This metric identifies the number of instances that are in service, pending, and terminating.</td><td style=text-align:left>Count</td></tr></tbody></table><h2 id=available-dimensions-for-auto-scaling>Available Dimensions for Auto Scaling</h2><p>The only dimension that Auto Scaling sends to CloudWatch is the name of the Auto Scaling group. This means that all available statistics are filtered by Auto Scaling group name.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-fcd023d86753d7a388178c89e8d61668>10.1.2.5 - ELB Metrics and Dimensions</h1><p>This section discusses the Elastic Load Balancing (ELB) metrics and dimensions available to CloudWatch.</p><h2 id=available-metrics-for-elb>Available Metrics for ELB</h2><table><thead><tr><th style=text-align:left>Metric</th><th style=text-align:left>Description</th><th style=text-align:left>Unit</th></tr></thead><tbody><tr><td style=text-align:left>Latency</td><td style=text-align:left>Time elapsed after the request leaves the load balancer until it receives the corresponding response. Valid Statistics: Minimum</td><td style=text-align:left>Maximum</td></tr><tr><td style=text-align:left>RequestCount</td><td style=text-align:left>The number of requests handled by the load balancer.</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>HealthyHostCount</td><td style=text-align:left>The number of healthy instances registered with the load balancer in a specified availability zone. Healthy instances are those that have not failed more health checks than the value of the unhealthy threshold. Constraints: You must provide both LoadBalancerName and AvailabilityZone dimensions for this metric.Valid Statistics: Minimum</td><td style=text-align:left>Maximum</td></tr><tr><td style=text-align:left>UnHealthyHostCount</td><td style=text-align:left>The number of unhealthy instances registered with the load balancer. These are instances that have failed more health checks than the value of the unhealthy threshold. Constraints: You must provide both LoadBalancerName and AvailabilityZone dimensions for this metric.Valid Statistics: Minimum</td><td style=text-align:left>Maximum</td></tr><tr><td style=text-align:left>HTTPCode_ELB_4XX</td><td style=text-align:left>Count of HTTP response codes generated by ELB that are in the 4xx (client error) series. Valid Statistics: Sum</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>HTTPCode_ELB_5XX</td><td style=text-align:left>Count of HTTP response codes generated by ELB that are in the 5xx (server error) series. ELB can generate 5xx errors if no back-end instances are registered, no healthy back-end instances, or the request rate exceeds ELB&rsquo;s current available capacity. This response count does not include any responses that were generated by back-end instances. Valid Statistics: Sum</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>HTTPCode_Backend_2XX</td><td style=text-align:left>Count of HTTP response codes generated by back-end instances that are in the 2xx (success) series. Valid Statistics: Sum</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>HTTPCode_Backend_3XX</td><td style=text-align:left>Count of HTTP response codes generated by back-end instances that are in the 3xx (user action required) series. Valid Statistics: Sum</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>HTTPCode_Backend_4XX</td><td style=text-align:left>Count of HTTP response codes generated by back-end instances that are in the 4xx (client error) series. This response count does not include any responses that were generated by ELB. Valid Statistics: Sum</td><td style=text-align:left>Count</td></tr><tr><td style=text-align:left>HTTPCode_Backend_5XX</td><td style=text-align:left>Count of HTTP response codes generated by back-end instances that are in the 5xx (server error) series. This response count does not include any responses that were generated by ELB. Valid Statistics: Sum</td><td style=text-align:left>Count</td></tr></tbody></table><h2 id=available-dimensions-for-elb>Available Dimensions for ELB</h2><p>You can use the currently available dimensions for ELB to refine the metrics returned by a query. For example, you could use <code>HealthyHostCount</code> and dimensions <code>LoadBalancerName</code> and <code>AvailabilityZone</code> to get the average number of healthy instances behind the specified load balancer within the specified Availability Zone for a given period of time.</p><p>You can aggregate ELB data along any of the following dimensions shown in the following table.</p><table><thead><tr><th style=text-align:left>Metric</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>LoadBalancerName</td><td style=text-align:left>Limits the metric data to instances that are connected to the specified load balancer.</td></tr><tr><td style=text-align:left>AvailabilityZone</td><td style=text-align:left>Limits the metric data to load balancers in the specified availability zone.</td></tr></tbody></table></div><div class=td-content style=page-break-before:always><h1 id=pg-8335412c70063736f4ead3d2c0b2a905>10.2 - CloudWatch Tasks</h1><h1 id=cloudwatch-tasks>CloudWatch Tasks</h1><p>This section details the tasks you can perform using CloudWatch.This section expands on the basic concepts presented in the preceding section (see <a href=https://www.eucastack.io/docs/user_guide/using_monitoring/monitoring_oview/>CloudWatch Overview</a> and includes procedures for using CloudWatch. This section also shows you how to view metrics that Eucalyptus services provide to CloudWatch and how to publish custom metrics with CloudWatch.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-510e16c7fba8408b8a3310fa823896df>10.2.1 - Configuring Monitoring</h1><h1 id=configuring-monitoring>Configuring Monitoring</h1><p>This section describes how to enable and disable monitoring for your cloud resources.</p></div><div class=td-content><h1 id=pg-09a589afd5cc8a4a8d929168058bb87f>10.2.1.1 - Enable Monitoring</h1><p>This section describes steps for enabling monitoring on your cloud resources.To enable monitoring on your resources, following the steps for your resource.</p><h2 id=enable-monitoring-for-an-instance>Enable monitoring for an instance</h2><p>To enable monitoring for a running instance, enter the following command:</p><pre><code>euca-monitor-instances [instance_id]
</code></pre><p>To enable monitoring when you launch an instance, enter the following command:</p><pre><code>euca-run-instances [image_id] -k gsg-keypair --monitor
</code></pre><h2 id=enable-monitoring-for-a-scaling-group>Enable monitoring for a scaling group</h2><p>To enable monitoring for an existing Auto Scaling group: Create a launch configuration with <code>--monitoring-enabled</code> option. Make a euscale-update-auto-scaling-group request to update your Auto Scaling group with the launch configuration you created in the previous step. Auto Scaling will enable monitoring for new instances that it creates. Choose one of the following actions to deal with all existing instances in the Auto Scaling group:</p><table><thead><tr><th style=text-align:left>To . . .</th><th style=text-align:left>Do this . . .</th></tr></thead><tbody><tr><td style=text-align:left>Preserve existing instances</td><td style=text-align:left>Make a euca-monitor-instances request for all existing instances to enable monitoring.</td></tr><tr><td style=text-align:left>Terminate existing instances</td><td style=text-align:left>Make a euscale-terminate-instance-in-auto-scaling-group request for all existing instances. Auto Scaling will use the updated launch configuration to create replacement instances with monitoring enabled.</td></tr></tbody></table><p>To enable monitoring when you create a new Auto Scaling group: Create a launch configuration with <code>--monitoring-enabled</code> option.</p><h2 id=enable-monitoring-for-a-load-balancer>Enable monitoring for a load balancer</h2><p>Elastic Load Balancing (ELB) sends metrics and dimensions for all load balancers to CloudWatch. By default, you do not need to specifically enable monitoring.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>ELB only sends CloudWatch metrics when requests are sent through the load balancer. If there are no requests or data for a given metric, ELB does not report to CloudWatch. If there are requests sent through the load balancer, ELB measures and sends metrics for that load balancer in 60-second intervals.</div></div><div class=td-content style=page-break-before:always><h1 id=pg-507278909208e5e78085e4cb24776f25>10.2.1.2 - Disable Monitoring</h1><p>This section describes steps for disabling monitoring on your cloud resources.To disable monitoring on your resources, following the steps for your resource.</p><h2 id=disable-monitoring-for-an-instance>Disable monitoring for an instance</h2><p>To disable monitoring for a running instance, enter the following command:</p><pre><code>euca-unmonitor-instances [instance_id]
</code></pre><h2 id=disable-monitoring-for-a-scaling-group>Disable monitoring for a scaling group</h2><p>To enable monitoring for an existing Auto Scaling group: Create a launch configuration with <code>--monitoring-disabled</code> option. Make a euscale-update-auto-scaling-group request to update your Auto Scaling group with the launch configuration you created in the previous step. Auto Scaling will disable monitoring for new instances that it creates. Choose one of the following actions to deal with all existing instances in the Auto Scaling group:</p><table><thead><tr><th style=text-align:left>To . . .</th><th style=text-align:left>Do this . . .</th></tr></thead><tbody><tr><td style=text-align:left>Preserve existing instances</td><td style=text-align:left>Make a euca-unmonitor-instances request for all existing instances to disable monitoring.</td></tr><tr><td style=text-align:left>Terminate existing instances</td><td style=text-align:left>Make a euscale-terminate-instance-in-auto-scaling-group request for all existing instances. Auto Scaling will use the updated launch configuration to create replacement instances with monitoring disabled.</td></tr></tbody></table><p>To enable monitoring when you create a new Auto Scaling group: Create a launch configuration with <code>--monitoring-disabled</code> option.</p><h2 id=disable-monitoring-for-a-load-balancer>Disable monitoring for a load balancer</h2><p>There is no way to disable monitoring for a load balancer.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-0d91fb6ab60e290d5d3123d4919a2041>10.2.2 - Viewing and Publishing Metrics</h1><h1 id=viewing-and-publishing-metrics>Viewing and Publishing Metrics</h1><p>This section describes how to view Eucalyptus metrics as well as how to publish your own metrics.</p></div><div class=td-content><h1 id=pg-31655e3bc3911b43dbbd5461613ac43d>10.2.2.1 - List Available Metrics</h1><p>You can list available metrics via Euca2ools.<strong>To list available metrics:</strong></p><p>Enter the following command.</p><pre><code>euwatch-list-metrics
</code></pre><p>Eucalyptus returns a listing of all metrics, as shown in the following partial example output:</p><pre><code>Metric Name         Namespace  Dimensions
CPUUtilization      AWS/EC2    {InstanceId=i-5431413d}
CPUUtilization      AWS/EC2    {InstanceType=m1.medium}
DiskReadBytes       AWS/EC2    {InstanceId=i-1d3d4d74}
DiskReadBytes       AWS/EC2    {InstanceType=m1.medium}
DiskReadOps         AWS/EC2    {InstanceId=i-d3c8baba}
DiskReadOps         AWS/EC2    {InstanceType=m1.medium}
DiskWriteBytes      AWS/EC2    {InstanceId=i-6732420e}	
DiskWriteBytes      AWS/EC2    {InstanceType=m1.medium}
DiskWriteOps        AWS/EC2    {InstanceId=i-e03d4d89}
DiskWriteOps        AWS/EC2    {InstanceType=m1.medium}
NetworkIn           AWS/EC2    {InstanceId=i-e0304089}
NetworkIn           AWS/EC2    {InstanceType=m1.medium}
NetworkOut          AWS/EC2    {InstanceId=i-69334300}
NetworkOut          AWS/EC2    {InstanceType=m1.medium}
StatusCheckFailed		 AWS/EC2 {InstanceId=i-6f8418e6}
StatusCheckFailed      	  AWS/EC2 {InstanceType=m1.medium}
StatusCheckFailed_Instance      AWS/EC2 {InstanceId=i-6f8418e6}
StatusCheckFailed_Instance      AWS/EC2 {InstanceType=m1.medium}
StatusCheckFailed_System        AWS/EC2 {InstanceId=i-6f8418e6}
StatusCheckFailed_System        AWS/EC2 {InstanceType=m1.medium}
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-4a58c6e031aaa184531b2d009b2ee36a>10.2.2.2 - Get Statistics for a Metric</h1><p>You can get statistics for metrics via Euca2ools.<strong>To get statistics for a metric:</strong></p><p>Enter the following command.</p><pre><code> euwatch-get-stats -n NAMESPACE -s STAT1,STAT2,...
            			[--dimensions KEY1=VALUE1,KEY2=VALUE2,...]
            			[--start-time YYYY-MM-DDThh:mm:ssZ]
            			[--end-time YYYY-MM-DDThh:mm:ssZ] [--period SECONDS]
            			[--unit UNIT] [--show-empty-fields] [-U URL]
            			[--region USER@REGION] [-I KEY_ID] [-S KEY]
            			[--security-token TOKEN] [--debug] [--debugger]
            			[--version] [-h]
            			METRIC
</code></pre><p>The following example returns the average CPU utilization for the i-c08804a9 instance at one hour resolution.</p><pre><code>euwatch-get-stats --namespace &quot;AWS/EC2&quot; --statistics &quot;Average&quot; \
--dimensions &quot;InstanceId=i-c08804a9&quot; --start-time 2016-12-14T23:00:00.000Z \
--end-time 2016-12-15T23:00:00.000Z --period 3600  CPUUtilization
</code></pre><p>The following example returns CPU utilization for all of your cloud&rsquo;s instances.</p><pre><code>euwatch-get-stats --namespace &quot;AWS/EC2&quot; --statistics &quot;Average,Minimum,Maximum&quot; \
--start-time 2016-02-14T23:00:00.000Z --end-time 2016-03-14T23:00:00.000Z \
--period 3600 CPUUtilization
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-c0f64dfbb19c23bdb97ba7dd7a1ec5dc>10.2.2.3 - Publish Custom Metrics</h1><p>CloudWatch allows you to publish your own metrics, such as application performance, system health, or customer usage.</p><h2 id=publish-a-single-data-point>Publish a single data point</h2><p>To publish a single data point for a new or existing metric, call euwatch-put-data with one value and time stamp. For example, the following actions each publish one data point:</p><pre><code>euwatch-put-data --metric-name PageViewCount --namespace &quot;TestService&quot; --value 2 --timestamp 2011-03-14T12:00:00.000Z
euwatch-put-data --metric-name PageViewCount --namespace &quot;TestService&quot; --value 4 --timestamp 2011-03-14T12:00:01.000Z
euwatch-put-data --metric-name PageViewCount --namespace &quot;TestService&quot; --value 5 --timestamp 2011-03-14T12:00:02.000Z
</code></pre><p>You can publish data points with time stamps as granular as one-thousandth of a second. However, CloudWatch aggregates the data to a minimum granularity of 60 seconds. For example, the <code>PageViewCount</code> metric from the previous examples contains three data points with time stamps just seconds apart. CloudWatch aggregates the three data points because they all have time stamps within a 60-second period.</p><p>CloudWatch uses 60-second boundaries when aggregating data points. For example, CloudWatch aggregates the data points from the previous example because all three data points fall within the 60-second period that begins at 2011-03-14T12:00:00.000Z and ends at 2011-03-14T12:00:59.999Z.</p><h2 id=publish-statistic-sets>Publish statistic sets</h2><p>You can also aggregate your data before you publish to CloudWatch. When you have multiple data points per minute, aggregating data minimizes the number of calls to euwatch-put-data . For example, instead of calling euwatch-put-data multiple times for three data points that are within three seconds of each other, you can aggregate the data into a statistic set that you publish with one call:</p><pre><code>euwatch-put-data --metric-name PageViewCount --namespace &quot;TestService&quot; -s &quot;Sum=11,Minimum=2,Maximum=5,SampleCount=3&quot; --timestamp 2011-03-14T12:00:00.000
</code></pre><h2 id=publish-the-value-zero>Publish the value zero</h2><p>When your data is more sporadic and you have periods that have no associated data, you can choose to publish the value zero (0) for that period or no value at all. You might want to publish zero instead of no value if you use periodic calls to PutMetricData to monitor the health of your application. For example, you can set an Amazon CloudWatch alarm to notify you if your application fails to publish metrics every five minutes. You want such an application to publish zeros for periods with no associated data.</p><p>You might also publish zeros if you want to track the total number of data points or if you want statistics such as minimum and average to include data points with the value 0.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-a6b482304590bdee0ed027c6050cf792>10.2.2.4 - Modify Metric Polling Timing</h1><p>You can modify metrics timing and reporting defaults.When using the default CloudWatch properties, metrics reporting can take around 15 minutes:</p><ol><li>5 minutes to receive a sensor data point for an instance.</li><li>5 more minutes to receive a second sensor data point for an instance.</li><li>1 more minute to calculate the difference between these two and send a single data point to CloudWatch.</li><li>1 more minute for CloudWatch to put the data in the database, making it available for a call.</li><li>5 more minutes for info to be available in the database.</li></ol><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>The above workflow is sequential and cumulative.</div><p>The sensor data point timing values can be shortened by changing variables in the CLC.</p><p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>These changes will increase network traffic as polling will be done more frequently.</div><strong>To modify metrics defaults:</strong></p><p>Modify the default polling interval CLC variable to a number less than 5.</p><pre><code>cloud.monitor.default_poll_interval_mins
</code></pre><p>This is how often the CLC sends a request to the CC for sensor data. Default value is 5 minutes. Modify the history size CLC variable to a number less than 5.</p><pre><code>cloud.monitor.history_size
</code></pre><p>This is how many data value samples are sent in each sensor data request. The default value is 5. The frequency requests is either 1 minute (if the <code>cloud.monitor.default_poll_interval_mins</code> is 1 minute) or half the value of <code>cloud.monitor.default_poll_interval_mins</code> if that value is greater). So by default, with a <code>cloud.monitor.default_poll_interval_mins</code> of 5 minutes and <code>cloud.monitor.history_size</code> size of 5, every 5 minutes the CLC asks for the last 5 data points from the CC, which should be timed for every 2.5 minutes (e.g., 2.5 minutes ago, 5 minutes ago, 7.5 minutes ago, and 10 minutes ago).<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>These values may be skewed a bit based on the time the CC uses.</div></p></div><div class=td-content style=page-break-before:always><h1 id=pg-4ffb6602b363163032c20bc9576ac0ca>10.2.3 - Configuring Alarms</h1><h1 id=configuring-alarms>Configuring Alarms</h1><p>This section describes how to create, test, and delete and alarm.</p></div><div class=td-content><h1 id=pg-b324598b5d78202fe7038ed12b933f84>10.2.3.1 - Create an Alarm</h1><p>You can create a CloudWatch alarm using a resource&rsquo;s metric, and then add an action using the actionâ€™s dedicated Amazon Resource Name (ARN). You can add the action to any alarm state.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Eucalyptus currently only supports actions for executing Auto Scaling policies.</div>To create an alarm, perform the following step.</p><p>Enter the following command:</p><pre><code>euwatch-put-metric-alarm [alarm_name] --unit Percent --namespace &quot;AWS/EC2&quot; 
-- dimensions &quot;InstanceId=[instance_id]&quot; --statistic [statistic] --metric-name	
[metric] --comparison-operator [operator] --threshold [value] --period	
[seconds] --evaluation-periods [value] -- alarm-actions [action]
</code></pre><p>For example, the following triggers an Auto Scaling policy if the average CPUUtilization is less than 10 percent over a 24 hour period.</p><pre><code>euwatch-put-metric-alarm test-Alarm --unit Percent --namespace &quot;AWS/EC2&quot; 
-- dimensions &quot;InstanceId=i-abc123&quot; --statistic Average --metric-name CPUUtilization 
--comparison-operator LessThanThreshold --threshold 10 --period 86400 
--evaluation-periods 4 -- alarm-actions arn:aws:autoscaling::429942273585:scalingPolicy:
12ad560b-58b2-4051-a6d3-80e53b674de4:autoScalingGroupName/testgroup01:
policyName/testgroup01-pol01
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-4505c07adc12e8c41df5e2928668541d>10.2.3.2 - Test an Alarm</h1><p>You can test the CloudWatch alarms by temporarily changing the state of your alarm to &ldquo;ALARM&rdquo; using the command: euwatch-set-alarm-state .</p><pre><code>euwatch-set-alarm-state --alarm-name TestAlarm --state ALARM
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-5953f3e5b73a1493608731018d21703d>10.2.3.3 - Delete an Alarm</h1><p>To delete an alarm, perform the following step.</p><p>Enter the following command:</p><pre><code>euwatch-delete-alarms [alarm_name]
</code></pre><p>For example, to delete an alarm named <code>TestAlarm</code> enter:</p><pre><code>euwatch-delete-alarms TestAlarm
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-88e53ce2fba838d96249ddad99d4cbf9>11 - Using Object Storage</h1><h1 id=using-object-storage>Using Object Storage</h1><p>Scalable object storage is composed of two parts: the object storage gateway and the object storage backend. This section explains storage and how to access it.The object storage gateway (OSG) receives user requests and authorizes these requests using the Eucalyptus identity services. For more information about identity services, see <a href=https://www.eucastack.io/docs/user_guide/using_access/>Managing Access</a> .</p></div><div class=td-content style=page-break-before:always><h1 id=pg-28970e2b1f6059613beb141748479142>11.1 - Access Object Storage</h1><p>You can use your favorite S3 client (for example, ) to interact with Eucalyptus.To access object storage:</p><p>Replace your S3_URL with the IP address of the OSG you wish to interact with and the service path with <code>/services/objectstorage</code> instead of <code>/services/Walrus</code> . For example:</p><pre><code>S3_URL = http://&lt;OSG IP&gt;:8773/services/objectstorage
</code></pre><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>If you have DNS enabled, you may use the &ldquo;objectstorage&rdquo; prefix to access your object storage. Eucalyptus will return a list of IPs that correspond to OSGs that are in the state.</div></div><div class=td-content style=page-break-before:always><h1 id=pg-02cba64fa23838de5af5870774334303>12 - Using Route53</h1><h1 id=using-route53>Using Route53</h1><p>Eucalyptus Route53 is an integrated Domain Name System (DNS) web service. Route53 allows end users to access your cloud resources using names that you control.</p><p>Route53 seamlessly connects user requests to Eucalyptus controlled infrastructure â€“ including EC2 instances, Elastic Load Balancers, and S3 buckets â€“ it can also be used to route users to external infrastructure.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Route53 is a tech preview service so should be used accordingly.</div></div><div class=td-content style=page-break-before:always><h1 id=pg-99545870fdb7b8ece45ca25e77436db3>12.1 - Route53 Concepts</h1><p>This section describes the important concepts for the Route53 service and for Domain Name System (DNS)</p><h3 id=public-and-private-hosted-zones>Public and Private Hosted Zones</h3><p>A public hosted zone describes how to route traffic for a public domain, such as <strong>example.com</strong>, and its subdomains. Information in a public hosted zone is available to anyone that can connect to your Eucalyptus deployment.</p><p>A private hosted zone describes how to route traffic for a domain and its subdomains within a VPC managed using Eucalyptus EC2 VPC service. Private zones are useful for repeatable deployments using well-known names.</p><h3 id=resource-record-sets>Resource Record Sets</h3><p>After you create a hosted zone for your domain, such as <strong>example.com</strong>, you create resource record sets to tell the Domain Name System (DNS) how to route traffic for that domain.</p><p>For example you would create an <strong>A</strong> record to map the name <strong>resource.example.com</strong> to the public IP address of an EC2 instance.</p><h2 id=dns-concepts>DNS Concepts</h2><p>Important concepts related to underlying DNS functionality are:</p><ul><li><strong>Alias</strong> : An alias connects a name to a cloud resource such as an Elastic Load Balancer</li><li><strong>CName</strong> : A <em>CNAME</em> resource record redirects to another name. <em>CNAMES</em> are often used with S3 buckets.</li><li><strong>IP Address</strong> : An <em>A</em> resource record maps a name to an IP address used to access a resource such as an EC2 instance.</li><li><strong>TTL</strong> : The Time To Live (TTL) of a resource record is important for controlling how long clients can cache DNS information.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-f146d3642318659063bc98995e4793ad>12.2 - Route53 Usage</h1><p>This section describes some options for access to the Route53 service and shows some example usage.</p><h2 id=using-the-aws-cli>Using the AWS CLI</h2><p>The AWS CLI can be used to access Route53. Use of the Eucalyptus AWS CLI plug-in is assumed in these examples.</p><p>To list hosted zones:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws route53 list-hosted-zones</span>
</span></span><span style=display:flex><span>HOSTEDZONES	e001e659-32ac-4fd5-b45a-f7e6d6420f9b	/hostedzone/ZAAW4ODX2K7WOL	subdomain.example.com.	<span style=color:#0000cf;font-weight:700>3</span>
</span></span><span style=display:flex><span>CONFIG	Private zone <span style=color:#204a87;font-weight:700>for</span> subdomain.example.com in vpc-837bc081de161f8c0	True
</span></span></code></pre></div><p>To list resource records for a hosted zone:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws route53 list-resource-record-sets --hosted-zone-id ZAAW4ODX2K7WOL</span>
</span></span><span style=display:flex><span>RESOURCERECORDSETS	alias.subdomain.example.com.	0	A
</span></span><span style=display:flex><span>RESOURCERECORDSETS	cname.subdomain.example.com.	300	CNAME
</span></span><span style=display:flex><span>RESOURCERECORDS	name.subdomain.example.com
</span></span><span style=display:flex><span>RESOURCERECORDSETS	name.subdomain.example.com.	300	A
</span></span><span style=display:flex><span>RESOURCERECORDS	10.20.30.43
</span></span></code></pre></div><p>The AWS CLI can be used to create and delete hosted zones and to change resource record sets.</p><h2 id=using-cloudformation>Using CloudFormation</h2><p>A CloudFormation template can be used to manage Route53 resources. The following template is an example showing the:</p><ul><li><em>AWS::Route53::HostedZone</em></li><li><em>AWS::Route53::RecordSet</em></li><li><em>AWS::Route53::RecordSetGroup</em></li></ul><p>CloudFormation resources:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>AWSTemplateFormatVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>2010-09-09</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>&gt;-</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>  </span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#000>Route53 private HostedZone</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>Parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>Vpc</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>The VPC to create the Zone for</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>String</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>Zone</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>The zone to create</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>String</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Default</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>example.com</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>Resources</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MyHostedZone</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>AWS::Route53::HostedZone</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>Name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref Zone</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>HostedZoneConfig</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>Comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Sub &#34;Private zone for ${Zone} in ${Vpc}&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>VPCs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>VPCId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref Vpc</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>VPCRegion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref AWS::Region</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>HostedZoneTags</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>Key</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>example-tag</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>Value</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref Zone</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MyRecordSet</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>AWS::Route53::RecordSet</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>DependsOn</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>MyHostedZone</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>HostedZoneName</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref Zone</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>Name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Sub &#34;name.${Zone}&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>ResourceRecords</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#4e9a06>&#34;10.20.30.43&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>TTL</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>300</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>A</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MyRecordSetGroup</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>AWS::Route53::RecordSetGroup</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>DependsOn</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>MyHostedZone</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>HostedZoneName</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref Zone</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>RecordSets</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>Name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Sub &#34;cname.${Zone}&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>ResourceRecords</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span>- !<span style=color:#000>Sub &#34;name.${Zone}&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>TTL</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>300</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>CNAME</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>Name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Sub &#34;alias.${Zone}&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>A</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>AliasTarget</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>DNSName</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Sub &#34;name.${Zone}&#34;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>EvaluateTargetHealth</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>no</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>HostedZoneId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref MyHostedZone</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>Outputs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>HostedZoneId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>The identifier for the private hosted zone</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Value</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref MyHostedZone</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>The output for the stack will show the identifier for the hosted zone.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-1b5e6b30624788fc3ce78b0d4f182d8c>12.3 - Route53 Delegated Subdomain</h1><p>When using Route53 the Hosted Zone is often a subdomain for a domain managed using external DNS. In this case the external DNS must be updated to delegate management of the subdomain to your
hosted zones name servers.</p><h2 id=hosted-zone-name-servers>Hosted Zone Name Servers</h2><p>When you create a public Hosted Zone in Eucalyptus it will be allocated some nameservers. You can use the AWS CLI to determine the Name Servers for your zone:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws route53 list-hosted-zones</span>
</span></span><span style=display:flex><span>HOSTEDZONES	87a20e2b-f835-4775-a6ad-16f14033668a	/hostedzone/ZAAKJGJPMUHV32	subdomain.example.com.	<span style=color:#0000cf;font-weight:700>2</span>
</span></span><span style=display:flex><span>CONFIG	False
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws route53 list-resource-record-sets --hosted-zone-id ZAAKJGJPMUHV32 --query &#34;ResourceRecordSets[?Type == &#39;NS&#39;]&#34;</span>
</span></span><span style=display:flex><span>subdomain.example.com.	900	NS
</span></span><span style=display:flex><span>RESOURCERECORDS	ns1.mycloud.example.com.
</span></span></code></pre></div><p>To discover the nameservers, first list the hosted zone to find the identifer and then pass the identifer to <em>list-resource-record-sets</em>. The example above uses a query to output only the <em>NS</em> information.</p><h2 id=external-name-server-records>External Name Server records</h2><p>The external DNS should be updated to add a Name Server <em>NS</em> record and a corresponding <em>A</em> record to map that name to an IP address:</p><pre tabindex=0><code>subdomain.example.com	    NS	ns1.mycloud.example.com.
ns1.mycloud.example.com	A	1.X.Y.123
</code></pre><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>The external DNS must not have an SOA record for the delegated subdomain as your Hosted Zone in Eucalyptus Route53 is authoritative.</div></div><div class=td-content style=page-break-before:always><h1 id=pg-f6982d0753d21dc2259ad3af26fbdd7f>13 - Using Simple Queue Service</h1><h1 id=using-simple-queue-service>Using Simple Queue Service</h1><p>Eucalyptus Simple Queue Service (SQS) is a message queuing service that enables you to decouple your services and distributed systems.</p><p>SQS reduces the overhead of managing and operating message oriented middleware and facilitates robust cloud architectures when used with other services such as Auto Scaling.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Simple Queue Service (SQS) is a tech preview service so should be used accordingly.</div></div><div class=td-content style=page-break-before:always><h1 id=pg-a945a3681424452a865a77f09ee6c361>13.1 - Simple Queue Service Concepts</h1><p>This section describes the important concepts for the Simple Queue Service (SQS)</p><h3 id=queues-and-queue-urls>Queues and Queue URLs</h3><p>A queue is a named destination for messages in an account. A queue has a URL that uniquely identifies it on the cloud.</p><h3 id=delivery-and-visiblity>Delivery and Visiblity</h3><p>When a message is delivered to a client it is hidden from other clients for a period to prevent duplicate handling. If the message is not handled by the first client it will later become visible for handling by other clients.</p><h3 id=dead-letter-queues>Dead-letter Queues</h3><p>A dead-letter queue can be used for undeliverable messages. Using a dead-letter queue allows for handling of messages that would otherwise not be processed.</p><h3 id=delay-queue>Delay Queue</h3><p>A delay queue allows messages to be available from a queue after a delay period rather than as soon as messages are sent to the queue.</p><h3 id=polling-style>Polling Style</h3><p>Short or long polling can be used when receiving messages. For short polling there is an immediate response whether a message is available or not. For long polling a delay of up to 20 seconds is used and the response will occur when a message is available or when the given timeout is reached even if there is no message.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-4695109097ddeeb95b11f0f914f20676>13.2 - Simple Queue Service Overview</h1><h2 id=using-the-aws-cli>Using the AWS CLI</h2><p>The AWS CLI can be used to access the Simple Queue Service (SQS). Use of the Eucalyptus AWS CLI plug-in is assumed in these examples.</p><p>To list queues:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws sqs list-queues</span>
</span></span><span style=display:flex><span>QUEUEURLS	http://sqs.mycloud.example.com:8773/000575948401/queue1
</span></span><span style=display:flex><span>QUEUEURLS	http://sqs.mycloud.example.com:8773/000575948401/sqs-1-DeadLetterQueue-N7AHZIWZEW3H5
</span></span></code></pre></div><p>Send a message:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws sqs send-message --queue-url http://sqs.mycloud.example.com:8773/000575948401/queue1 --message-body &#34;TEST MESSAGE&#34;</span>
</span></span><span style=display:flex><span>d41d8cd98f00b204e9800998ecf8427e	2b3ce69548da118bf617bfdd33a06108	daedefab-669b-47a4-a801-8b84e747c11c
</span></span></code></pre></div><p>Receive a messge:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws sqs receive-message --queue-url http://sqs.mycloud.example.com:8773/000575948401/queue1</span>
</span></span><span style=display:flex><span>MESSAGES	TEST MESSAGE	2b3ce69548da118bf617bfdd33a06108	d41d8cd98f00b204e9800998ecf8427e	9cc9bc8c-c201-4a27-9f7f-94924a79968a	000575948401:queue1:9cc9bc8c-c201-4a27-9f7f-94924a79968a:3
</span></span></code></pre></div><h2 id=using-cloudformation>Using CloudFormation</h2><p>A CloudFormation template can be used to manage SQS resources. The following template is an example showing the:</p><ul><li><em>AWS::SQS::Queue</em></li><li><em>AWS::SQS::QueuePolicy</em></li></ul><p>CloudFormation resources:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>AWSTemplateFormatVersion</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>2010-09-09</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>&gt;-</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>  SQS queue and queue policy template
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>  </span><span style=color:#f8f8f8;text-decoration:underline>  
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>Resources</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>Queue</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>AWS::SQS::Queue</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>RedrivePolicy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>deadLetterTargetArn</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>GetAtt &#39;DeadLetterQueue.Arn&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>maxReceiveCount</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>DelaySeconds</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;10&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>MaximumMessageSize</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;65536&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>MessageRetentionPeriod</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;1209600&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>VisibilityTimeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;20&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>ReceiveMessageWaitTimeSeconds</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;5&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>QueueName</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>queue1</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>DeadLetterQueue</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>AWS::SQS::Queue</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>QueuePolicy</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>AWS::SQS::QueuePolicy</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>PolicyDocument</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87;font-weight:700>Statement</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>Action</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>sqs:*</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>Principal</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>            </span><span style=color:#204a87;font-weight:700>AWS</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref &#39;AWS::AccountId&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>Effect</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Allow</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>Queues</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- !<span style=color:#000>Ref Queue</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- !<span style=color:#000>Ref DeadLetterQueue</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>Outputs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>QueueURL</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>URL of the queue</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Value</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref &#39;Queue&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>QueueARN</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ARN of the queue</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Value</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>GetAtt &#39;Queue.Arn&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>DeadLetterQueueURL</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>URL of the dead letter queue</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Value</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref &#39;DeadLetterQueue&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>DeadLetterQueueARN</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ARN of the dead letter queue</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Value</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>GetAtt &#39;DeadLetterQueue.Arn&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>The output for the stack will show the URLs and ARNs for the created queue resources.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c590edd3b622a7fa8a549679149755fd>14 - Using CloudFormation</h1><p>This topic describes the Eucalyptus implementation of the AWS CloudFormation web service, how CloudFormation works, and some details and examples of how to add CloudFormation to your Eucalyptus deployment.</p><h2 id=why-use-cloudformation>Why use CloudFormation?</h2><p>Cloud computing allows for application repeatability and redundancy. This means that you can spin up as many virtual machines as you need, but the application configuration only needs to happen when the images are created. CloudFormation takes this concept to the next level: it allows you to configure an entire set of resources (instances, security groups, user roles and policies, and more) in a single template. Then you can create a stack of all those resources from the template using a single command. So, you don&rsquo;t just get machine repeatability, you get environment repeatability. CloudFormation allows you to clone environments in different cloud setups, as well as giving applications the ability to be set up and torn down in a repeatable manner.</p><h2 id=how-does-cloudformation-work>How does CloudFormation Work?</h2><p>CloudFormation manages a set of resources, called a stack, in batch operations (create, update, or delete). Stacks are described in templates, which can be simple, as the following example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>Resources</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MyInstance</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>AWS::EC2::Instance</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>ImageId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>emi-371ada125a928669e</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>This stack creates a single instance, based on the image with ID <code>emi-371ada125a928669e</code>. However, this stack is not portable because different clouds might have different image IDs.</p><p>CloudFormation allows stack customization through user parameters that are passed in at stack creation time. The following is an example of the template above with a user parameter called <em>MyImageId</em>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>Parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MyImageId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Image id</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>String</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>Resources</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MyInstance</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>AWS::EC2::Instance</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>ImageId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref MyImageId</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>This stack creates a single instance, but the image ID will be required to be passed in using the command line. For example, the following example uses the <em>euform-create-stack</em> command in Euca2ools:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euform-create-stack --template-file template.yaml -p <span style=color:#000>MyImageId</span><span style=color:#ce5c00;font-weight:700>=</span>emi-371ada125a928669e MyStack
</span></span></code></pre></div><p>or using the AWS CLI:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws cloudformation create-stack --template-body file://template.yaml --parameters <span style=color:#000>ParameterKey</span><span style=color:#ce5c00;font-weight:700>=</span>MyImageId,ParameterValue<span style=color:#ce5c00;font-weight:700>=</span>emi-371ada125a928669e --stack-name MyStack
</span></span></code></pre></div><p>These example commands pass the parameter <em>MyImageId</em> with value <code>emi-371ada125a928669e</code> into the stack creation process.</p><p>You can also use templates to create multiple resources and associate them with each other. For example, the following template creates an instance with its own security group and ingress rule.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>Parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MyImageId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Image id</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>String</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>Resources</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MySecurityGroup</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>AWS::EC2::SecurityGroup</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GroupDescription</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Security Group with Ingress Rule for MyInstance</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>SecurityGroupIngress</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>IpProtocol</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>tcp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>FromPort</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;22&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>ToPort</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;22&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>CidrIp</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;0.0.0.0/0&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MyInstance</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>AWS::EC2::Instance</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>ImageId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref &#39;MyImageId&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>SecurityGroups</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- !<span style=color:#000>Ref &#39;MySecurityGroup&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Templates can be more complicated than the ones shown above, but CloudFormation allows many resources to be deployed in one operation. Resources from most Eucalyptus services are supported.</p><h2 id=cloudformation-requirements>CloudFormation Requirements</h2><p>To run CloudFormation on Eucalyptus, you need the following:</p><ul><li>A running Eucalyptus cloud, version 4.0 or later, with at least one Cloud Controller, Node Controller, and Cluster Controller up, running and registered</li><li>At least one active running service of each of the following: CloudWatch, AutoScaling, Load Balancing, Compute, and IAM</li><li>A registered active CloudFormation service</li></ul><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Eucalyptus versions earlier than 5 support JSON CloudFormation templates but not the newer YAML format</div><h2 id=supported-resources>Supported Resources</h2><p>The following resources are supported by CloudFormation in Eucalyptus.</p><table><thead><tr><th style=text-align:left>Resource</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>AWS::AutoScaling::AutoScalingGroup</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported except: HealthCheckType.</td></tr><tr><td style=text-align:left>AWS::AutoScaling::LaunchConfiguration</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported except AssociatePublicIpAddress.</td></tr><tr><td style=text-align:left>AWS::AutoScaling::ScalingPolicy</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::CloudFormation::Stack</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::CloudFormation::WaitCondition</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::CloudFormation::WaitConditionHandle.</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::CloudWatch::Alarm</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::CustomerGateway</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::DHCPOptions</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::EIP</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::EIPAssociation</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported except: PrivateIpAddress.</td></tr><tr><td style=text-align:left>AWS::EC2::Instance</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported except: SourceDestCheck, Tags, and Tenancy.</td></tr><tr><td style=text-align:left>AWS::EC2::InternetGateway</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::LaunchTemplate</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::NatGateway</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::NetworkAcl</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::NetworkAclEntry</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::NetworkInterface</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::NetworkInterfaceAttachment</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::Route</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::RouteTable</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::SecurityGroup</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::SecurityGroupEgress</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::SecurityGroupIngress</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported except SourceSecurityGroupId.</td></tr><tr><td style=text-align:left>AWS::EC2::Subnet</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::SubnetNetworkAclAssociation</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::SubnetRouteTableAssociation</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::Volume</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported except: HealthCheckType and Tags.</td></tr><tr><td style=text-align:left>AWS::EC2::VolumeAttachment</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::VPC</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::VPCDHCPOptionsAssociation</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::EC2::VPCGatewayAttachment</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::ElasticLoadBalancing::LoadBalancer</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported except: AccessLoggingPolicy, ConnectionDrainingPolicy, CrossZone, Policies.InstancePorts, and Policies.LoadBalanerPorts. All other properties are passed through to the LoadBalancing service internally but some features are not implemented so properties may be ignored there.</td></tr><tr><td style=text-align:left>AWS::IAM::AccessKey</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported except Serial.</td></tr><tr><td style=text-align:left>AWS::IAM::Group</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::IAM::InstanceProfile</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::IAM::ManagedPolicy</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::IAM::Policy</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::IAM::Role</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::IAM::User</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::IAM::UserToGroupAddition</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::Route53::HostedZone</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::Route53::RecordSet</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::Route53::RecordSetGroup</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::S3::Bucket</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::S3::BucketPolicy</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::SQS::Queue</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr><tr><td style=text-align:left>AWS::SQS::QueuePolicy</td><td style=text-align:left>All properties in the Template Reference section of the AWS CloudFormation User Guide are supported.</td></tr></tbody></table><h2 id=cloudformation-endpoint>CloudFormation Endpoint</h2><p>The service endpoint for CloudFormation is of the form:</p><pre tabindex=0><code>http://cloudformation.mycloud.example.com:8773/
</code></pre><p>If DNS is not availble for your cloud, then an endpoint with a service path can be used:</p><pre tabindex=0><code>http://&lt;host-ip&gt;:8773/services/CloudFormation
</code></pre><p>CloudFormation follows the same convention as the other user facing services.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-16f6676bbc04702c9aa113b96e8208bb>14.1 - CloudFormation Use Case</h1><p>This topic describes a use case for creating a stack, checking the stack progress, and deleting the stack. For this use case, we will use the following template:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>Parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MyImageId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Image id</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>String</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MyKeyPair</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Key Pair</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>String</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>Resources</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MySecurityGroup</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>AWS::EC2::SecurityGroup</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>GroupDescription</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Security Group with Ingress Rule for MyInstance</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>SecurityGroupIngress</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- <span style=color:#204a87;font-weight:700>IpProtocol</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>tcp</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>FromPort</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;22&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>ToPort</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;22&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>          </span><span style=color:#204a87;font-weight:700>CidrIp</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;0.0.0.0/0&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#204a87;font-weight:700>MyInstance</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>AWS::EC2::Instance</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>Properties</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>ImageId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref &#39;MyImageId&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>SecurityGroups</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>        </span>- !<span style=color:#000>Ref &#39;MySecurityGroup&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#204a87;font-weight:700>KeyName</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span>!<span style=color:#000>Ref &#39;MyKeyPair&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>This template creates an instance with a security group that allows global SSH access (port 22), but uses a keypair to log in. It requires two parameters, <em>MyImageId</em> , which is the image ID of the instance to create, and <em>MyKeyPair</em> , which is the name of the keypair to use to log in with. You could use both values with the <em>euca-run-instances</em> or <em>aws ec2 run-instances</em> commands to create an instance manually (for example, <code>euca-run-instances -k mykey emi-371ada125a928669e</code> ) so the arguments needed here are standard instance arguments.</p><p>The steps to run this template through the system are explained in the following steps.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>These steps require that you have an available image and that the CloudFormation service is running</div><p>Verify connectivity to the CloudFormation service.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euform-describe-stacks 
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Or</span>
</span></span><span style=display:flex><span>aws cloudformation describe-stacks
</span></span></code></pre></div><p>You should not see anything returned, including any errors. Create a file called <em>ex_template.yaml</em> that contains the YAML template content shown in the introduction above.</p><p>Create a keypair.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euca-create-keypair myKey &gt; myKey.pem
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Or</span>
</span></span><span style=display:flex><span>aws ec2 create-key-pair --key-name myKey &gt; myKey.pem
</span></span></code></pre></div><p>Set the permissions on the keypair.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chmod <span style=color:#0000cf;font-weight:700>0600</span> myKey.pem
</span></span></code></pre></div><p>Find what resources have been created., run the command and the euca-describe-groups commands. Make note of the output for later. Run:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euca-describe-images -a
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Or</span>
</span></span><span style=display:flex><span>aws ec2 describe-images
</span></span></code></pre></div><p>Note the output for later use.</p><p>Create the stack referencing the existing resources.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># euform-create-stack --template-file ex_template.yaml -p MyImageId=&lt;image_id&gt; -p MyKeyPair=myKey MyStack</span>
</span></span><span style=display:flex><span>arn:aws:cloudformation::000575948401:stack/MyStack/26daf046-3776-4b97-9444-5edae2f2eceb
</span></span></code></pre></div><p>of with the AWS CLI:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws cloudformation create-stack --template-body file://ex_template.yaml --parameters ParameterKey=MyImageId,ParameterValue=emi-371ada125a928669e ParameterKey=MyKeyPair,ParameterValue=myKey --stack-name MyStack</span>
</span></span><span style=display:flex><span>arn:aws:cloudformation::000575948401:stack/MyStack/26daf046-3776-4b97-9444-5edae2f2eceb
</span></span></code></pre></div><p>Run the checks you want on your stack. Check the status of the stack.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># euform-describe-stacks</span>
</span></span><span style=display:flex><span>STACK	MyStack	CREATE_COMPLETE			2020-10-20T18:31:15.662Z
</span></span><span style=display:flex><span>PARAMETER	MyImageId		emi-371ada125a928669e
</span></span><span style=display:flex><span>PARAMETER	MyKeyPair		myKey
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># aws cloudformation describe-stacks</span>
</span></span><span style=display:flex><span>STACKS	2020-10-20T18:31:15.662Z	False	2020-10-20T18:31:51.316Z	arn:aws:cloudformation::000575948401:stack/MyStack/26daf046-3776-4b97-9444-5edae2f2eceb	MyStack	CREATE_COMPLETE	
</span></span><span style=display:flex><span>PARAMETERS	MyImageId	emi-371ada125a928669e
</span></span><span style=display:flex><span>PARAMETERS	MyKeyPair	myKey
</span></span></code></pre></div><p>Check the stack at any time to see all the events that have occurred during the stack lifecycle.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># euform-describe-stack-events MyStack</span>
</span></span><span style=display:flex><span>EVENT	MyStack	d87c4381-b765-4d44-a5ba-a952855ffd79	AWS::CloudFormation::Stack	MyStack	arn:aws:cloudformation::000575948401:stack/MyStack/26daf046-3776-4b97-9444-5edae2f2eceb	2020-10-20T18:31:51.310Z	CREATE_COMPLETE	
</span></span><span style=display:flex><span>EVENT	MyStack	MyInstance-CREATE_COMPLETE-1603218711063	AWS::EC2::Instance	MyInstance	i-687f112f4c99e9a98	2020-10-20T18:31:51.063Z	CREATE_COMPLETE	
</span></span><span style=display:flex><span>EVENT	MyStack	MyInstance-CREATE_IN_PROGRESS-1603218676951	AWS::EC2::Instance	MyInstance	i-687f112f4c99e9a98	2020-10-20T18:31:16.951Z	CREATE_IN_PROGRESS	Resource creation Initiated
</span></span><span style=display:flex><span>EVENT	MyStack	MyInstance-CREATE_IN_PROGRESS-1603218676783	AWS::EC2::Instance	MyInstance		2020-10-20T18:31:16.783Z	CREATE_IN_PROGRESS	
</span></span><span style=display:flex><span>EVENT	MyStack	MySecurityGroup-CREATE_COMPLETE-1603218676599	AWS::EC2::SecurityGroup	MySecurityGroup	MyStack-MySecurityGroup-SWUBTU8TQ9MBV	2020-10-20T18:31:16.599Z	CREATE_COMPLETE	
</span></span><span style=display:flex><span>EVENT	MyStack	MySecurityGroup-CREATE_IN_PROGRESS-1603218676174	AWS::EC2::SecurityGroup	MySecurityGroup	MyStack-MySecurityGroup-SWUBTU8TQ9MBV	2020-10-20T18:31:16.174Z	CREATE_IN_PROGRESS	Resource creation Initiated
</span></span><span style=display:flex><span>EVENT	MyStack	MySecurityGroup-CREATE_IN_PROGRESS-1603218676038	AWS::EC2::SecurityGroup	MySecurityGroup		2020-10-20T18:31:16.038Z	CREATE_IN_PROGRESS	
</span></span><span style=display:flex><span>EVENT	MyStack	9212e1ff-6c7a-4710-96a2-d83606a3c34f	AWS::CloudFormation::Stack	MyStack	arn:aws:cloudformation::000575948401:stack/MyStack/26daf046-3776-4b97-9444-5edae2f2eceb	2020-10-20T18:31:15.780Z	CREATE_IN_PROGRESS	User Initiated
</span></span></code></pre></div><p>Run <em>euca-describe-instances</em> and <em>euca-describe-groups</em> to see the newly created resources:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># euca-describe-instances i-687f112f4c99e9a98</span>
</span></span><span style=display:flex><span>RESERVATION	r-2381c3e652dd942f2	000575948401	MyStack-MySecurityGroup-SWUBTU8TQ9MBV
</span></span><span style=display:flex><span>INSTANCE	i-687f112f4c99e9a98	emi-371ada125a928669e	euca-192-168-134-181.eucalyptus.mycloud.example.com	euca-172-31-15-210.eucalyptus.internal	running	myKey	0		t2.micro	2020-10-20T18:31:16.920Z	cloud-1a				monitoring-disabled	192.168.134.181	172.31.15.210	vpc-837bc081de161f8c0	subnet-1503566df094fe78a	instance-store					hvm			sg-98da12246d91375e3				x86_64
</span></span><span style=display:flex><span>NETWORKINTERFACE	eni-42a4a3bf7d1075735	subnet-1503566df094fe78a	vpc-837bc081de161f8c0	000575948401	in-use	172.31.15.210	euca-172-31-15-210.eucalyptus.internal	<span style=color:#204a87>true</span>
</span></span><span style=display:flex><span>ATTACHMENT		eni-attach-cc38f4f4ef78a6469	0	attached	2020-10-20T18:31:16.923Z	<span style=color:#204a87>true</span>
</span></span><span style=display:flex><span>ASSOCIATION	192.168.134.181		172.31.15.210
</span></span><span style=display:flex><span>GROUP	sg-98da12246d91375e3	MyStack-MySecurityGroup-SWUBTU8TQ9MBV
</span></span><span style=display:flex><span>PRIVATEIPADDRESS	172.31.15.210	euca-172-31-15-210.eucalyptus.internal	primary
</span></span><span style=display:flex><span>TAG	instance	i-687f112f4c99e9a98	aws:cloudformation:logical-id	MyInstance
</span></span><span style=display:flex><span>TAG	instance	i-687f112f4c99e9a98	aws:cloudformation:stack-id	arn:aws:cloudformation::000575948401:stack/MyStack/26daf046-3776-4b97-9444-5edae2f2eceb
</span></span><span style=display:flex><span>TAG	instance	i-687f112f4c99e9a98	aws:cloudformation:stack-name	MyStack
</span></span><span style=display:flex><span>TAG	instance	i-687f112f4c99e9a98	euca:node	10.117.111.18
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># euca-describe-groups sg-98da12246d91375e3</span>
</span></span><span style=display:flex><span>GROUP	sg-98da12246d91375e3	000575948401	MyStack-MySecurityGroup-SWUBTU8TQ9MBV	Security Group with Ingress Rule <span style=color:#204a87;font-weight:700>for</span> MyInstance	vpc-837bc081de161f8c0
</span></span><span style=display:flex><span>PERMISSION	000575948401	MyStack-MySecurityGroup-SWUBTU8TQ9MBV	ALLOWS	tcp	22	22	FROM	CIDR	0.0.0.0/0	ingress
</span></span><span style=display:flex><span>PERMISSION	000575948401	MyStack-MySecurityGroup-SWUBTU8TQ9MBV	ALLOWS	-1			TO	CIDR	0.0.0.0/0	egress
</span></span><span style=display:flex><span>TAG	security-group	sg-98da12246d91375e3	aws:cloudformation:logical-id	MySecurityGroup
</span></span><span style=display:flex><span>TAG	security-group	sg-98da12246d91375e3	aws:cloudformation:stack-id	arn:aws:cloudformation::000575948401:stack/MyStack/26daf046-3776-4b97-9444-5edae2f2eceb
</span></span><span style=display:flex><span>TAG	security-group	sg-98da12246d91375e3	aws:cloudformation:stack-name	MyStack
</span></span></code></pre></div><p>To SSH into the instance:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh -i myKey.pem root@192.168.134.181
</span></span></code></pre></div><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>Username might depend on the image, and might be root, centos, ubuntu or ec2-user.</div><p>Delete the stack.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euform-delete-stack MyStack
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Or</span>
</span></span><span style=display:flex><span>aws cloudformation delete-stack --stack-name MyStack
</span></span></code></pre></div><p>You can run <em>euform-describe-stacks</em> and all the other describe commands to check the progress until the delete is complete.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-70fe51a9080ba0a3a8dd4d5b64a0c516>14.2 - CloudFormation Templates</h1><p>This topic details templates that have been tested with Eucalyptus.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>These examples use the older JSON format, YAML format is recommended for Eucalyptus 5</div><h2 id=accesskeystemplate>AccessKeys.template</h2><pre><code>{
  &quot;AWSTemplateFormatVersion&quot;:&quot;2010-09-09&quot;,
  &quot;Parameters&quot;:{
    &quot;Username&quot;:{
      &quot;Description&quot;:&quot;Username&quot;,
      &quot;Type&quot;:&quot;String&quot;
    }
  },
  &quot;Resources&quot;:{
    &quot;Key1&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::AccessKey&quot;,
      &quot;Properties&quot;:{
        &quot;UserName&quot;:{&quot;Ref&quot;:&quot;Username&quot;},
        &quot;Serial&quot;:&quot;1&quot;,
        &quot;Status&quot;:&quot;Active&quot;
      }
    },
    &quot;Key2&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::AccessKey&quot;,
      &quot;Properties&quot;:{
        &quot;UserName&quot;:{&quot;Ref&quot;:&quot;Username&quot;},
       &quot;Serial&quot;:&quot;1&quot;,
       &quot;Status&quot;:&quot;Inactive&quot;
      }
    }
  },
  &quot;Outputs&quot;:{
    &quot;Key1AK&quot;:{
      &quot;Value&quot;:{&quot;Ref&quot;:&quot;Key1&quot;}
    },
    &quot;Key1SK&quot;:{
      &quot;Value&quot;:{&quot;Fn::GetAtt&quot;:[&quot;Key1&quot;,&quot;SecretAccessKey&quot;]}
    },
    &quot;Key2AK&quot;:{
      &quot;Value&quot;:{&quot;Ref&quot;:&quot;Key2&quot;}
    },
    &quot;Key2SK&quot;:{
      &quot;Value&quot;:{&quot;Fn::GetAtt&quot;:[&quot;Key2&quot;,&quot;SecretAccessKey&quot;]}
    }
  }
}
</code></pre><h2 id=autoscalinggroupsandcloudwatchalarmtemplate>AutoscalingGroupsAndCloudWatchAlarm.template</h2><pre><code>{
  &quot;AWSTemplateFormatVersion&quot;:&quot;2010-09-09&quot;,
  &quot;Parameters&quot;:{
    &quot;ImageId&quot;:{
      &quot;Description&quot;:&quot;Image id&quot;,
      &quot;Type&quot;:&quot;String&quot;
    }
  },
  &quot;Resources&quot;:{
    &quot;LaunchConfig&quot;:{
      &quot;Type&quot;:&quot;AWS::AutoScaling::LaunchConfiguration&quot;,
      &quot;Properties&quot;:{
        &quot;ImageId&quot;:{&quot;Ref&quot;:&quot;ImageId&quot;},
        &quot;InstanceType&quot;:&quot;m1.small&quot;,
        &quot;BlockDeviceMappings&quot;:[
          {&quot;DeviceName&quot;:&quot;/dev/sdc&quot;,&quot;VirtualName&quot;:&quot;ephemeral0&quot;},
          {&quot;DeviceName&quot;:&quot;/dev/sdc&quot;,&quot;Ebs&quot;:{&quot;VolumeSize&quot;:&quot;10&quot;}}
        ],
        &quot;SecurityGroups&quot;:[{&quot;Ref&quot;:&quot;InstanceSecurityGroup&quot;}]}
      },
      &quot;ASG1&quot;:{
        &quot;UpdatePolicy&quot;:{
          &quot;AutoScalingRollingUpdate&quot;:{
            &quot;MinInstancesInService&quot;:&quot;1&quot;,
            &quot;MaxBatchSize&quot;:&quot;1&quot;,
            &quot;PauseTime&quot;:&quot;PT12M5S&quot;
          }
        },
        &quot;Type&quot;:&quot;AWS::AutoScaling::AutoScalingGroup&quot;,
        &quot;Properties&quot;:{
          &quot;AvailabilityZones&quot;:{&quot;Fn::GetAZs&quot;:{&quot;Ref&quot;:&quot;AWS::Region&quot;}
        },
        &quot;LaunchConfigurationName&quot;:{&quot;Ref&quot;:&quot;LaunchConfig&quot;},
        &quot;MaxSize&quot;:&quot;3&quot;,
        &quot;MinSize&quot;:&quot;1&quot;
      }
    },
    &quot;ScaleUpPolicy&quot;:{
      &quot;Type&quot;:&quot;AWS::AutoScaling::ScalingPolicy&quot;,
        &quot;Properties&quot;:{
          &quot;AdjustmentType&quot;:&quot;ChangeInCapacity&quot;,
          &quot;AutoScalingGroupName&quot;:{&quot;Ref&quot;:&quot;ASG1&quot;},
          &quot;Cooldown&quot;:&quot;1&quot;,
          &quot;ScalingAdjustment&quot;:&quot;1&quot;
        }
      },
      &quot;CPUAlarmHigh&quot;:{
        &quot;Type&quot;:&quot;AWS::CloudWatch::Alarm&quot;,
        &quot;Properties&quot;:{
          &quot;EvaluationPeriods&quot;:&quot;1&quot;,
          &quot;Statistic&quot;:&quot;Average&quot;,
          &quot;Threshold&quot;:&quot;10&quot;,
          &quot;AlarmDescription&quot;:&quot;Alarm if CPU too high or metric disappears indicating instance is down&quot;,
          &quot;Period&quot;:&quot;60&quot;,
          &quot;AlarmActions&quot;:[{&quot;Ref&quot;:&quot;ScaleUpPolicy&quot;}],
          &quot;Namespace&quot;:&quot;AWS/EC2&quot;,
          &quot;Dimensions&quot;:[{
            &quot;Name&quot;:&quot;AutoScalingGroupName&quot;,
            &quot;Value&quot;:{&quot;Ref&quot;:&quot;ASG1&quot;}
          }],
          &quot;ComparisonOperator&quot;:&quot;GreaterThanThreshold&quot;,
          &quot;MetricName&quot;:&quot;CPUUtilization&quot;
        }
      },
      &quot;InstanceSecurityGroup&quot;:{
        &quot;Type&quot;:&quot;AWS::EC2::SecurityGroup&quot;,
        &quot;Properties&quot;:{
          &quot;GroupDescription&quot;:&quot;Cloudformation Group&quot;,
          &quot;SecurityGroupIngress&quot;:[{
            &quot;IpProtocol&quot;:&quot;tcp&quot;,
            &quot;FromPort&quot;:&quot;22&quot;,
            &quot;ToPort&quot;:&quot;22&quot;,
             &quot;CidrIp&quot;:&quot;0.0.0.0/0&quot;
          }]
        }
      },
      &quot;IngressRule&quot;:{
        &quot;Type&quot;:&quot;AWS::EC2::SecurityGroupIngress&quot;,
        &quot;Properties&quot;:{
          &quot;GroupName&quot;:{&quot;Ref&quot;:&quot;InstanceSecurityGroup&quot;},
          &quot;FromPort&quot;:&quot;80&quot;,
          &quot;ToPort&quot;:&quot;80&quot;,
          &quot;IpProtocol&quot;:&quot;tcp&quot;,
          &quot;SourceSecurityGroupName&quot;:{&quot;Ref&quot;:&quot;InstanceSecurityGroup&quot;}
      }
    }
  }
}
</code></pre><h2 id=blockdevicemappingstemplate>BlockDeviceMappings.template</h2><pre><code>{
  &quot;AWSTemplateFormatVersion&quot;:&quot;2010-09-09&quot;,
  &quot;Description&quot;:&quot;Create an EC2 instance running a specified EMI with block device mappings.&quot;,
  &quot;Parameters&quot;:{
    &quot;ImageId&quot;:{
      &quot;Description&quot;:&quot;Image id&quot;,
      &quot;Type&quot;:&quot;String&quot;
    },
    &quot;KeyName&quot;:{
      &quot;Description&quot;:&quot;KeyName&quot;,
      &quot;Type&quot;:&quot;String&quot;
    },
    &quot;SnapshotId&quot;:{
      &quot;Type&quot;:&quot;String&quot;
    }
  },
  &quot;Resources&quot;:{
    &quot;Ec2Instance1&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::Instance&quot;,
      &quot;Properties&quot;:{
        &quot;ImageId&quot;:{&quot;Ref&quot;:&quot;ImageId&quot;},
        &quot;BlockDeviceMappings&quot;:[{&quot;DeviceName&quot;:&quot;/dev/sdc&quot;,&quot;VirtualName&quot;:&quot;ephemeral0&quot;}]
      }
    },
    &quot;Ec2Instance2&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::Instance&quot;,
      &quot;Properties&quot;:{
        &quot;ImageId&quot;:{&quot;Ref&quot;:&quot;ImageId&quot;},
        &quot;KeyName&quot;:{&quot;Ref&quot;:&quot;KeyName&quot;},
        &quot;BlockDeviceMappings&quot;:[{
          &quot;DeviceName&quot;:&quot;/dev/sdc&quot;,
          &quot;Ebs&quot;:{&quot;SnapshotId&quot;:{&quot;Ref&quot;:&quot;SnapshotId&quot;},&quot;DeleteOnTermination&quot;:&quot;false&quot;}
        }]
      }
    },
    &quot;Ec2Instance3&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::Instance&quot;,
      &quot;Properties&quot;:{
        &quot;ImageId&quot;:{&quot;Ref&quot;:&quot;ImageId&quot;},
        &quot;KeyName&quot;:{&quot;Ref&quot;:&quot;KeyName&quot;},
        &quot;BlockDeviceMappings&quot;:[{
          &quot;DeviceName&quot;:&quot;/dev/sdc&quot;,
          &quot;Ebs&quot;:{&quot;VolumeSize&quot;:&quot;10&quot;,&quot;DeleteOnTermination&quot;:&quot;true&quot;}
        }]
      }
    }
  }
}
</code></pre><h2 id=conditionsandfunctionstemplate>ConditionsAndFunctions.template</h2><pre><code>{
  &quot;Mappings&quot;:{
    &quot;Mapping01&quot;:{
      &quot;Key01&quot;:{&quot;Value&quot;:[&quot;1&quot;,&quot;2&quot;]},
      &quot;Key02&quot;:{&quot;Value&quot;:&quot;3&quot;},
      &quot;Key03&quot;:{&quot;Value&quot;:&quot;4&quot;}
    }
  },
  &quot;AWSTemplateFormatVersion&quot;:&quot;2010-09-09&quot;,
  &quot;Description&quot;:&quot;Create an EC2 instance running a specified EMI, also test functions and conditions.&quot;,
  &quot;Parameters&quot;:{
    &quot;ImageId&quot;:{
      &quot;Description&quot;:&quot;Image id&quot;,
      &quot;Type&quot;:&quot;String&quot;,
      &quot;NoEcho&quot;:&quot;True&quot;
    },
    &quot;Split&quot;:{
      &quot;Default&quot;:&quot;1,2,3&quot;,
      &quot;Type&quot;:&quot;CommaDelimitedList&quot;
    }
  },
  &quot;Resources&quot;:{
    &quot;Ec2Instance1&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::Instance&quot;,
        &quot;Properties&quot;:{
          &quot;ImageId&quot;:{&quot;Ref&quot;:&quot;ImageId&quot;}
        },
      &quot;Condition&quot;:&quot;True&quot;
    },
    &quot;Ec2Instance2&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::Instance&quot;,
      &quot;Properties&quot;:{
        &quot;ImageId&quot;:{&quot;Ref&quot;:&quot;ImageId&quot;}
      },
      &quot;Condition&quot;:&quot;False&quot;
    }
  },
  &quot;Conditions&quot;:{
    &quot;True&quot;:{&quot;Fn::Equals&quot;:[&quot;x&quot;,&quot;x&quot;]},
    &quot;False&quot;:{&quot;Fn::Not&quot;:[{&quot;Condition&quot;:&quot;True&quot;}]},
    &quot;NotTrue&quot;:{&quot;Fn::Not&quot;:[{&quot;Condition&quot;:&quot;True&quot;}]},
    &quot;NotFalse&quot;:{&quot;Fn::Not&quot;:[{&quot;Condition&quot;:&quot;False&quot;}]},
    &quot;TrueAndTrue&quot;:{&quot;Fn::And&quot;:[{&quot;Condition&quot;:&quot;True&quot;},{&quot;Condition&quot;:&quot;True&quot;}]},
    &quot;TrueAndFalse&quot;:{&quot;Fn::And&quot;:[{&quot;Condition&quot;:&quot;True&quot;},{&quot;Condition&quot;:&quot;False&quot;}]},
    &quot;FalseAndTrue&quot;:{&quot;Fn::And&quot;:[{&quot;Condition&quot;:&quot;False&quot;},{&quot;Condition&quot;:&quot;True&quot;}]},
    &quot;FalseAndFalse&quot;:{&quot;Fn::And&quot;:[{&quot;Condition&quot;:&quot;False&quot;},{&quot;Condition&quot;:&quot;False&quot;}]},
    &quot;TrueOrTrue&quot;:{&quot;Fn::Or&quot;:[{&quot;Condition&quot;:&quot;True&quot;},{&quot;Condition&quot;:&quot;True&quot;}]},
    &quot;TrueOrFalse&quot;:{&quot;Fn::Or&quot;:[{&quot;Condition&quot;:&quot;True&quot;},{&quot;Condition&quot;:&quot;False&quot;}]},
    &quot;FalseOrTrue&quot;:{&quot;Fn::Or&quot;:[{&quot;Condition&quot;:&quot;False&quot;},{&quot;Condition&quot;:&quot;True&quot;}]},
    &quot;FalseOrFalse&quot;:{&quot;Fn::Or&quot;:[{&quot;Condition&quot;:&quot;False&quot;},{&quot;Condition&quot;:&quot;False&quot;}]}
  },
  &quot;Outputs&quot;:{
    &quot;Region&quot;:{
      &quot;Value&quot;:{&quot;Ref&quot;:&quot;AWS::Region&quot;}
    },
    &quot;JoinAndAZ&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot;:[&quot;,&quot;,{&quot;Fn::GetAZs&quot;:&quot;&quot;}]}
    },
    &quot;FindInMap1AndSelect&quot;:{
      &quot;Value&quot;:{&quot;Fn::Select&quot;:[&quot;0&quot;,{&quot;Fn::FindInMap&quot;:[&quot;Mapping01&quot;,&quot;Key01&quot;,&quot;Value&quot;]}]}
    },
    &quot;FindInMap2AndSelect&quot;:{
     &quot;Value&quot;:{&quot;Fn::Select&quot;:[&quot;1&quot;,&quot;Fn::FindInMap&quot;:[&quot;Mapping01&quot;,&quot;Key01&quot;,&quot;Value&quot;]}]}
    },
    &quot;FindInMap3AndSelect&quot;:{
      &quot;Value&quot;:{&quot;Fn::FindInMap&quot;:[&quot;Mapping01&quot;,&quot;Key02&quot;,&quot;Value&quot;]}
    },
    &quot;FindInMap4AndSelect&quot;:{
      &quot;Value&quot;:{&quot;Fn::FindInMap&quot;:[&quot;Mapping01&quot;,&quot;Key03&quot;,&quot;Value&quot;]}
    },
    &quot;GetAtt&quot;:{
      &quot;Value&quot;:{&quot;Fn::GetAtt&quot;:[&quot;Ec2Instance1&quot;,&quot;PrivateIp&quot;]}
    },
    &quot;StackId&quot;:{
      &quot;Value&quot;:{&quot;Ref&quot;:&quot;AWS::StackId&quot;}
    },
    &quot;StackName&quot;:{
      &quot;Value&quot;:{&quot;Ref&quot;:&quot;AWS::StackName&quot;}
    },
    &quot;AccountId&quot;:{
      &quot;Value&quot;:{&quot;Ref&quot;:&quot;AWS::AccountId&quot;}
    },
    &quot;True&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot; : [&quot;,&quot;,[{&quot;Fn::If&quot;: [&quot;True&quot;,&quot;True&quot;,&quot;False&quot;]}]]}},
    },
    &quot;False&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot; : [&quot;,&quot;,[{&quot;Fn::If&quot;: [&quot;False&quot;,&quot;True&quot;,&quot;False&quot;]}]]}},
    },
    &quot;NotTrue&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot; : [&quot;,&quot;,[{&quot;Fn::If&quot;: [&quot;NotTrue&quot;,&quot;True&quot;,&quot;False&quot;]}]]}},
    },
    &quot;NotFalse&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot; : [&quot;,&quot;,[{&quot;Fn::If&quot;: [&quot;NotFalse&quot;,&quot;True&quot;,&quot;False&quot;]}]]}},
    },
    &quot;TrueAndTrue&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot; : [&quot;,&quot;,[{&quot;Fn::If&quot;: [&quot;TrueAndTrue&quot;,&quot;True&quot;,&quot;False&quot;]}]]}},
    },
    &quot;TrueAndFalse&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot; : [&quot;,&quot;,[{&quot;Fn::If&quot;: [&quot;TrueAndFalse&quot;,&quot;True&quot;,&quot;False&quot;]}]]}},
    },
    &quot;FalseAndTrue&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot; : [&quot;,&quot;,[{&quot;Fn::If&quot;: [&quot;FalseAndTrue&quot;,&quot;True&quot;,&quot;False&quot;]}]]}},
    },
    &quot;FalseAndFalse&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot; : [&quot;,&quot;,[{&quot;Fn::If&quot;: [&quot;FalseAndFalse&quot;,&quot;True&quot;,&quot;False&quot;]}]]}},
    },
    &quot;TrueOrTrue&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot; : [&quot;,&quot;,[{&quot;Fn::If&quot;: [&quot;TrueOrTrue&quot;,&quot;True&quot;,&quot;False&quot;]}]]}},
    },
    &quot;TrueOrFalse&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot; : [&quot;,&quot;,[{&quot;Fn::If&quot;: [&quot;TrueOrFalse&quot;,&quot;True&quot;,&quot;False&quot;]}]]}},
    },
    &quot;FalseOrTrue&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot; : [&quot;,&quot;,[{&quot;Fn::If&quot;: [&quot;FalseOrTrue&quot;,&quot;True&quot;,&quot;False&quot;]}]]}},
    },
    &quot;FalseOrFalse&quot;:{
      &quot;Value&quot;:{&quot;Fn::Join&quot; : [&quot;,&quot;,[{&quot;Fn::If&quot;: [&quot;FalseOrFalse&quot;,&quot;True&quot;,&quot;False&quot;]}]]}},
    }
  }
}
</code></pre><h2 id=elasticiptemplate>ElasticIP.template</h2><p>This template attaches an Elastic IP to a new and existing instance. You must pass along the existing instance ID.</p><pre><code>{
  &quot;AWSTemplateFormatVersion&quot;:&quot;2010-09-09&quot;,
  &quot;Description&quot;:&quot;Create an EC2 instance running a specified EMI and some elastic IP addresses.&quot;,
  &quot;Parameters&quot;:{
    &quot;ImageId&quot;:{
      &quot;Description&quot;:&quot;Image id&quot;,
      &quot;Type&quot;:&quot;String&quot;
    },
    &quot;OtherInstanceId&quot;:{
      &quot;Description&quot;:&quot;Other instance id&quot;,
      &quot;Type&quot;:&quot;String&quot;
    }
    },
    &quot;Resources&quot;:{
      &quot;Ec2Instance1&quot;:{
        &quot;Type&quot;:&quot;AWS::EC2::Instance&quot;,
        &quot;Properties&quot;:{
          &quot;ImageId&quot;:{&quot;Ref&quot;:&quot;ImageId&quot;}
        }
      },
      &quot;EIP1&quot;:{
        &quot;Type&quot;:&quot;AWS::EC2::EIP&quot;,
        &quot;Properties&quot;:{
          &quot;InstanceId&quot;:{&quot;Ref&quot;:&quot;Ec2Instance1&quot;}
        }
      },
      &quot;EIP2&quot;:{
        &quot;Type&quot;:&quot;AWS::EC2::EIP&quot;,
        &quot;Properties&quot;:{
        }
      },
      &quot;EIPAssociation2&quot;:{
        &quot;Type&quot;:&quot;AWS::EC2::EIPAssociation&quot;,
        &quot;Properties&quot;:{
          &quot;InstanceId&quot;:{&quot;Ref&quot;:&quot;OtherInstanceId&quot;},
          &quot;EIP&quot;:{&quot;Ref&quot;:&quot;EIP2&quot;}
        }
      }
    },
    &quot;Outputs&quot;:{
      &quot;Output1&quot;:{
        &quot;Value&quot;:{&quot;Ref&quot;:&quot;EIPAssociation2&quot;}
      }
  }
}
</code></pre><h2 id=elasticloadbalancertemplate>ElasticLoadBalancer.template</h2><p>There is a hard-coded image ID in the <code>Mapping</code> section here to test <code>FindInMap</code> . Change the value to an instance that exists in your cloud.</p><pre><code>{
  &quot;AWSTemplateFormatVersion&quot;:&quot;2010-09-09&quot;,
  &quot;Description&quot;:&quot;Based on the AWS Cloudformation Sample Template for ELB.  Modify this template, and put the correct emi-XXXX in the value fields with a blank key of the AWSRegionArch2AMI mapping.&quot;,
  &quot;Parameters&quot;:{
    &quot;InstanceType&quot;:{
      &quot;Description&quot;:&quot;WebServer EC2 instance type&quot;,
      &quot;Type&quot;:&quot;String&quot;,
      &quot;Default&quot;:&quot;m1.small&quot;,
      &quot;AllowedValues&quot;:[&quot;t1.micro&quot;,&quot;m1.small&quot;,&quot;m1.medium&quot;,&quot;m1.large&quot;,&quot;m1.xlarge&quot;,&quot;m2.xlarge&quot;,&quot;m2.2xlarge&quot;,
                       &quot;m2.4xlarge&quot;,&quot;m3.xlarge&quot;,&quot;m3.2xlarge&quot;,&quot;c1.medium&quot;,&quot;c1.xlarge&quot;,&quot;cc1.4xlarge&quot;,
                       &quot;cc2.8xlarge&quot;,&quot;cg1.4xlarge&quot;],
      &quot;ConstraintDescription&quot;:&quot;must be a valid EC2 instance type.&quot;
    },
    &quot;WebServerPort&quot;:{
      &quot;Description&quot;:&quot;TCP/IP port of the web server&quot;,
      &quot;Type&quot;:&quot;String&quot;,
      &quot;Default&quot;:&quot;8888&quot;
    },
    &quot;KeyName&quot;:{
      &quot;Description&quot;:&quot;Name of an existing EC2 KeyPair to enable SSH access to the instances&quot;,
      &quot;Type&quot;:&quot;String&quot;,
      &quot;MinLength&quot;:&quot;1&quot;,
      &quot;MaxLength&quot;:&quot;255&quot;,
      &quot;AllowedPattern&quot;:&quot;[\\x20-\\x7E]*&quot;,
      &quot;ConstraintDescription&quot;:&quot;can contain only ASCII characters.&quot;
    },
    &quot;SSHLocation&quot;:{
      &quot;Description&quot;:&quot;The IP address range that can be used to SSH to the EC2 instances&quot;,
      &quot;Type&quot;:&quot;String&quot;,
      &quot;MinLength&quot;:&quot;9&quot;,
      &quot;MaxLength&quot;:&quot;18&quot;,
      &quot;Default&quot;:&quot;0.0.0.0/0&quot;,
      &quot;AllowedPattern&quot;:&quot;(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})/(\\d{1,2})&quot;,
      &quot;ConstraintDescription&quot;:&quot;must be a valid IP CIDR range of the form x.x.x.x/x.&quot;
    }
  },
  &quot;Mappings&quot;:{
    &quot;AWSInstanceType2Arch&quot;:{
      &quot;t1.micro&quot;:{&quot;Arch&quot;:&quot;64&quot;},
      &quot;m1.small&quot;:{&quot;Arch&quot;:&quot;64&quot;},
      &quot;m1.medium&quot;:{&quot;Arch&quot;:&quot;64&quot;},
      &quot;m1.large&quot;:{&quot;Arch&quot;:&quot;64&quot;},
      &quot;m1.xlarge&quot;:{&quot;Arch&quot;:&quot;64&quot;},
      &quot;m2.xlarge&quot;:{&quot;Arch&quot;:&quot;64&quot;},
      &quot;m2.2xlarge&quot;:{&quot;Arch&quot;:&quot;64&quot;},
      &quot;m3.xlarge&quot;:{&quot;Arch&quot;:&quot;64&quot;},
      &quot;m3.2xlarge&quot;:{&quot;Arch&quot;:&quot;64&quot;},
      &quot;m2.4xlarge&quot;:{&quot;Arch&quot;:&quot;64&quot;},
      &quot;c1.medium&quot;:{&quot;Arch&quot;:&quot;64&quot;},
      &quot;c1.xlarge&quot;:{&quot;Arch&quot;:&quot;64&quot;}
    },
    &quot;AWSRegionArch2AMI&quot;:{
      &quot;&quot;:{&quot;32&quot;:&quot;emi-ddbacddf&quot;,&quot;64&quot;:&quot;emi-ddbacddf&quot;}
    }
  },
  &quot;Resources&quot;:{
    &quot;ElasticLoadBalancer&quot;:{
      &quot;Type&quot;:&quot;AWS::ElasticLoadBalancing::LoadBalancer&quot;,
      &quot;Properties&quot;:{
        &quot;AvailabilityZones&quot;:{&quot;Fn::GetAZs&quot;:&quot;&quot;},
        &quot;Instances&quot;:[{&quot;Ref&quot;:&quot;Ec2Instance1&quot;},{&quot;Ref&quot;:&quot;Ec2Instance2&quot;}],
        &quot;Listeners&quot;{&quot;LoadBalancerPort&quot;:&quot;80&quot;,&quot;InstancePort&quot;:{&quot;Ref&quot;:&quot;WebServerPort&quot;},&quot;Protocol&quot;:&quot;HTTP&quot;}],
        &quot;HealthCheck&quot;:{
          &quot;Target&quot;:{&quot;Fn::Join&quot;:[&quot;&quot;,[&quot;HTTP:&quot;,{&quot;Ref&quot;:&quot;WebServerPort&quot;},&quot;/&quot;]]},
          &quot;HealthyThreshold&quot;:&quot;3&quot;,
          &quot;UnhealthyThreshold&quot;:&quot;5&quot;,
          &quot;Interval&quot;:&quot;30&quot;,
          &quot;Timeout&quot;:&quot;5&quot;
        }
      }
    },
    &quot;Ec2Instance1&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::Instance&quot;,
      &quot;Properties&quot;:{
        &quot;SecurityGroups&quot;:[{&quot;Ref&quot;:&quot;InstanceSecurityGroup&quot;}],
        &quot;KeyName&quot;:{&quot;Ref&quot;:&quot;KeyName&quot;},
        &quot;InstanceType&quot;:{&quot;Ref&quot;:&quot;InstanceType&quot;},
        &quot;ImageId&quot;:{
          &quot;Fn::FindInMap&quot;:[
            &quot;AWSRegionArch2AMI&quot;,
            {&quot;Ref&quot;:&quot;AWS::Region&quot;},
            {&quot;Fn::FindInMap&quot;:[&quot;AWSInstanceType2Arch&quot;,{&quot;Ref&quot;:&quot;InstanceType&quot;},&quot;Arch&quot;]}
          ]
        },
        &quot;UserData&quot;:{&quot;Fn::Base64&quot;:{&quot;Ref&quot;:&quot;WebServerPort&quot;}}
      }
    },
    &quot;Ec2Instance2&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::Instance&quot;,
      &quot;Properties&quot;:{
        &quot;SecurityGroups&quot;:[{&quot;Ref&quot;:&quot;InstanceSecurityGroup&quot;}],
        &quot;KeyName&quot;:{&quot;Ref&quot;:&quot;KeyName&quot;},
        &quot;InstanceType&quot;:{&quot;Ref&quot;:&quot;InstanceType&quot;},
        &quot;ImageId&quot;:{
          &quot;Fn::FindInMap&quot;:[
            &quot;AWSRegionArch2AMI&quot;,
            {&quot;Ref&quot;:&quot;AWS::Region&quot;},
            {&quot;Fn::FindInMap&quot;:[&quot;AWSInstanceType2Arch&quot;,{&quot;Ref&quot;:&quot;InstanceType&quot;},&quot;Arch&quot;]}
          ]
        },
        &quot;UserData&quot;:{&quot;Fn::Base64&quot;:{&quot;Ref&quot;:&quot;WebServerPort&quot;}}
      }
    },
    &quot;InstanceSecurityGroup&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::SecurityGroup&quot;,
      &quot;Properties&quot;:{
        &quot;GroupDescription&quot;:&quot;Enable SSH access and HTTP access on the inbound port&quot;,
        &quot;SecurityGroupIngress&quot;:[
          {
            &quot;IpProtocol&quot;:&quot;tcp&quot;,
            &quot;FromPort&quot;:&quot;22&quot;,
            &quot;ToPort&quot;:&quot;22&quot;,
            &quot;CidrIp&quot;:{&quot;Ref&quot;:&quot;SSHLocation&quot;}
          },
          {
             &quot;IpProtocol&quot;:&quot;tcp&quot;,
             &quot;FromPort&quot;:{&quot;Ref&quot;:&quot;WebServerPort&quot;},
             &quot;ToPort&quot;:{&quot;Ref&quot;:&quot;WebServerPort&quot;},
             &quot;CidrIp&quot;:&quot;0.0.0.0/0&quot;
          }
        ]
      }
    }
  },
  &quot;Outputs&quot;:{
    &quot;URL&quot;:{
      &quot;Description&quot;:&quot;URL of the sample website&quot;,
      &quot;Value&quot;:{&quot;Fn::Join&quot;:[&quot;&quot;,[&quot;http://&quot;,{&quot;Fn::GetAtt&quot;:[&quot;ElasticLoadBalancer&quot;,&quot;DNSName&quot;]}]]}
    }
  }
}
</code></pre><h2 id=iamgrouptemplate>IAMGroup.template</h2><pre><code>{
  &quot;AWSTemplateFormatVersion&quot;:&quot;2010-09-09&quot;,
  &quot;Resources&quot;:{
    &quot;Group1&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::Group&quot;,
      &quot;Properties&quot;:{
        &quot;Path&quot;:&quot;/myapplication/&quot;,
        &quot;Policies&quot;:[{
          &quot;PolicyName&quot;:&quot;myapppolicy&quot;,
          &quot;PolicyDocument&quot;:{
            &quot;Version&quot;:&quot;2012-10-17&quot;,
            &quot;Statement&quot;:[
              {&quot;Effect&quot;:&quot;Allow&quot;,&quot;Action&quot;:[&quot;ec2:*&quot;],&quot;Resource&quot;:[&quot;*&quot;]},
              {&quot;Effect&quot;:&quot;Deny&quot;,&quot;Action&quot;:[&quot;s3:*&quot;],&quot;NotResource&quot;:[&quot;*&quot;]}
            ]
          }
        }]
      }
    }
  },
  &quot;Outputs&quot;:{
    &quot;Group1Ref&quot;:{
      &quot;Value&quot;:{&quot;Ref&quot;:&quot;Group1&quot;}
    },
    &quot;Group1Arn&quot;:{
      &quot;Value&quot;:{&quot;Fn::GetAtt&quot;:[&quot;Group1&quot;,&quot;Arn&quot;]}
    }
  }
}
</code></pre><h2 id=iamroletemplate>IAMRole.template</h2><pre><code>{
  &quot;AWSTemplateFormatVersion&quot;:&quot;2010-09-09&quot;,
  &quot;Resources&quot;:{
    &quot;Role1&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::Role&quot;,
      &quot;Properties&quot;:{
        &quot;AssumeRolePolicyDocument&quot;:{
          &quot;Version&quot;:&quot;2012-10-17&quot;,
          &quot;Statement&quot;:[{
            &quot;Effect&quot;:&quot;Allow&quot;,
            &quot;Principal&quot;:{&quot;Service&quot;:[&quot;ec2.amazonaws.com&quot;]},
            &quot;Action&quot;:[&quot;sts:AssumeRole&quot;]
          }]
        },
        &quot;Path&quot;:&quot;/&quot;,
        &quot;Policies&quot;:[{
          &quot;PolicyName&quot;:&quot;root&quot;,
          &quot;PolicyDocument&quot;:{
            &quot;Version&quot;:&quot;2012-10-17&quot;,
            &quot;Statement&quot;:[{&quot;Effect&quot;:&quot;Allow&quot;,&quot;Action&quot;:&quot;*&quot;,&quot;Resource&quot;:&quot;*&quot;}]
          }
        }]
      }
    },
    &quot;IP1&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::InstanceProfile&quot;,
      &quot;Properties&quot;:{
        &quot;Path&quot;:&quot;/&quot;,
        &quot;Roles&quot;:[{&quot;Ref&quot;:&quot;Role1&quot;}]
      }
    }
  },
  &quot;Outputs&quot;:{
    &quot;Role1Ref&quot;:{
      &quot;Value&quot;:{&quot;Ref&quot;:&quot;Role1&quot;}
    },
    &quot;Role1Arn&quot;:{
      &quot;Value&quot;:{&quot;Fn::GetAtt&quot;:[&quot;Role1&quot;,&quot;Arn&quot;]}
    },
    &quot;IP1Ref&quot;:{
      &quot;Value&quot;:{&quot;Ref&quot;:&quot;IP1&quot;}
    },
    &quot;IP1Arn&quot;:{
      &quot;Value&quot;:{&quot;Fn::GetAtt&quot;:[&quot;IP1&quot;,&quot;Arn&quot;]}
    }
  }
}
</code></pre><h2 id=iam_users_groups_and_policiestemplate>IAM_Users_Groups_and_Policies.template</h2><pre><code>{
  &quot;AWSTemplateFormatVersion&quot;:&quot;2010-09-09&quot;,
  &quot;Description&quot;:&quot;AWS CloudFormation Sample Template IAM_Users_Groups_and_Policies: Sample template showing how to create IAM users, groups and policies. It creates a single user that is a member of a users group and an admin group. The groups each have different IAM policies associated with them. Note: This example also creates an AWSAccessKeyId/AWSSecretKey pair associated with the new user. The example is somewhat contrived since it creates all of the users and groups, typically you would be creating policies, users and/or groups that contain references to existing users or groups in your environment. Note that you will need to specify the CAPABILITY_IAM flag when you create the stack to allow this template to execute. You can do this through the AWS management console by clicking on the check box acknowledging that you understand this template creates IAM resources or by specifying the CAPABILITY_IAM flag to the cfn-create-stack command line tool or CreateStack API call. &quot;,
  &quot;Parameters&quot;:{
    &quot;Password&quot;:{
      &quot;NoEcho&quot;:&quot;true&quot;,
      &quot;Type&quot;:&quot;String&quot;,
      &quot;Description&quot;:&quot;New account password&quot;,
      &quot;MinLength&quot;:&quot;1&quot;,
      &quot;MaxLength&quot;:&quot;41&quot;
    }
  },
  &quot;Resources&quot;:{
    &quot;CFNUser&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::User&quot;,
      &quot;Properties&quot;:{
        &quot;LoginProfile&quot;:{&quot;Password&quot;:{&quot;Ref&quot;:&quot;Password&quot;}}
      }
    },
    &quot;Role1&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::Role&quot;,
      &quot;Properties&quot;:{
        &quot;AssumeRolePolicyDocument&quot;:{
          &quot;Version&quot;:&quot;2012-10-17&quot;,
          &quot;Statement&quot;:[{
            &quot;Effect&quot;:&quot;Allow&quot;,
            &quot;Principal&quot;:{&quot;Service&quot;:[&quot;ec2.amazonaws.com&quot;]},
            &quot;Action&quot;:[&quot;sts:AssumeRole&quot;]
          }]
        },
        &quot;Path&quot;:&quot;/&quot;,
        &quot;Policies&quot;:[{
          &quot;PolicyName&quot;:&quot;root&quot;,
          &quot;PolicyDocument&quot;:{
            &quot;Version&quot;:&quot;2012-10-17&quot;,
            &quot;Statement&quot;:[{&quot;Effect&quot;:&quot;Allow&quot;,&quot;Action&quot;:&quot;*&quot;,&quot;Resource&quot;:&quot;*&quot;}]
          }
        }]
      }
    },
    &quot;CFNUserGroup&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::Group&quot;
    },
    &quot;CFNAdminGroup&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::Group&quot;
    },
    &quot;Users&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::UserToGroupAddition&quot;,
      &quot;Properties&quot;:{
        &quot;GroupName&quot;:{&quot;Ref&quot;:&quot;CFNUserGroup&quot;},
        &quot;Users&quot;:[{&quot;Ref&quot;:&quot;CFNUser&quot;}]
      }
    },
    &quot;Admins&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::UserToGroupAddition&quot;,
      &quot;Properties&quot;:{
        &quot;GroupName&quot;:{&quot;Ref&quot;:&quot;CFNAdminGroup&quot;},
        &quot;Users&quot;:[{&quot;Ref&quot;:&quot;CFNUser&quot;}]
      }
    },
    &quot;CFNUserPolicies&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::Policy&quot;,
      &quot;Properties&quot;:{
        &quot;PolicyName&quot;:&quot;CFNUsers&quot;,
        &quot;PolicyDocument&quot;:{
          &quot;Statement&quot;:[{
            &quot;Effect&quot;:&quot;Allow&quot;,
            &quot;Action&quot;:[&quot;cloudformation:Describe*&quot;,&quot;cloudformation:List*&quot;,&quot;cloudformation:Get*&quot;],
            &quot;Resource&quot;:&quot;*&quot;
          }]
        },
        &quot;Groups&quot;:[{&quot;Ref&quot;:&quot;CFNUserGroup&quot;}],
        &quot;Users&quot;:[{&quot;Ref&quot;:&quot;CFNUser&quot;}],
        &quot;Roles&quot;:[{&quot;Ref&quot;:&quot;Role1&quot;}]
      }
    },
    &quot;CFNAdminPolicies&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::Policy&quot;,
      &quot;Properties&quot;:{
        &quot;PolicyName&quot;:&quot;CFNAdmins&quot;,
        &quot;PolicyDocument&quot;:{
          &quot;Statement&quot;:[{&quot;Effect&quot;:&quot;Allow&quot;,&quot;Action&quot;:&quot;cloudformation:*&quot;,&quot;Resource&quot;:&quot;*&quot;}]
        },
        &quot;Groups&quot;:[{&quot;Ref&quot;:&quot;CFNAdminGroup&quot;}]
      }
    },
    &quot;CFNKeys&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::AccessKey&quot;,
      &quot;Properties&quot;:{
        &quot;UserName&quot;:{&quot;Ref&quot;:&quot;CFNUser&quot;}
      }
    }
  },
  &quot;Outputs&quot;:{
    &quot;AccessKey&quot;:{
      &quot;Value&quot;:{&quot;Ref&quot;:&quot;CFNKeys&quot;},
      &quot;Description&quot;:&quot;AWSAccessKeyId of new user&quot;
    },
    &quot;SecretKey&quot;:{
      &quot;Value&quot;:{&quot;Fn::GetAtt&quot;:[&quot;CFNKeys&quot;,&quot;SecretAccessKey&quot;]},
      &quot;Description&quot;:&quot;AWSSecretKey of new user&quot;
    }
  }
}
</code></pre><h2 id=iamusertemplate>IAMUser.template</h2><pre><code>{
  &quot;AWSTemplateFormatVersion&quot;:&quot;2010-09-09&quot;,
  &quot;Parameters&quot;:{
    &quot;Password&quot;:{
      &quot;NoEcho&quot;:&quot;true&quot;,
      &quot;Type&quot;:&quot;String&quot;,
      &quot;Description&quot;:&quot;New account password&quot;,
      &quot;MinLength&quot;:&quot;1&quot;,
      &quot;MaxLength&quot;:&quot;41&quot;
    }
  },
  &quot;Resources&quot;:{
    &quot;CFNUserGroup&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::Group&quot;,
      &quot;Properties&quot;:{
        &quot;Policies&quot;:[{
          &quot;PolicyName&quot;:&quot;CFNUsers&quot;,
          &quot;PolicyDocument&quot;:{
            &quot;Statement&quot;:[{
              &quot;Effect&quot;:&quot;Allow&quot;,
              &quot;Action&quot;:[&quot;cloudformation:Describe*&quot;,&quot;cloudformation:List*&quot;,&quot;cloudformation:Get*&quot;],
              &quot;Resource&quot;:&quot;*&quot;
            }]
          }
        }]
      }
    },
    &quot;CFNAdminGroup&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::Group&quot;
    },
    &quot;CFNUser&quot;:{
      &quot;Type&quot;:&quot;AWS::IAM::User&quot;,
      &quot;Properties&quot;:{
        &quot;LoginProfile&quot;:{&quot;Password&quot;:{&quot;Ref&quot;:&quot;Password&quot;}},
        &quot;Groups&quot;:[{&quot;Ref&quot;:&quot;CFNUserGroup&quot;},{&quot;Ref&quot;:&quot;CFNAdminGroup&quot;}],
        &quot;Policies&quot;:[{
          &quot;PolicyName&quot;:&quot;CFNUsers&quot;,
          &quot;PolicyDocument&quot;:{
            &quot;Statement&quot;:[{
              &quot;Effect&quot;:&quot;Allow&quot;,
              &quot;Action&quot;:[&quot;cloudformation:Describe*&quot;,&quot;cloudformation:List*&quot;,&quot;cloudformation:Get*&quot;],
              &quot;Resource&quot;:&quot;*&quot;
            }]
          }
        }]
      }
    }
  }
}
</code></pre><h2 id=securitygroupruletemplate>SecurityGroupRule.template</h2><pre><code>{
&quot;AWSTemplateFormatVersion&quot;:&quot;2010-09-09&quot;,
  &quot;Description&quot;:&quot;Create an EC2 instance running a specified EMI, a security group, and an ingress rule.&quot;,
  &quot;Parameters&quot;:{
    &quot;ImageId&quot;:{
      &quot;Description&quot;:&quot;Image id&quot;,
      &quot;Type&quot;:&quot;String&quot;
    }
  },
  &quot;Resources&quot;:{
    &quot;Ec2Instance1&quot;:{
      &quot;Description&quot;:&quot;My instance&quot;,
      &quot;Type&quot;:&quot;AWS::EC2::Instance&quot;,
      &quot;Properties&quot;:{
        &quot;ImageId&quot;:{&quot;Ref&quot;:&quot;ImageId&quot;}
      },
      &quot;DependsOn&quot;:&quot;Ec2Instance2&quot;
    },
    &quot;Ec2Instance2&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::Instance&quot;,
      &quot;Properties&quot;:{
        &quot;ImageId&quot;:{&quot;Ref&quot;:&quot;ImageId&quot;},
        &quot;SecurityGroups&quot;:[{&quot;Ref&quot;:&quot;InstanceSecurityGroup&quot;}]
      }
    },
    &quot;InstanceSecurityGroup&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::SecurityGroup&quot;,
      &quot;Properties&quot;:{
        &quot;GroupDescription&quot;:&quot;Cloudformation Group&quot;,
        &quot;SecurityGroupIngress&quot;:[{&quot;IpProtocol&quot;:&quot;tcp&quot;,&quot;FromPort&quot;:&quot;22&quot;,&quot;ToPort&quot;:&quot;22&quot;,&quot;CidrIp&quot;:&quot;0.0.0.0/0&quot;}]
      }
    },
    &quot;IngressRule&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::SecurityGroupIngress&quot;,
      &quot;Properties&quot;:{
        &quot;GroupName&quot;:{&quot;Ref&quot;:&quot;InstanceSecurityGroup&quot;},
        &quot;FromPort&quot;:&quot;80&quot;,
        &quot;ToPort&quot;:&quot;80&quot;,
        &quot;IpProtocol&quot;:&quot;tcp&quot;,
        &quot;SourceSecurityGroupName&quot;:{&quot;Ref&quot;:&quot;InstanceSecurityGroup&quot;}
      }
    }
  }
}
</code></pre><h2 id=volumestemplate>Volumes.template</h2><pre><code>{
  &quot;AWSTemplateFormatVersion&quot;:&quot;2010-09-09&quot;,
  &quot;Description&quot;:&quot;Create an EC2 instance running a specified EMI and attached volumes.&quot;,
  &quot;Parameters&quot;:{
    &quot;ImageId&quot;:{
      &quot;Description&quot;:&quot;Image id&quot;,
      &quot;Type&quot;:&quot;String&quot;
    }
  },
  &quot;Resources&quot;:{
    &quot;Volume1&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::Volume&quot;,
      &quot;Properties&quot;:{
        &quot;Size&quot;:&quot;5&quot;,
        &quot;AvailabilityZone&quot;:{&quot;Fn::GetAtt&quot;:[&quot;Instance1&quot;,&quot;AvailabilityZone&quot;]}
      }
    },
    &quot;Volume2&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::Volume&quot;,
      &quot;Properties&quot;:{
        &quot;Size&quot;:&quot;5&quot;,
        &quot;AvailabilityZone&quot;:{&quot;Fn::GetAtt&quot;:[&quot;Instance1&quot;,&quot;AvailabilityZone&quot;]}
      }
    },
    &quot;MountPoint1&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::VolumeAttachment&quot;,
      &quot;Properties&quot;:{
        &quot;InstanceId&quot;:{&quot;Ref&quot;:&quot;Instance1&quot;},
        &quot;VolumeId&quot;:{&quot;Ref&quot;:&quot;Volume1&quot;},
        &quot;Device&quot;:&quot;/dev/sdc&quot;
      }
    },
    &quot;Instance1&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::Instance&quot;,
      &quot;Properties&quot;:{
        &quot;ImageId&quot;:{&quot;Ref&quot;:&quot;ImageId&quot;}
      }
    },
    &quot;Instance2&quot;:{
      &quot;Type&quot;:&quot;AWS::EC2::Instance&quot;,
      &quot;Properties&quot;:{
        &quot;ImageId&quot;:{&quot;Ref&quot;:&quot;ImageId&quot;},
        &quot;Volumes&quot;:[{&quot;VolumeId&quot;:{&quot;Ref&quot;:&quot;Volume2&quot;},&quot;Device&quot;:&quot;/dev/sdc&quot;}]
      } 
    }
  }
}
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-21e29648ce96484797f4155e4f10cac0>14.3 - Troubleshooting CloudFormation</h1><p>This topic describes some of the issues that can happen with CloudFormation. It also talks about how you can detect these issues, and offers some ways to fix the issues.</p><h2 id=invalid-json>Invalid JSON</h2><p>JSON must be syntactically valid. For example, if you don&rsquo;t type in the final <code>}</code> character in a template, the <code>euform-create-stack</code> command returns an error message.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euform-create-stack: error <span style=color:#ce5c00;font-weight:700>(</span>ValidationError<span style=color:#ce5c00;font-weight:700>)</span>: Unexpected end-of-input: 
</span></span><span style=display:flex><span>expected close marker <span style=color:#204a87;font-weight:700>for</span> OBJECT <span style=color:#ce5c00;font-weight:700>(</span>from <span style=color:#ce5c00;font-weight:700>[</span>Source: java.io.StringReader@56b3916d<span style=color:#000;font-weight:700>;</span> 
</span></span><span style=display:flex><span>line: 1, column: 0<span style=color:#ce5c00;font-weight:700>])</span> at <span style=color:#ce5c00;font-weight:700>[</span>Source: java.io.StringReader@56b3916d<span style=color:#000;font-weight:700>;</span> line: 38, 
</span></span><span style=display:flex><span>column : 849<span style=color:#ce5c00;font-weight:700>]</span>
</span></span></code></pre></div><p>If you see an error like this, there is most likely something syntactically wrong with your JSON template. Some editors can detect things like unbalanced parentheses, but in the worst case you can paste your template into this URL <a href=http://jsonparseronline.com/>http://jsonparseronline.com/</a> and it will help you find syntax errors.</p><h2 id=invalid-argument>Invalid Argument</h2><p>If you try to create, for example, a stack that already exists, you will get a simple error message.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euform-create-stack: error <span style=color:#ce5c00;font-weight:700>(</span>AlreadyExists<span style=color:#ce5c00;font-weight:700>)</span>: Stack already exists
</span></span></code></pre></div><h2 id=invalid-reference>Invalid Reference</h2><p>If you use an invalid reference to, for example, a resource that doesn&rsquo;t exit, Eucalyptus returns a simple error message.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>euform-create-stack: error <span style=color:#ce5c00;font-weight:700>(</span>ValidationError<span style=color:#ce5c00;font-weight:700>)</span>: Template format error: Unresolved resource dependencies <span style=color:#ce5c00;font-weight:700>[</span>MySecurityGroup2<span style=color:#ce5c00;font-weight:700>]</span> in the Resources block of the template&gt;
</span></span></code></pre></div><h2 id=complex-errors>Complex Errors</h2><p>Not all errors are simple. We recommend that you use <code>euform-describe-stacks</code> (or <code>aws cloudformation describe-stacks</code>) and <code>euform-describe-stack-resources</code> to determine the current state of the stack. If there&rsquo;s an error, it will usually be shown in the <code>euform-describe-stack-events</code> output. Otherwise, you will have to dig into the <em>cloud-output.log</em> file for further information. You can also manually delete resources if they are causing issues. If a <code>euform-delete-stack</code> fails, you can delete the offending resource and try again.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-54de08f31ea3a000e9d4c449e213742a>15 - Using Virtual Private Cloud</h1><h1 id=using-virtual-private-cloud>Using Virtual Private Cloud</h1><p>Eucalyptus Virtual Private Cloud (VPC) is an implementation of Amazon VPC that allows you to define a logically isolated virtual network that can contain Eucalyptus resources. A virtual network enhances security by allowing you to have fine-grained, explicit control over network gateways, subnets, IP address ranges, and inbound and outbound connectivity. This section of the User Guide covers how Eucalyptus VPC works and how to use it.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>For more information about Amazon Virtual Private Cloud, see the .</div></p></div><div class=td-content style=page-break-before:always><h1 id=pg-98a4c8eabd3123e6c2febb3fc85d9a08>15.1 - How VPC Works</h1><h1 id=how-vpc-works>How VPC Works</h1><p>Eucalyptus Virtual Private Cloud (VPC) is an implementation of Amazon VPC that allows you to run instances inside an isolated virtual network that you define. Eucalyptus VPC enables you to have control over subnets, internet gateways, and IP address ranges and allocations inside of this virtual network, as well as the ability to define and use multiple layers of security with security groups.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-1476e25db6444279c953d0bf4910fee1>15.1.1 - Default VPCs</h1><p>Starting with Eucalyptus versions 4.1 and later, when you create an account in your Eucalyptus cloud in VPCMIDO network mode, you get a default VPC with a single public subnet and an attached Internet gateway. All instances that are created in this account that do not explicitly specify a VPC are placed into this default VPC and given a public IP address and behave like &lsquo;classic&rsquo; AWS EC2 instances.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-90f3cb02a25b58e0f1210668106b6e0b>15.1.2 - Subnets and IP Addressing</h1><p>A virtual private cloud (VPC) is a virtual network that is logically isolated from other virtual networks in your Eucalyptus cloud.</p><p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>For more information about CIDR notation, see the on Wikipedia.</div><strong>Private IP Addresses</strong></p><p>When you create a VPC, you can specify the range of IP addresses for your VPC using Classless Inter-Domain Routing (CIDR) notation. When you launch an instance (VM) in your VPC, you can assign a private IP address to the instance from this IP address range. If you don&rsquo;t explicitly assign a private IP address, one is assigned to the instance for you.</p><p><strong>Public IP Addresses</strong></p><p>By default, instances launched into the default subnet in your VPC receive a public IP address. This public IP address is assigned from a pool of public IP addresses, and is not associated with your account. This public IP address can&rsquo;t be manually added or removed from the VPC instance. The public IP address is mapped to the instance&rsquo;s private IP address using Network Address Translation (NAT).</p><p>You can control whether or not your VPC instances get a public IP address by either enabling/disabling the public IP address attribute of the subnet, or by overriding the subnet&rsquo;s behavior when launching an instance into the VPC.</p><p>If you want a persistent IP address for your VPC instance, you can use the <code>euca-allocate-address</code> to create an elastic IP address, and then use <code>euca-associate-address</code> to assign this address.</p><p><strong>Subnets</strong></p><p>Once you&rsquo;ve created a VPC, you can create one or more subnets inside the VPC. A subnet is simply a logical subdivision of a network of IP addresses. Subnets can be used to enable tighter security, allow separate administration of the network by organization, and enable more efficient network traffic by containing traffic between nodes in a subnet and using route tables for traffic that needs to move between subnets.</p><p>Note that subnets in a VPC cannot overlap; and the first four IP addresses and the last IP address are reserved for internal use. For example, of the 16 IP addresses of a /28 subnet, 11 are available for instances; of the 256 IP addresses of a /24 subnet, 251 are available for instances. Subnets must be larger than /28 and smaller than /16.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>For more information about subnets, see the on Wikipedia.</div></div><div class=td-content style=page-break-before:always><h1 id=pg-9696b58e42c55b3f2386909aefa32a8d>15.2 - Understanding VPC Networking Concepts</h1><h1 id=understanding-vpc-networking-concepts>Understanding VPC Networking Concepts</h1><p>This section discusses VPC networking concepts and terminology.<div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>This documentation assumes that you have some knowledge of IP addressing, CIDR, route tables, and subnets. See the links included throughout the documentation for more information on these topics.</div></p></div><div class=td-content><h1 id=pg-a2fc9c3cb43048d3dba6174f4d88338c>15.2.1 - Domain Name System (DNS)</h1><p>The Domain Name System (DNS) is an Internet standard that maps unique DNS names (for example: <a href=https://www.example.com>www.example.com</a>) to the underlying public IP address (for example: 128.0.0.1).</p><p>Eucalyptus provides a DNS service with your cloud. By default, EC2 classic (EDGE mode) and VPCMIDO mode default subnet instances that are launched in your Eucalyptus cloud are automatically assigned public and private DNS names from the Eucalyptus DNS service.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c0b77bfe05ecbbbc8b0c5c63a84365ae>15.2.2 - Elastic Network Interfaces (ENIs)</h1><p>In Eucalyptus VPC, networking to instances (VMs) is delivered in the form of Elastic Network Interfaces (ENIs). ENIs are virtual network interfaces that can be attached to and/or detached from instances in a VPC.</p><p>Attributes of an ENI (private address, public address, Elastic IP, MAC address, security groups, and source/destination check flag) follow the ENI as it is detached from an instance and attached to another instance. An instance in a VPC has a default ENI attached, which is called the primary ENI. The Primary ENI cannot be detached.</p><p>Additional ENIs (up to a total of eight) can be attached to instances as needed. ENIs in different subnets can be attached to the same instance, but all ENIs and the instance must reside in the same Availability Zone. Users may need to manually bring up and configure secondary ENIs from within instances.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-17b230366694602b68dca7534531c6b5>15.2.3 - Route Tables</h1><p>A route table defines how traffic is directed in your network. Each subnet in your network has to be associated with one (and only one) route table, but a route table can have multiple subnets associated with it. A default route table (which simply contains a local route that allows communication within the VPC) is automatically created for you when you create your VPC. New subnets will get this route table by default, but you can replace it with a custom route table that enables you to explicitly control subnet traffic.</p><div class="alert alert-success" role=alert><h4 class=alert-heading>Note</h4>For more information on route tables, see the on Wikipedia.</div></div><div class=td-content style=page-break-before:always><h1 id=pg-813b39755fd2696456e6c9e942b46520>15.2.4 - Internet Gateways</h1><p>An Internet gateway is an object that runs inside of your VPC and provides communication between VPC instances and the Internet.</p><p>To use an Internet gateway in your VPC, you attach the gateway to your VPC, make sure your route tables direct Internet traffic to the Internet gateway, and configure your security groups to allow traffic through.</p><p>By default, instances loaded into any non-default VPC have private IP addresses (so they can communicate with other instances in the same VPC), but they do not have public IP addresses. For an instance to be able to communicate with the Internet gateway, it must have an associated public IP address. The default VPC comes with a pre-configured Internet gateway, and all instances that are launched into the default subnet receive a public IP address, so these instances have Internet access.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-16a25a9a6d471ed2564d98fdb25c53e7>15.2.5 - Network Address Translation (NAT) Gateways</h1><p>NAT Gateways enable instances in private VPC subnets to initiate communication with the Internet (and receive responses), but prevents connections to be initiated from the Internet. Traffic bound to the Internet from instances in private subnets should be directed to a NAT gateway (through the use of route tables), which will translate the source address to its own Elastic IP and route it to the Internet. The destination will send a response back to the Elastic IP (i.e., the NAT gateway), where the address translation will be reversed and delivered to the originating private IP.</p><p>NAT Gateways should be created in public VPC subnets, and have an Elastic IP associated. Private VPC subnets should have its route table manually updated to direct Internet-bound traffic to a NAT gateway.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-364ac051523babdcea4194ceefceb519>15.3 - VPC Security Concepts</h1><h1 id=vpc-security-concepts>VPC Security Concepts</h1><p>This section discusses VPC security concepts and terminology.</p></div><div class=td-content><h1 id=pg-e051c24ce8cd658239c4695c54061aff>15.3.1 - Security Groups</h1><p>A security group is a mechanism that allows you to control inbound and outbound traffic for your VPC. A security group has rules that specify what kinds of traffic are allowed in and out of instances (VMs) running in your VPC.</p><p>A VPC comes with a default security group that allows inbound traffic from other instances assigned to the same security group, and allows all outbound traffic. You can change the rules for the default security group, but you can&rsquo;t delete it.</p><p>If you don&rsquo;t specify a security group when you launch an instance in your VPC, the instance will be associated with the default security group.</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Community forums" aria-label="Community forums"><a class=text-white target=_blank rel=noopener href=https://github.com/orgs/eucastack/discussions aria-label="Community forums"><i class="fa fa-comments"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/eucastack aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/eucastack aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/eucastack aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel=noopener href=https://discord.gg/A9UPtck4 aria-label=Discord><i class="fab fa-discord"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 EucaStack All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.6f618f935d0e212fc39316b4023fa69460fd4a5779211bdc3535ec542578f225.js integrity="sha256-b2GPk10OIS/Dkxa0Aj+mlGD9Sld5IRvcNTXsVCV48iU=" crossorigin=anonymous></script></body></html>